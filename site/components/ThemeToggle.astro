---
/**
 * ThemeToggle Component
 *
 * A button that toggles between light and dark themes.
 * Uses the theme-wc web component internally.
 *
 * Props:
 * - class: Additional CSS classes (optional)
 */

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<theme-wc class:list={[className]}>
  <button data-trigger class="ghost" aria-label="Toggle theme">
    <icon-wc name="sun" size="sm" class="icon-light"></icon-wc>
    <icon-wc name="moon" size="sm" class="icon-dark"></icon-wc>
    <span class="label">Theme</span>
  </button>
</theme-wc>

<style>
  theme-wc {
    display: inline-flex;
  }

  button {
    display: inline-flex;
    align-items: center;
    gap: var(--size-xs);
  }

  /* Show sun in dark mode, moon in light mode */
  .icon-light { display: none; }
  .icon-dark { display: inline-flex; }

  :global([data-mode="dark"]) .icon-light { display: inline-flex; }
  :global([data-mode="dark"]) .icon-dark { display: none; }

  @media (prefers-color-scheme: dark) {
    :global(:not([data-mode])) .icon-light { display: inline-flex; }
    :global(:not([data-mode])) .icon-dark { display: none; }
  }

  /* Hide label on small screens */
  @media (max-width: 640px) {
    .label {
      position: absolute;
      width: 1px;
      height: 1px;
      clip: rect(0, 0, 0, 0);
    }
  }
</style>
