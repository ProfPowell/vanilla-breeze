---
/**
 * Dashboard Experiment
 *
 * Dashboard layout with collapsible sidebar and responsive panels.
 */

import LabLayout from '../../../layouts/LabLayout.astro';
---

<LabLayout
  title="Dashboard"
  description="Dashboard layout with collapsible sidebar and responsive panels."
>
  <div class="dashboard-wrapper">
    <aside class="dashboard-sidebar" data-collapsed="false">
      <div class="sidebar-header">
        <span class="logo">Dashboard</span>
        <button class="collapse-btn" id="collapse-btn" aria-label="Toggle sidebar">
          &#9776;
        </button>
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li><a href="#" class="nav-item active">
            <span class="nav-icon">&#128200;</span>
            <span class="nav-label">Analytics</span>
          </a></li>
          <li><a href="#" class="nav-item">
            <span class="nav-icon">&#128101;</span>
            <span class="nav-label">Users</span>
          </a></li>
          <li><a href="#" class="nav-item">
            <span class="nav-icon">&#128221;</span>
            <span class="nav-label">Reports</span>
          </a></li>
          <li><a href="#" class="nav-item">
            <span class="nav-icon">&#9881;</span>
            <span class="nav-label">Settings</span>
          </a></li>
        </ul>
      </nav>
    </aside>

    <main class="dashboard-main">
      <header class="dashboard-header">
        <h1>Analytics Dashboard</h1>
        <div class="header-actions">
          <button class="action-btn">Export</button>
          <button class="action-btn primary">Add Widget</button>
        </div>
      </header>

      <div class="dashboard-grid">
        <div class="widget widget-large">
          <h2>Overview</h2>
          <div class="widget-content">
            <div class="stat">
              <span class="stat-value">12,543</span>
              <span class="stat-label">Total Users</span>
            </div>
            <div class="stat">
              <span class="stat-value">8,234</span>
              <span class="stat-label">Active Sessions</span>
            </div>
            <div class="stat">
              <span class="stat-value">94.2%</span>
              <span class="stat-label">Uptime</span>
            </div>
          </div>
        </div>

        <div class="widget">
          <h2>Recent Activity</h2>
          <ul class="activity-list">
            <li>User signed up</li>
            <li>Report generated</li>
            <li>Settings updated</li>
            <li>New comment</li>
          </ul>
        </div>

        <div class="widget">
          <h2>Quick Actions</h2>
          <div class="quick-actions">
            <button>Create Report</button>
            <button>Invite User</button>
            <button>View Logs</button>
          </div>
        </div>

        <div class="widget widget-wide">
          <h2>Performance</h2>
          <div class="chart-placeholder">
            Chart visualization would go here
          </div>
        </div>
      </div>
    </main>
  </div>
</LabLayout>

<style>
  .dashboard-wrapper {
    display: grid;
    grid-template-columns: auto 1fr;
    min-height: calc(100vh - 80px);
  }

  /* Sidebar */
  .dashboard-sidebar {
    width: 240px;
    background: var(--color-surface);
    border-right: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    transition: width 0.2s ease;
  }

  .dashboard-sidebar[data-collapsed="true"] {
    width: 60px;
  }

  .dashboard-sidebar[data-collapsed="true"] .nav-label,
  .dashboard-sidebar[data-collapsed="true"] .logo {
    display: none;
  }

  .sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--size-m);
    border-bottom: 1px solid var(--color-border);
  }

  .logo {
    font-weight: 600;
    font-size: var(--size-m);
  }

  .collapse-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: var(--size-m);
    padding: var(--size-xs);
  }

  .sidebar-nav {
    padding: var(--size-s);
    display: flex;
    flex-direction: column;
    gap: var(--size-2xs);
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: var(--size-s);
    padding: var(--size-s) var(--size-m);
    color: var(--color-text);
    text-decoration: none;
    border-radius: var(--radius-s);
    transition: background 0.15s ease;
  }

  .nav-item:hover {
    background: var(--color-surface-alt);
  }

  .nav-item.active {
    background: var(--color-primary);
    color: white;
  }

  .nav-icon {
    font-size: 1.2rem;
  }

  /* Main Content */
  .dashboard-main {
    background: var(--color-surface-alt);
    overflow-y: auto;
  }

  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--size-m) var(--size-l);
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
  }

  .dashboard-header h1 {
    margin: 0;
    font-size: var(--size-xl);
  }

  .header-actions {
    display: flex;
    gap: var(--size-s);
  }

  .action-btn {
    padding: var(--size-s) var(--size-m);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    background: var(--color-surface);
    cursor: pointer;
    font-family: inherit;
  }

  .action-btn.primary {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
  }

  /* Dashboard Grid */
  .dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--size-m);
    padding: var(--size-l);
  }

  .widget {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-m);
    padding: var(--size-m);
  }

  .widget h2 {
    margin: 0 0 var(--size-m) 0;
    font-size: var(--size-m);
    color: var(--color-text-muted);
  }

  .widget-large {
    grid-column: span 2;
  }

  .widget-wide {
    grid-column: 1 / -1;
  }

  @media (width < 768px) {
    .widget-large,
    .widget-wide {
      grid-column: span 1;
    }

    .dashboard-wrapper {
      grid-template-columns: 1fr;
    }

    .dashboard-sidebar {
      position: fixed;
      left: -240px;
      height: 100%;
      z-index: 100;
    }

    .dashboard-sidebar[data-collapsed="false"] {
      left: 0;
    }
  }

  /* Widget Content */
  .widget-content {
    display: flex;
    gap: var(--size-xl);
    flex-wrap: wrap;
  }

  .stat {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-size: var(--size-xl);
    font-weight: 600;
    color: var(--color-primary);
  }

  .stat-label {
    font-size: var(--size-s);
    color: var(--color-text-muted);
  }

  .activity-list {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .activity-list li {
    padding: var(--size-s) 0;
    border-bottom: 1px solid var(--color-border);
    font-size: var(--size-s);
  }

  .activity-list li:last-child {
    border-bottom: none;
  }

  .quick-actions {
    display: flex;
    flex-direction: column;
    gap: var(--size-xs);
  }

  .quick-actions button {
    padding: var(--size-s);
    background: var(--color-surface-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    cursor: pointer;
    font-family: inherit;
    text-align: left;
  }

  .chart-placeholder {
    height: 200px;
    background: var(--color-surface-alt);
    border-radius: var(--radius-s);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-muted);
  }
</style>

<script>
  const sidebar = document.querySelector('.dashboard-sidebar');
  const collapseBtn = document.getElementById('collapse-btn');

  collapseBtn?.addEventListener('click', () => {
    const isCollapsed = sidebar?.getAttribute('data-collapsed') === 'true';
    sidebar?.setAttribute('data-collapsed', String(!isCollapsed));
  });
</script>
