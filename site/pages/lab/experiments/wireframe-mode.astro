---
/**
 * Wireframe Mode Experiment
 *
 * Demonstrates the enhanced wireframe mode with fidelity levels,
 * wireframe fonts, and labeling system for design iteration.
 */

import LabLayout from '../../../layouts/LabLayout.astro';
---

<LabLayout
  title="Wireframe Mode"
  description="Enhanced wireframe mode with fidelity levels, wireframe fonts, and labeling"
>
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="/lab/">Lab</a> / <a href="/lab/experiments/">Experiments</a> / <span aria-current="page">Wireframe Mode</span>
  </nav>

  <div class="wireframe-demo">
    <header class="demo-header">
      <h1>Wireframe Mode</h1>
      <p>Design iteration tool with multiple fidelity levels and smart labeling</p>

      <div class="controls">
        <fieldset class="fidelity-switcher">
          <legend>Fidelity Level</legend>
          <label>
            <input type="radio" name="fidelity" value="" checked />
            Off
          </label>
          <label>
            <input type="radio" name="fidelity" value="lo" />
            Lo-fi
          </label>
          <label>
            <input type="radio" name="fidelity" value="mid" />
            Mid-fi
          </label>
          <label>
            <input type="radio" name="fidelity" value="hi" />
            Hi-fi
          </label>
          <label>
            <input type="radio" name="fidelity" value="annotate" />
            Annotate
          </label>
        </fieldset>

        <fieldset class="options">
          <legend>Options</legend>
          <label>
            <input type="checkbox" id="auto-labels" checked />
            Auto-label elements
          </label>
        </fieldset>
      </div>
    </header>

    <div class="demo-container" id="demo-container">
      <section class="demo-section">
        <h2>Font Comparison</h2>
        <p>These wireframe fonts keep text editable while abstracting content. Compare styles:</p>

        <div class="font-samples">
          <div class="font-sample">
            <h3>Redacted Script (Lo-fi)</h3>
            <p style="font-family: 'Redacted Script', cursive;">The quick brown fox jumps over the lazy dog. 0123456789</p>
          </div>
          <div class="font-sample">
            <h3>Flow Block (Mid-fi)</h3>
            <p style="font-family: 'Flow Block', system-ui;">The quick brown fox jumps over the lazy dog. 0123456789</p>
          </div>
          <div class="font-sample">
            <h3>Flow Circular</h3>
            <p style="font-family: 'Flow Circular', system-ui;">The quick brown fox jumps over the lazy dog. 0123456789</p>
          </div>
          <div class="font-sample">
            <h3>Flow Rounded</h3>
            <p style="font-family: 'Flow Rounded', system-ui;">The quick brown fox jumps over the lazy dog. 0123456789</p>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>Labeled Elements</h2>
        <p>Elements with <code>data-wf-label</code> display contextual labels in wireframe mode.</p>

        <div class="labeled-demo">
          <header data-wf-label="Site Header">
            <nav data-wf-label="Primary Navigation">
              <a href="#">Home</a>
              <a href="#">Products</a>
              <a href="#">About</a>
              <a href="#">Contact</a>
            </nav>
          </header>

          <main data-wf-label="Main Content Area">
            <article data-wf-label="Featured Article">
              <h3>Article Title</h3>
              <p>This is a sample article with labeled sections to demonstrate how wireframe labeling helps identify content areas during design review.</p>
            </article>

            <aside data-wf-label="Sidebar Widget">
              <h4>Related Links</h4>
              <ul>
                <li><a href="#">Link one</a></li>
                <li><a href="#">Link two</a></li>
                <li><a href="#">Link three</a></li>
              </ul>
            </aside>
          </main>
        </div>
      </section>

      <section class="demo-section">
        <h2>Image Placeholders</h2>
        <p>Images show X-pattern overlays with labels from <code>alt</code> text or <code>data-wf-label</code>.</p>

        <div class="image-demo">
          <figure>
            <img src="https://picsum.photos/400/300" alt="Hero Image" data-wf-label="Hero Banner" />
            <figcaption>With explicit label</figcaption>
          </figure>

          <figure>
            <img src="https://picsum.photos/300/200" alt="Product Photo" />
            <figcaption>Uses alt text as label</figcaption>
          </figure>

          <figure>
            <img src="https://picsum.photos/200/200" alt="User Avatar" />
            <figcaption>Square aspect ratio</figcaption>
          </figure>
        </div>
      </section>

      <section class="demo-section">
        <h2>Common Page Patterns</h2>
        <p>See how wireframe mode renders typical page components.</p>

        <div class="pattern-demo">
          <div class="hero-pattern" data-wf-label="Hero Section">
            <h3>Welcome to Our Site</h3>
            <p>A compelling tagline that captures attention and drives engagement with your product or service.</p>
            <div class="cta-buttons">
              <button type="button">Primary CTA</button>
              <button type="button" class="secondary">Secondary CTA</button>
            </div>
          </div>

          <div class="cards-pattern">
            <div class="card" data-wf-label="Feature Card">
              <img src="https://picsum.photos/150/100" alt="Feature Icon" />
              <h4>Feature One</h4>
              <p>Description of this amazing feature and its benefits.</p>
            </div>
            <div class="card" data-wf-label="Feature Card">
              <img src="https://picsum.photos/150/100" alt="Feature Icon" />
              <h4>Feature Two</h4>
              <p>Description of this amazing feature and its benefits.</p>
            </div>
            <div class="card" data-wf-label="Feature Card">
              <img src="https://picsum.photos/150/100" alt="Feature Icon" />
              <h4>Feature Three</h4>
              <p>Description of this amazing feature and its benefits.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>Form Elements</h2>
        <p>Form controls in wireframe mode maintain structure while simplifying visuals.</p>

        <form class="form-demo" data-wf-label="Contact Form" onsubmit="return false;">
          <div class="form-row">
            <label for="name-input">Name</label>
            <input type="text" id="name-input" placeholder="Your name" />
          </div>
          <div class="form-row">
            <label for="email-input">Email</label>
            <input type="email" id="email-input" placeholder="your@email.com" />
          </div>
          <div class="form-row">
            <label for="message-input">Message</label>
            <textarea id="message-input" rows="3" placeholder="Your message..."></textarea>
          </div>
          <div class="form-row">
            <fieldset>
              <legend>Preferred Contact</legend>
              <label><input type="radio" name="contact" checked /> Email</label>
              <label><input type="radio" name="contact" /> Phone</label>
            </fieldset>
          </div>
          <div class="form-row">
            <label><input type="checkbox" /> Subscribe to newsletter</label>
          </div>
          <button type="submit">Send Message</button>
        </form>
      </section>

      <section class="demo-section">
        <h2>Tables and Data</h2>
        <p>Tabular data maintains structure and cell boundaries.</p>

        <table data-wf-label="Data Table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Category</th>
              <th>Price</th>
              <th>Stock</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Widget Pro</td>
              <td>Hardware</td>
              <td>$99.00</td>
              <td>In Stock</td>
            </tr>
            <tr>
              <td>Gadget Plus</td>
              <td>Electronics</td>
              <td>$149.00</td>
              <td>Limited</td>
            </tr>
            <tr>
              <td>Service Plan</td>
              <td>Subscription</td>
              <td>$29/mo</td>
              <td>Available</td>
            </tr>
          </tbody>
        </table>
      </section>

      <footer class="demo-footer" data-wf-label="Site Footer">
        <nav>
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
          <a href="#">Contact</a>
        </nav>
        <p>Footer content area with copyright and links.</p>
      </footer>
    </div>

    <section class="usage-section">
      <h2>Usage</h2>

      <h3>HTML Activation</h3>
      <pre><code>&lt;!-- Fidelity levels --&gt;
&lt;html data-wireframe="lo"&gt;   &lt;!-- Sketch aesthetic --&gt;
&lt;html data-wireframe="mid"&gt;  &lt;!-- Clean blocks --&gt;
&lt;html data-wireframe="hi"&gt;   &lt;!-- Near-production --&gt;
&lt;html data-wireframe&gt;        &lt;!-- Default (mid) --&gt;
&lt;html data-wireframe="annotate"&gt; &lt;!-- Show labels --&gt;</code></pre>

      <h3>Labeling Elements</h3>
      <pre><code>&lt;!-- Add labels via attribute --&gt;
&lt;section data-wf-label="Hero Section"&gt;...&lt;/section&gt;
&lt;img src="..." alt="Product Photo" data-wf-label="Main Product" /&gt;

&lt;!-- Images auto-use alt text --&gt;
&lt;img src="..." alt="Profile Picture" /&gt;</code></pre>

      <h3>JavaScript API</h3>
      <pre><code>import &#123; wireframe &#125; from '/src/lib/wireframe.js';

// Toggle wireframe mode
wireframe.toggle('mid');

// Set specific fidelity
wireframe.setFidelity('lo');

// Label elements programmatically
wireframe.label('.hero', 'Hero Section');
wireframe.label(element, 'Custom Label');

// Auto-label all elements with data-wf-label and images
wireframe.labelElements();

// Check state
wireframe.isActive();      // boolean
wireframe.getFidelity();   // 'lo' | 'mid' | 'hi' | 'annotate' | null</code></pre>
    </section>
  </div>
</LabLayout>

<style>
  .wireframe-demo {
    max-width: 900px;
    margin: 0 auto;
    padding: var(--size-m);
  }

  .demo-header {
    text-align: center;
    margin-bottom: var(--size-xl);
  }

  .demo-header h1 {
    margin-bottom: var(--size-s);
  }

  .demo-header > p {
    color: var(--color-text-muted);
    margin-bottom: var(--size-m);
  }

  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: var(--size-m);
    justify-content: center;
  }

  .controls fieldset {
    border: 1px solid var(--color-border);
    padding: var(--size-s);
    border-radius: var(--radius-s);
  }

  .controls legend {
    font-weight: 600;
    padding: 0 var(--size-xs);
  }

  .fidelity-switcher {
    display: flex;
    flex-wrap: wrap;
    gap: var(--size-s);
    align-items: center;
  }

  .fidelity-switcher label {
    display: flex;
    align-items: center;
    gap: var(--size-2xs);
    cursor: pointer;
    padding: var(--size-2xs) var(--size-xs);
    border-radius: var(--radius-s);
  }

  .fidelity-switcher label:has(input:checked) {
    background: var(--color-primary);
    color: white;
  }

  .options label {
    display: flex;
    align-items: center;
    gap: var(--size-2xs);
    cursor: pointer;
  }

  .demo-container {
    padding: var(--size-m);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-m);
  }

  .demo-section {
    margin-bottom: var(--size-xl);
    padding-bottom: var(--size-l);
    border-bottom: 1px solid var(--color-border);
  }

  .demo-section:last-of-type {
    border-bottom: none;
    margin-bottom: var(--size-m);
  }

  .demo-section h2 {
    margin-bottom: var(--size-s);
  }

  .demo-section > p {
    margin-bottom: var(--size-m);
    color: var(--color-text-muted);
  }

  /* Font samples */
  .font-samples {
    display: grid;
    gap: var(--size-m);
  }

  .font-sample {
    padding: var(--size-s);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
  }

  .font-sample h3 {
    font-size: var(--font-size-s);
    margin-bottom: var(--size-xs);
    color: var(--color-text-muted);
  }

  .font-sample p {
    font-size: var(--font-size-l);
    line-height: 1.5;
  }

  /* Labeled demo */
  .labeled-demo {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    overflow: hidden;
  }

  .labeled-demo header {
    padding: var(--size-s);
    background: var(--color-background);
    border-bottom: 1px solid var(--color-border);
  }

  .labeled-demo nav {
    display: flex;
    gap: var(--size-m);
  }

  .labeled-demo main {
    display: grid;
    grid-template-columns: 1fr 200px;
    gap: var(--size-m);
    padding: var(--size-m);
  }

  @media (max-width: 600px) {
    .labeled-demo main {
      grid-template-columns: 1fr;
    }
  }

  .labeled-demo article {
    padding: var(--size-s);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
  }

  .labeled-demo aside {
    padding: var(--size-s);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
  }

  /* Image demo */
  .image-demo {
    display: flex;
    flex-wrap: wrap;
    gap: var(--size-m);
  }

  .image-demo figure {
    flex: 1;
    min-width: 150px;
    text-align: center;
  }

  .image-demo img {
    width: 100%;
    height: auto;
    border-radius: var(--radius-s);
    margin-bottom: var(--size-xs);
  }

  .image-demo figcaption {
    font-size: var(--font-size-s);
    color: var(--color-text-muted);
  }

  /* Pattern demo */
  .pattern-demo {
    display: flex;
    flex-direction: column;
    gap: var(--size-l);
  }

  .hero-pattern {
    padding: var(--size-xl);
    text-align: center;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-m);
  }

  .hero-pattern h3 {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--size-s);
  }

  .hero-pattern p {
    max-width: 60ch;
    margin: 0 auto var(--size-m);
    color: var(--color-text-muted);
  }

  .cta-buttons {
    display: flex;
    gap: var(--size-s);
    justify-content: center;
    flex-wrap: wrap;
  }

  .cta-buttons button.secondary {
    background: transparent;
    border: 1px solid currentColor;
  }

  .cards-pattern {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--size-m);
  }

  .cards-pattern .card {
    padding: var(--size-m);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    text-align: center;
  }

  .cards-pattern .card img {
    width: 100%;
    height: 80px;
    object-fit: cover;
    border-radius: var(--radius-s);
    margin-bottom: var(--size-s);
  }

  .cards-pattern .card h4 {
    margin-bottom: var(--size-2xs);
  }

  .cards-pattern .card p {
    font-size: var(--font-size-s);
    color: var(--color-text-muted);
  }

  /* Form demo */
  .form-demo {
    max-width: 400px;
    padding: var(--size-m);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
  }

  .form-row {
    margin-bottom: var(--size-s);
  }

  .form-row > label {
    display: block;
    margin-bottom: var(--size-2xs);
    font-weight: 500;
  }

  .form-row input[type="text"],
  .form-row input[type="email"],
  .form-row textarea {
    width: 100%;
    padding: var(--size-xs);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
  }

  .form-row fieldset {
    border: none;
    padding: 0;
  }

  .form-row fieldset legend {
    font-weight: 500;
    margin-bottom: var(--size-2xs);
  }

  .form-row fieldset label {
    display: inline-flex;
    align-items: center;
    gap: var(--size-2xs);
    margin-right: var(--size-m);
  }

  /* Table */
  table {
    width: 100%;
    border-collapse: collapse;
  }

  th, td {
    padding: var(--size-xs) var(--size-s);
    text-align: left;
    border: 1px solid var(--color-border);
  }

  th {
    background: var(--color-background);
    font-weight: 600;
  }

  /* Footer demo */
  .demo-footer {
    padding: var(--size-m);
    background: var(--color-background);
    border-top: 1px solid var(--color-border);
    text-align: center;
  }

  .demo-footer nav {
    display: flex;
    gap: var(--size-m);
    justify-content: center;
    margin-bottom: var(--size-s);
  }

  .demo-footer p {
    font-size: var(--font-size-s);
    color: var(--color-text-muted);
  }

  /* Usage section */
  .usage-section {
    margin-top: var(--size-2xl);
    padding-top: var(--size-xl);
    border-top: 2px solid var(--color-border);
  }

  .usage-section h2 {
    margin-bottom: var(--size-l);
  }

  .usage-section h3 {
    margin-top: var(--size-l);
    margin-bottom: var(--size-s);
  }

  .usage-section pre {
    background: var(--color-background);
    padding: var(--size-m);
    border-radius: var(--radius-s);
    overflow-x: auto;
    font-size: var(--font-size-s);
  }
</style>

<script>
  import { wireframe } from '/src/lib/wireframe.js';

  // Fidelity switcher
  const fidelityRadios = document.querySelectorAll('input[name="fidelity"]');
  const autoLabelsCheckbox = document.getElementById('auto-labels');

  fidelityRadios.forEach((radio) => {
    radio.addEventListener('change', (e) => {
      const target = e.target;
      wireframe.setFidelity(target.value);

      // Re-apply labels if auto-labels is checked
      if (autoLabelsCheckbox?.checked && target.value) {
        wireframe.labelElements();
      }
    });
  });

  // Auto-labels toggle
  if (autoLabelsCheckbox) {
    autoLabelsCheckbox.addEventListener('change', () => {
      if (autoLabelsCheckbox.checked && wireframe.isActive()) {
        wireframe.labelElements();
      }
    });
  }

  // Apply labels on load if wireframe mode is already active
  if (wireframe.isActive()) {
    wireframe.labelElements();
  }
</script>
