---
/**
 * Retro Themes Experiment
 *
 * Showcases NES and Win9x extreme themes with interactive demos.
 */

import LabLayout from '../../../layouts/LabLayout.astro';
---

<LabLayout
  title="Retro Themes"
  description="NES.css and Windows 95/98 inspired extreme themes"
>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" />

  <div class="retro-demo">
    <header class="demo-header">
      <h1>Retro Extreme Themes</h1>
      <p>Authentic NES.css and Windows 95/98 inspired themes</p>

      <div class="theme-switcher">
        <label>
          <input type="radio" name="theme" value="nes" checked />
          NES Theme
        </label>
        <label>
          <input type="radio" name="theme" value="win9x" />
          Win9x Theme
        </label>
        <label>
          <input type="radio" name="theme" value="" />
          Default
        </label>
      </div>
    </header>

    <div class="demo-container" data-theme="nes">
      <section class="demo-section">
        <h2>Buttons</h2>
        <div class="button-grid">
          <button type="button">Default</button>
          <button type="button" class="primary">Primary</button>
          <button type="button" class="success">Success</button>
          <button type="button" class="warning">Warning</button>
          <button type="button" class="error">Error</button>
          <button type="button" disabled>Disabled</button>
        </div>
      </section>

      <section class="demo-section">
        <h2>Details / Accordion</h2>
        <details>
          <summary>Click to expand this section</summary>
          <p>This is the hidden content that appears when you click the summary. The accordion uses native HTML details/summary elements styled to match the retro theme.</p>
        </details>
        <details>
          <summary>Another collapsible section</summary>
          <p>Each theme has its own take on the expand/collapse indicator. NES uses a triangle, Win9x uses plus/minus signs.</p>
        </details>
        <details open>
          <summary>This one starts open</summary>
          <p>You can have sections open by default using the open attribute.</p>
        </details>
      </section>

      <section class="demo-section">
        <h2>Dialog / Modal Window</h2>
        <button type="button" id="open-dialog">Open Dialog</button>

        <dialog id="demo-dialog">
          <header>
            <span class="win9x-title">Sample Dialog</span>
            <div class="win9x-buttons">
              <button type="button" class="win9x-btn close-dialog" aria-label="Close">X</button>
            </div>
          </header>
          <div class="dialog-body">
            <p>This is a modal dialog styled like a classic window. It features a title bar with close button and content area.</p>
          </div>
          <footer class="dialog-footer">
            <button type="button" class="primary close-dialog">OK</button>
            <button type="button" class="close-dialog">Cancel</button>
          </footer>
        </dialog>
      </section>

      <section class="demo-section">
        <h2>Menus</h2>
        <nav class="menu-bar">
          <details>
            <summary>File</summary>
            <menu>
              <li><button type="button">New</button></li>
              <li><button type="button">Open</button></li>
              <li><button type="button">Save</button></li>
              <li><hr /></li>
              <li><button type="button">Exit</button></li>
            </menu>
          </details>
          <details>
            <summary>Edit</summary>
            <menu>
              <li><button type="button">Undo</button></li>
              <li><button type="button">Redo</button></li>
              <li><hr /></li>
              <li><button type="button">Cut</button></li>
              <li><button type="button">Copy</button></li>
              <li><button type="button">Paste</button></li>
            </menu>
          </details>
          <details>
            <summary>Help</summary>
            <menu>
              <li><button type="button">Documentation</button></li>
              <li><button type="button">About</button></li>
            </menu>
          </details>
        </nav>
      </section>

      <section class="demo-section">
        <h2>Form Inputs</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="text-input">Text Input</label>
            <input type="text" id="text-input" placeholder="Enter text..." />
          </div>
          <div class="form-group">
            <label for="email-input">Email</label>
            <input type="email" id="email-input" placeholder="email@example.com" />
          </div>
          <div class="form-group">
            <label for="password-input">Password</label>
            <input type="password" id="password-input" placeholder="********" />
          </div>
          <div class="form-group">
            <label for="select-input">Select</label>
            <select id="select-input">
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </select>
          </div>
          <div class="form-group">
            <label for="textarea-input">Textarea</label>
            <textarea id="textarea-input" rows="3" placeholder="Enter longer text..."></textarea>
          </div>
          <div class="form-group">
            <label for="disabled-input">Disabled</label>
            <input type="text" id="disabled-input" value="Disabled input" disabled />
          </div>
        </div>

        <fieldset>
          <legend>Checkboxes</legend>
          <label class="checkbox-label">
            <input type="checkbox" checked />
            Option A (checked)
          </label>
          <label class="checkbox-label">
            <input type="checkbox" />
            Option B
          </label>
          <label class="checkbox-label">
            <input type="checkbox" />
            Option C
          </label>
        </fieldset>

        <fieldset>
          <legend>Radio Buttons</legend>
          <label class="radio-label">
            <input type="radio" name="radio-group" checked />
            Choice 1 (selected)
          </label>
          <label class="radio-label">
            <input type="radio" name="radio-group" />
            Choice 2
          </label>
          <label class="radio-label">
            <input type="radio" name="radio-group" />
            Choice 3
          </label>
        </fieldset>
      </section>

      <section class="demo-section">
        <h2>Progress Bars</h2>
        <div class="progress-demos">
          <div>
            <label>25% Complete</label>
            <progress value="25" max="100"></progress>
          </div>
          <div>
            <label>50% Complete</label>
            <progress value="50" max="100"></progress>
          </div>
          <div>
            <label>75% Complete</label>
            <progress value="75" max="100"></progress>
          </div>
          <div>
            <label>100% Complete</label>
            <progress value="100" max="100"></progress>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>Range Slider</h2>
        <div class="range-demo">
          <label for="range-input">Volume: <span id="range-value">50</span></label>
          <input type="range" id="range-input" min="0" max="100" value="50" />
        </div>
      </section>

      <section class="demo-section">
        <h2>Tabs</h2>
        <div class="tabs-demo">
          <div class="tabs win9x-tabs">
            <button type="button" class="tab win9x-tab active" data-tab="tab1">General</button>
            <button type="button" class="tab win9x-tab" data-tab="tab2">Advanced</button>
            <button type="button" class="tab win9x-tab" data-tab="tab3">About</button>
          </div>
          <div class="tab-panel win9x-panel" id="tab1">
            <p>General settings and options would appear here. This is the default active tab.</p>
          </div>
          <div class="tab-panel win9x-panel" id="tab2" hidden>
            <p>Advanced configuration options for power users.</p>
          </div>
          <div class="tab-panel win9x-panel" id="tab3" hidden>
            <p>Version 1.0 - A tribute to classic computing interfaces.</p>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>Cards / Windows</h2>
        <div class="card-grid">
          <div class="win9x-window">
            <header class="win9x-titlebar">
              <span class="win9x-title">My Computer</span>
              <div class="win9x-buttons">
                <button type="button" class="win9x-btn">_</button>
                <button type="button" class="win9x-btn">[]</button>
                <button type="button" class="win9x-btn">X</button>
              </div>
            </header>
            <div class="win9x-body">
              <div class="win9x-content">
                <p>This is a window-style card component. It mimics the classic Windows chrome with title bar and system buttons.</p>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Simple Card</h3>
            <p>A basic card component that takes on the theme styling with appropriate borders and shadows.</p>
          </div>
        </div>
      </section>

      <section class="demo-section">
        <h2>Typography</h2>
        <h1>Heading 1</h1>
        <h2>Heading 2</h2>
        <h3>Heading 3</h3>
        <h4>Heading 4</h4>
        <p>Regular paragraph text. The NES theme uses Press Start 2P font at 10px, while Win9x uses Tahoma at 11px for authentic sizing.</p>
        <p><a href="#">This is a link</a> styled for the current theme.</p>
        <hr />
        <blockquote>This is a blockquote. It has special styling in each theme to match the retro aesthetic.</blockquote>
        <pre><code>// Code block example
function helloRetro() &#123;
  console.log("Welcome to the past!");
&#125;</code></pre>
      </section>

      <section class="demo-section">
        <h2>Table</h2>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Size</th>
              <th>Modified</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>readme.txt</td>
              <td>Text Document</td>
              <td>4 KB</td>
              <td>01/15/1999</td>
            </tr>
            <tr>
              <td>game.exe</td>
              <td>Application</td>
              <td>1.2 MB</td>
              <td>03/22/1998</td>
            </tr>
            <tr>
              <td>config.ini</td>
              <td>Configuration</td>
              <td>1 KB</td>
              <td>12/01/1997</td>
            </tr>
          </tbody>
        </table>
      </section>

      <div class="win9x-statusbar">
        <div class="win9x-status-section">Ready</div>
        <div class="win9x-status-section" style="flex: none; width: 100px;">Items: 3</div>
        <div class="win9x-status-section" style="flex: none; width: 80px;">12:34 PM</div>
      </div>
    </div>
  </div>
</LabLayout>

<style>
  .retro-demo {
    max-width: 900px;
    margin: 0 auto;
    padding: var(--size-m);
  }

  .demo-header {
    text-align: center;
    margin-bottom: var(--size-xl);
  }

  .demo-header h1 {
    margin-bottom: var(--size-s);
  }

  .demo-header p {
    color: var(--color-text-muted);
    margin-bottom: var(--size-m);
  }

  .theme-switcher {
    display: flex;
    gap: var(--size-m);
    justify-content: center;
    flex-wrap: wrap;
  }

  .theme-switcher label {
    display: flex;
    align-items: center;
    gap: var(--size-xs);
    cursor: pointer;
    padding: var(--size-xs) var(--size-s);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    background: var(--color-surface);
  }

  .theme-switcher label:has(input:checked) {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
  }

  .theme-switcher input {
    display: none;
  }

  .demo-container {
    padding: var(--size-m);
    background: var(--color-background);
    min-height: 80vh;
  }

  .demo-section {
    margin-bottom: var(--size-xl);
    padding: var(--size-m);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
  }

  .demo-section h2 {
    margin-bottom: var(--size-m);
  }

  .button-grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--size-s);
  }

  .form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--size-m);
    margin-bottom: var(--size-m);
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--size-2xs);
  }

  .form-group label {
    font-size: var(--text-body);
    font-weight: 600;
  }

  fieldset {
    margin-bottom: var(--size-m);
  }

  .checkbox-label,
  .radio-label {
    display: flex;
    align-items: center;
    gap: var(--size-xs);
    margin-bottom: var(--size-xs);
    cursor: pointer;
  }

  .progress-demos {
    display: flex;
    flex-direction: column;
    gap: var(--size-m);
  }

  .progress-demos > div {
    display: flex;
    flex-direction: column;
    gap: var(--size-2xs);
  }

  .progress-demos label {
    font-size: var(--text-body);
  }

  .progress-demos progress {
    width: 100%;
  }

  .range-demo {
    display: flex;
    flex-direction: column;
    gap: var(--size-xs);
  }

  .range-demo input {
    width: 100%;
    max-width: 300px;
  }

  .tabs-demo {
    position: relative;
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--size-m);
  }

  .menu-bar {
    position: relative;
    margin-bottom: var(--size-m);
  }

  .menu-bar details {
    position: relative;
  }

  .menu-bar menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 100;
  }

  .win9x-statusbar {
    margin-top: var(--size-m);
  }
</style>

<script>
  // Theme switcher
  var demoContainer = document.querySelector('.demo-container');
  var themeRadios = document.querySelectorAll('input[name="theme"]');

  themeRadios.forEach(function(radio) {
    radio.addEventListener('change', function(e) {
      var target = e.target;
      if (demoContainer && target) {
        demoContainer.setAttribute('data-theme', target.value);
      }
    });
  });

  // Dialog controls
  var dialog = document.getElementById('demo-dialog');
  var openBtn = document.getElementById('open-dialog');
  var closeBtns = document.querySelectorAll('.close-dialog');

  if (openBtn && dialog) {
    openBtn.addEventListener('click', function() {
      dialog.showModal();
    });
  }

  closeBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      if (dialog) dialog.close();
    });
  });

  // Tab controls
  var tabs = document.querySelectorAll('.tab');
  var panels = document.querySelectorAll('.tab-panel');

  tabs.forEach(function(tab) {
    tab.addEventListener('click', function() {
      var tabId = tab.dataset.tab;

      tabs.forEach(function(t) {
        t.classList.remove('active');
      });
      tab.classList.add('active');

      panels.forEach(function(panel) {
        if (panel.id === tabId) {
          panel.removeAttribute('hidden');
        } else {
          panel.setAttribute('hidden', '');
        }
      });
    });
  });

  // Range slider value display
  var rangeInput = document.getElementById('range-input');
  var rangeValue = document.getElementById('range-value');

  if (rangeInput && rangeValue) {
    rangeInput.addEventListener('input', function() {
      rangeValue.textContent = rangeInput.value;
    });
  }

  // Close menu on click outside
  document.addEventListener('click', function(e) {
    var target = e.target;
    if (target && !target.closest('.menu-bar details')) {
      var openDetails = document.querySelectorAll('.menu-bar details[open]');
      openDetails.forEach(function(d) {
        d.removeAttribute('open');
      });
    }
  });

  // Close menu after item click
  var menuButtons = document.querySelectorAll('.menu-bar menu button');
  menuButtons.forEach(function(btn) {
    btn.addEventListener('click', function() {
      var details = btn.closest('details');
      if (details) details.removeAttribute('open');
    });
  });
</script>
