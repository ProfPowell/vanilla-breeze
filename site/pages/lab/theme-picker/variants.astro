---
/**
 * Theme Picker Variants
 *
 * Four different UI patterns for theme selection.
 */

import LabLayout from '../../../layouts/LabLayout.astro';
---

<LabLayout
  title="Picker Variants"
  description="Four different UI patterns for theme selection, each optimized for different contexts."
>
  <layout-center>
    <layout-stack>
      <nav class="breadcrumb">
        <a href="/lab/">Lab</a>
        <span>/</span>
        <a href="/lab/theme-picker/">Theme Picker</a>
        <span>/</span>
        <span>Variants</span>
      </nav>

      <header>
        <h1>Theme Picker Variants</h1>
        <p class="intro">
          Four different UI patterns for theme selection, each optimized for
          different contexts and use cases.
        </p>
      </header>

      <section class="demo-section">
        <h2>1. Icon Grid</h2>
        <p>Compact swatch grid for headers and toolbars. Minimal space, quick selection.</p>
        <div class="icon-grid-demo">
          <button class="swatch active" style="--swatch-bg: #3b82f6; --swatch-fg: white;" data-theme="default" aria-pressed="true">
            <span class="sr-only">Default theme</span>
          </button>
          <button class="swatch" style="--swatch-bg: #ff3e00; --swatch-fg: white;" data-theme="swiss">
            <span class="sr-only">Swiss theme</span>
          </button>
          <button class="swatch" style="--swatch-bg: #2d5016; --swatch-fg: white;" data-theme="organic">
            <span class="sr-only">Organic theme</span>
          </button>
          <button class="swatch" style="--swatch-bg: #1a1a1a; --swatch-fg: #f5f5f5;" data-theme="brutalist">
            <span class="sr-only">Brutalist theme</span>
          </button>
          <button class="swatch" style="--swatch-bg: #0a0a1a; --swatch-fg: #00ff88;" data-theme="cyber">
            <span class="sr-only">Cyber theme</span>
          </button>
        </div>
      </section>

      <section class="demo-section">
        <h2>2. Rich Preview Cards</h2>
        <p>Full cards with color palette preview. Best for settings pages.</p>
        <div class="preview-cards">
          <button class="preview-card active" data-theme="default">
            <div class="preview-palette">
              <span style="background: #3b82f6;"></span>
              <span style="background: #1e40af;"></span>
              <span style="background: #f8fafc;"></span>
              <span style="background: #1e293b;"></span>
            </div>
            <span class="preview-name">Default</span>
          </button>
          <button class="preview-card" data-theme="swiss">
            <div class="preview-palette">
              <span style="background: #ff3e00;"></span>
              <span style="background: #1a1a1a;"></span>
              <span style="background: #ffffff;"></span>
              <span style="background: #333333;"></span>
            </div>
            <span class="preview-name">Swiss</span>
          </button>
          <button class="preview-card" data-theme="organic">
            <div class="preview-palette">
              <span style="background: #2d5016;"></span>
              <span style="background: #8b4513;"></span>
              <span style="background: #faf5e6;"></span>
              <span style="background: #2c2c2c;"></span>
            </div>
            <span class="preview-name">Organic</span>
          </button>
          <button class="preview-card" data-theme="brutalist">
            <div class="preview-palette">
              <span style="background: #1a1a1a;"></span>
              <span style="background: #444444;"></span>
              <span style="background: #f5f5f5;"></span>
              <span style="background: #000000;"></span>
            </div>
            <span class="preview-name">Brutalist</span>
          </button>
          <button class="preview-card" data-theme="cyber">
            <div class="preview-palette">
              <span style="background: #00ff88;"></span>
              <span style="background: #ff0080;"></span>
              <span style="background: #0a0a1a;"></span>
              <span style="background: #e0e0e0;"></span>
            </div>
            <span class="preview-name">Cyber</span>
          </button>
        </div>
      </section>

      <section class="demo-section">
        <h2>3. Dropdown Select</h2>
        <p>Grouped select element for many themes. Space-efficient, familiar UI.</p>
        <div class="dropdown-demo">
          <label for="theme-select">Select Theme:</label>
          <select id="theme-select">
            <optgroup label="Core Themes">
              <option value="default" selected>Default</option>
              <option value="swiss">Swiss</option>
              <option value="organic">Organic</option>
            </optgroup>
            <optgroup label="Dark Themes">
              <option value="brutalist">Brutalist</option>
              <option value="cyber">Cyber</option>
            </optgroup>
          </select>
        </div>
      </section>

      <section class="demo-section">
        <h2>4. Inline Toggle</h2>
        <p>Radio button group for quick toggling between a few themes.</p>
        <div class="toggle-demo">
          <fieldset>
            <legend class="sr-only">Select theme</legend>
            <label class="toggle-option">
              <input type="radio" name="theme-toggle" value="default" checked />
              <span>Default</span>
            </label>
            <label class="toggle-option">
              <input type="radio" name="theme-toggle" value="swiss" />
              <span>Swiss</span>
            </label>
            <label class="toggle-option">
              <input type="radio" name="theme-toggle" value="organic" />
              <span>Organic</span>
            </label>
            <label class="toggle-option">
              <input type="radio" name="theme-toggle" value="brutalist" />
              <span>Brutalist</span>
            </label>
            <label class="toggle-option">
              <input type="radio" name="theme-toggle" value="cyber" />
              <span>Cyber</span>
            </label>
          </fieldset>
        </div>
      </section>
    </layout-stack>
  </layout-center>
</LabLayout>

<style>
  nav.breadcrumb {
    display: flex;
    gap: var(--size-xs);
    font-size: var(--size-s);
    color: var(--color-text-muted);
    margin-block-end: var(--size-l);
  }

  nav.breadcrumb a {
    color: var(--color-primary);
    text-decoration: none;
  }

  header {
    margin-block-end: var(--size-xl);
  }

  h1 {
    font-size: var(--size-2xl);
    margin-block-end: var(--size-s);
  }

  .intro {
    font-size: var(--size-m);
    color: var(--color-text-muted);
    max-width: 60ch;
  }

  .demo-section {
    margin-block-end: var(--size-2xl);
    padding: var(--size-l);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-m);
  }

  .demo-section h2 {
    margin: 0 0 var(--size-xs) 0;
  }

  .demo-section > p {
    color: var(--color-text-muted);
    margin: 0 0 var(--size-l) 0;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }

  /* Icon Grid */
  .icon-grid-demo {
    display: flex;
    gap: var(--size-xs);
  }

  .swatch {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-m);
    background: var(--swatch-bg);
    border: 2px solid transparent;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .swatch:hover {
    transform: scale(1.1);
  }

  .swatch.active {
    border-color: var(--color-text);
    box-shadow: 0 0 0 2px var(--color-surface), 0 0 0 4px var(--swatch-bg);
  }

  /* Preview Cards */
  .preview-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--size-m);
  }

  .preview-card {
    padding: var(--size-m);
    background: var(--color-surface-alt);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-m);
    cursor: pointer;
    text-align: center;
    transition: border-color 0.15s ease;
  }

  .preview-card:hover {
    border-color: var(--color-text-muted);
  }

  .preview-card.active {
    border-color: var(--color-primary);
  }

  .preview-palette {
    display: flex;
    gap: 2px;
    margin-block-end: var(--size-s);
    border-radius: var(--radius-s);
    overflow: hidden;
  }

  .preview-palette span {
    flex: 1;
    height: 24px;
  }

  .preview-name {
    font-size: var(--size-s);
    font-weight: 500;
  }

  /* Dropdown */
  .dropdown-demo {
    display: flex;
    align-items: center;
    gap: var(--size-m);
  }

  .dropdown-demo label {
    font-weight: 500;
  }

  .dropdown-demo select {
    padding: var(--size-s) var(--size-m);
    font-size: var(--size-m);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    background: var(--color-surface);
    color: var(--color-text);
  }

  /* Toggle */
  .toggle-demo fieldset {
    border: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: var(--size-xs);
  }

  .toggle-option {
    display: flex;
    cursor: pointer;
  }

  .toggle-option input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }

  .toggle-option span {
    padding: var(--size-s) var(--size-m);
    background: var(--color-surface-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-s);
    font-size: var(--size-s);
    transition: background 0.15s ease, border-color 0.15s ease;
  }

  .toggle-option:hover span {
    background: var(--color-surface);
  }

  .toggle-option input:checked + span {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
  }

  .toggle-option input:focus + span {
    box-shadow: 0 0 0 2px var(--color-primary-subtle);
  }
</style>

<script>
  // Theme switching functionality
  function setTheme(theme: string) {
    if (theme && theme !== 'default') {
      document.body.dataset.theme = theme;
    } else {
      delete document.body.dataset.theme;
    }

    // Update active states
    document.querySelectorAll('[data-theme]').forEach(el => {
      el.classList.toggle('active', el.getAttribute('data-theme') === theme);
      if (el.hasAttribute('aria-pressed')) {
        el.setAttribute('aria-pressed', String(el.getAttribute('data-theme') === theme));
      }
    });
  }

  // Swatch buttons
  document.querySelectorAll('.swatch, .preview-card').forEach(btn => {
    btn.addEventListener('click', () => {
      const theme = btn.getAttribute('data-theme') || 'default';
      setTheme(theme);
    });
  });

  // Dropdown
  document.getElementById('theme-select')?.addEventListener('change', (e) => {
    setTheme((e.target as HTMLSelectElement).value);
  });

  // Radio toggles
  document.querySelectorAll('input[name="theme-toggle"]').forEach(input => {
    input.addEventListener('change', (e) => {
      setTheme((e.target as HTMLInputElement).value);
    });
  });
</script>
