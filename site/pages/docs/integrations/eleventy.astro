---
/**
 * Eleventy Integration Page
 *
 * Documentation for using Vanilla Breeze with Eleventy (11ty).
 */
import DocsLayout from '../../../layouts/DocsLayout.astro';

// Code examples as template strings to avoid Astro parsing issues
const copyFiles = `# Copy templates and data
cp -r integrations/eleventy/_includes src/
cp -r integrations/eleventy/_layouts src/
cp -r integrations/eleventy/_data src/

# Copy starter config (or merge with existing)
cp integrations/eleventy/.eleventy.js ./`;

const directoryStructure = `eleventy/
├── _includes/          # Nunjucks partials
│   ├── base.njk        # Base HTML template
│   ├── nav-tree.njk    # Tree navigation
│   ├── nav-main.njk    # Main header nav
│   ├── page-toc.njk    # Table of contents
│   ├── code-block.njk  # Code highlighting
│   ├── browser-window.njk
│   └── theme-toggle.njk
├── _data/              # Global data files
│   ├── site.json       # Site metadata
│   └── navigation.json # Navigation structure
├── _layouts/           # Page layouts
│   ├── page.njk        # Basic page
│   ├── docs.njk        # Documentation page
│   └── blog.njk        # Blog post
├── assets/
│   └── vb-eleventy.css # 11ty-specific styles
└── .eleventy.js        # Starter config`;

const siteJson = `{
  "title": "Site Name",
  "description": "Site description",
  "url": "https://example.com",
  "lang": "en",
  "author": {
    "name": "Your Name",
    "email": "hello@example.com"
  }
}`;

const navigationJson = `{
  "main": [
    { "label": "Home", "href": "/" },
    { "label": "Docs", "href": "/docs/" }
  ],
  "items": [
    { "label": "Getting Started", "href": "/docs/start/" },
    {
      "label": "Components",
      "children": [
        { "label": "Button", "href": "/docs/button/" }
      ]
    }
  ]
}`;

const extendingBase = `{% extends "base.njk" %}

{% block content %}
  <h1>{{ title }}</h1>
  {{ content | safe }}
{% endblock %}`;

const navTreeUsage = `{% include "nav-tree.njk" %}

{# Or with custom data #}
{% set navItems = customNavigation %}
{% include "nav-tree.njk" %}`;

const pageTocUsage = `{% include "page-toc.njk" %}`;

const themeToggleUsage = `{% include "theme-toggle.njk" %}`;

const pageLayout = `---
layout: page.njk
title: About Us
description: Learn about our company
---

Content goes here...`;

const docsLayout = `---
layout: docs.njk
title: Getting Started
description: Learn the basics
---

## Introduction
...`;

const blogLayout = `---
layout: blog.njk
title: Post Title
description: Post excerpt
date: 2024-01-15
author: John Doe
tags:
  - css
  - web
---

Post content...`;

const codeBlockShortcode = `{% codeBlock "javascript", "example.js" %}
const greeting = "Hello";
console.log(greeting);
{% endcodeBlock %}`;

const browserWindowShortcode = `{% browserWindow "/demos/example.html", "https://example.com", "Demo" %}`;

const iconShortcode = `{% icon "search", "sm" %}`;

const collectionsUsage = `{# List all posts #}
{% for post in collections.posts %}
  <article>
    <h2><a href="{{ post.url }}">{{ post.data.title }}</a></h2>
    <time>{{ post.date | dateFormat }}</time>
  </article>
{% endfor %}

{# List all tags #}
{% for tag in collections.tagList %}
  <a href="/blog/tags/{{ tag | slugify }}/">{{ tag }}</a>
{% endfor %}`;
---

<DocsLayout
  title="Eleventy Integration"
  description="Nunjucks templates and partials for building Eleventy sites with Vanilla Breeze."
  currentSection="integrations"
>
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="/docs/integrations/">Integrations</a> /
    <span aria-current="page">Eleventy</span>
  </nav>

  <h1>Eleventy Integration</h1>
  <p class="lead">Nunjucks templates and partials for building Eleventy sites with Vanilla Breeze.</p>

  <section>
    <h2>Overview</h2>
    <layout-text>
      <p>The Eleventy integration provides Nunjucks templates, partials, and a starter configuration for 11ty projects. All templates follow Vanilla Breeze conventions.</p>
      <p>Location: <code>/integrations/eleventy/</code></p>
    </layout-text>
  </section>

  <section>
    <h2>Installation</h2>
    <layout-text>
      <p>Copy the integration files into your Eleventy project:</p>
    </layout-text>
    <code-block language="bash" label="Copy integration files">{copyFiles}</code-block>
  </section>

  <section>
    <h2>Directory Structure</h2>
    <code-block language="text" label="File structure">{directoryStructure}</code-block>
  </section>

  <section>
    <h2>Data Files</h2>

    <h3>site.json</h3>
    <layout-text>
      <p>Site metadata available as <code>site.*</code> in templates:</p>
    </layout-text>
    <code-block language="json" label="site.json">{siteJson}</code-block>

    <h3>navigation.json</h3>
    <layout-text>
      <p>Navigation structure for menus:</p>
    </layout-text>
    <code-block language="json" label="navigation.json">{navigationJson}</code-block>
  </section>

  <section>
    <h2>Partials</h2>

    <h3>base.njk</h3>
    <layout-text>
      <p>Base HTML template with block inheritance:</p>
    </layout-text>
    <code-block language="nunjucks" label="Extending base.njk">{extendingBase}</code-block>
    <layout-text>
      <p><strong>Available blocks:</strong></p>
      <ul>
        <li><code>head</code> - Additional head content</li>
        <li><code>header</code> - Page header</li>
        <li><code>content</code> - Main content</li>
        <li><code>footer</code> - Page footer</li>
        <li><code>scripts</code> - Additional scripts</li>
      </ul>
    </layout-text>

    <h3>nav-tree.njk</h3>
    <layout-text>
      <p>Tree navigation with collapsible sections:</p>
    </layout-text>
    <code-block language="nunjucks" label="nav-tree.njk usage">{navTreeUsage}</code-block>
    <layout-text>
      <p>Automatically highlights current page and opens ancestor sections.</p>
    </layout-text>

    <h3>page-toc.njk</h3>
    <layout-text>
      <p>Table of contents (requires toc data from plugin):</p>
    </layout-text>
    <code-block language="nunjucks" label="page-toc.njk usage">{pageTocUsage}</code-block>

    <h3>theme-toggle.njk</h3>
    <layout-text>
      <p>Theme switcher button:</p>
    </layout-text>
    <code-block language="nunjucks" label="theme-toggle.njk usage">{themeToggleUsage}</code-block>
  </section>

  <section>
    <h2>Layouts</h2>

    <h3>page.njk</h3>
    <layout-text>
      <p>Basic page layout with centered content:</p>
    </layout-text>
    <code-block language="yaml" label="page.njk frontmatter">{pageLayout}</code-block>

    <h3>docs.njk</h3>
    <layout-text>
      <p>Documentation layout with sidebar and TOC:</p>
    </layout-text>
    <code-block language="yaml" label="docs.njk frontmatter">{docsLayout}</code-block>

    <h3>blog.njk</h3>
    <layout-text>
      <p>Blog post layout with metadata:</p>
    </layout-text>
    <code-block language="yaml" label="blog.njk frontmatter">{blogLayout}</code-block>
  </section>

  <section>
    <h2>Shortcodes</h2>
    <layout-text>
      <p>The starter config includes these shortcodes:</p>
    </layout-text>

    <h3>codeBlock</h3>
    <code-block language="nunjucks" label="codeBlock shortcode">{codeBlockShortcode}</code-block>

    <h3>browserWindow</h3>
    <code-block language="nunjucks" label="browserWindow shortcode">{browserWindowShortcode}</code-block>

    <h3>icon</h3>
    <code-block language="nunjucks" label="icon shortcode">{iconShortcode}</code-block>
  </section>

  <section>
    <h2>Filters</h2>
    <layout-text>
      <table>
        <thead>
          <tr>
            <th>Filter</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>dateFormat</code></td>
            <td>Format date as "January 15, 2024"</td>
            <td><code>&#123;&#123; date | dateFormat &#125;&#125;</code></td>
          </tr>
          <tr>
            <td><code>dateToISO</code></td>
            <td>Convert to ISO 8601 string</td>
            <td><code>&#123;&#123; date | dateToISO &#125;&#125;</code></td>
          </tr>
          <tr>
            <td><code>slugify</code></td>
            <td>Convert string to URL slug</td>
            <td><code>&#123;&#123; tag | slugify &#125;&#125;</code></td>
          </tr>
          <tr>
            <td><code>startsWith</code></td>
            <td>Check if string starts with prefix</td>
            <td><code>&#123;% if url | startsWith("/docs/") %&#125;</code></td>
          </tr>
        </tbody>
      </table>
    </layout-text>
  </section>

  <section>
    <h2>Collections</h2>
    <layout-text>
      <p>The starter config provides these collections:</p>
      <ul>
        <li><code>posts</code> - Blog posts sorted by date (newest first)</li>
        <li><code>tagList</code> - All unique tags from posts</li>
      </ul>
    </layout-text>
    <code-block language="nunjucks" label="Using collections">{collectionsUsage}</code-block>
  </section>

  <section>
    <h2>Styles</h2>
    <layout-text>
      <p>Import <code>vb-eleventy.css</code> for 11ty-specific styles:</p>
      <ul>
        <li>Pagination styling</li>
        <li>Tag list patterns</li>
        <li>Post list layouts</li>
        <li>Collection navigation (prev/next)</li>
        <li>Prism.js syntax highlighting</li>
        <li>Markdown content styling</li>
      </ul>
    </layout-text>
  </section>
</DocsLayout>
