---
/**
 * Audio (<audio>) Element Documentation
 *
 * The audio element embeds sound content with native playback controls
 * and variants for different layout contexts.
 */
import ElementLayout from '../../../../layouts/ElementLayout.astro';

// Code examples as template strings
const basicAudioCode = `<audio controls>
  <source src="podcast.mp3" type="audio/mpeg" />
  <source src="podcast.ogg" type="audio/ogg" />
  Your browser does not support the audio element.
</audio>`;

const compactAudioCode = `<audio class="compact" controls>...</audio>`;

const minimalAudioCode = `<audio class="minimal" controls>...</audio>`;

const preloadOptionsCode = `<!-- Don't preload - best for long content or many players -->
<audio controls preload="none">...</audio>

<!-- Preload metadata only - duration, dimensions -->
<audio controls preload="metadata">...</audio>

<!-- Preload entire file - small files, likely to play -->
<audio controls preload="auto">...</audio>`;

const formatFallbackCode = `<audio controls>
  <!-- Best quality, modern browsers -->
  <source src="audio.opus" type="audio/opus" />

  <!-- Good quality, open format -->
  <source src="audio.ogg" type="audio/ogg" />

  <!-- Universal fallback -->
  <source src="audio.mp3" type="audio/mpeg" />

  <p>Your browser doesn't support audio. <a href="audio.mp3">Download</a></p>
</audio>`;

const fallbackContentCode = `<audio controls>
  <source src="podcast.mp3" type="audio/mpeg" />
  <p>
    Your browser doesn't support HTML audio.
    <a href="podcast.mp3">Download the episode</a> (45 MB).
  </p>
</audio>`;

const transcriptCode = `<figure>
  <audio controls>
    <source src="interview.mp3" type="audio/mpeg" />
  </audio>
  <figcaption>
    Interview with Dr. Smith about climate change.
    <a href="transcript.html">Read the transcript</a>
  </figcaption>
</figure>`;

const captionsTrackCode = `<audio controls>
  <source src="podcast.mp3" type="audio/mpeg" />
  <track kind="captions" src="captions.vtt" srclang="en" label="English" />
</audio>`;
---

<ElementLayout
  title="audio"
  description="The audio element embeds sound content with native playback controls and variants for different layout contexts."
  elementName="audio"
  category="native"
  nativeGroup="Media"
  currentPath="/docs/elements/native/audio/"
>
  <section>
    <h2>Description</h2>
    <p>The <code>&lt;audio&gt;</code> element embeds audio content with native browser playback controls. Vanilla Breeze styles audio players to be block-level and full-width by default, with variants for compact and minimal layouts.</p>

    <p>Like video, audio supports multiple <code>&lt;source&gt;</code> elements for format fallbacks and <code>&lt;track&gt;</code> elements for synchronized text content.</p>
  </section>

  <section>
    <h2>When to Use</h2>
    <ul>
      <li><strong>Podcasts</strong> - Episode players with playback controls</li>
      <li><strong>Music players</strong> - Song or album playback</li>
      <li><strong>Sound effects</strong> - UI feedback or game audio</li>
      <li><strong>Voice recordings</strong> - Interviews, voicemail, audio messages</li>
      <li><strong>Audiobooks</strong> - Narrated content</li>
    </ul>

    <h3>When to Use Video Instead</h3>
    <ul>
      <li>Audio content with accompanying visuals</li>
      <li>Content where a static image adds context (use video with poster)</li>
      <li>Streaming services that provide video embeds</li>
    </ul>
  </section>

  <section>
    <h2>Variants</h2>

    <h3>Default</h3>
    <p>Full-width audio player with native controls.</p>
    <div class="example">
      <audio controls>
        <source src="#" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </div>
    <code-block language="html" label="Basic audio element with multiple sources">{basicAudioCode}</code-block>

    <h3>.compact</h3>
    <p>Reduced max-width for inline usage or sidebars.</p>
    <div class="example">
      <audio class="compact" controls>
        <source src="#" type="audio/mpeg" />
      </audio>
    </div>
    <code-block language="html" label="Compact audio player">{compactAudioCode}</code-block>

    <h3>.minimal</h3>
    <p>Reduced height for tight layouts.</p>
    <div class="example">
      <audio class="minimal" controls>
        <source src="#" type="audio/mpeg" />
      </audio>
    </div>
    <code-block language="html" label="Minimal audio player">{minimalAudioCode}</code-block>

    <h3>Compact + Minimal</h3>
    <p>Combine variants for the most compact player.</p>
    <div class="example">
      <audio class="compact minimal" controls>
        <source src="#" type="audio/mpeg" />
      </audio>
    </div>
  </section>

  <section>
    <h2>Audio Attributes</h2>

    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>controls</code></td>
          <td>Show native playback controls (required for user interaction)</td>
        </tr>
        <tr>
          <td><code>autoplay</code></td>
          <td>Start playing automatically (discouraged - poor UX)</td>
        </tr>
        <tr>
          <td><code>muted</code></td>
          <td>Start with audio muted</td>
        </tr>
        <tr>
          <td><code>loop</code></td>
          <td>Restart audio when it ends</td>
        </tr>
        <tr>
          <td><code>preload</code></td>
          <td><code>none</code>, <code>metadata</code>, or <code>auto</code></td>
        </tr>
      </tbody>
    </table>

    <h3>Preload Options</h3>
    <code-block language="html" label="Audio preload attribute options">{preloadOptionsCode}</code-block>
  </section>

  <section>
    <h2>Audio Formats</h2>
    <p>Provide multiple sources for maximum browser compatibility.</p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Format</th>
          <th>MIME Type</th>
          <th>Support</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>MP3</td>
          <td><code>audio/mpeg</code></td>
          <td>Universal - best for compatibility</td>
        </tr>
        <tr>
          <td>AAC</td>
          <td><code>audio/aac</code></td>
          <td>Good quality, wide support</td>
        </tr>
        <tr>
          <td>Ogg Vorbis</td>
          <td><code>audio/ogg</code></td>
          <td>Open format, Firefox/Chrome</td>
        </tr>
        <tr>
          <td>Opus</td>
          <td><code>audio/opus</code></td>
          <td>Best quality/size ratio, modern browsers</td>
        </tr>
        <tr>
          <td>WAV</td>
          <td><code>audio/wav</code></td>
          <td>Uncompressed, large files</td>
        </tr>
        <tr>
          <td>FLAC</td>
          <td><code>audio/flac</code></td>
          <td>Lossless, growing support</td>
        </tr>
      </tbody>
    </table>

    <code-block language="html" label="Audio with format fallbacks">{formatFallbackCode}</code-block>
  </section>

  <section>
    <h2>Live Examples</h2>

    <h3>Podcast Player</h3>
    <div class="example">
      <layout-stack data-layout-gap="s">
        <strong>Episode 42: Web Audio Fundamentals</strong>
        <audio controls preload="metadata">
          <source src="#" type="audio/mpeg" />
        </audio>
        <small>Duration: 45:32 | Published: January 8, 2026</small>
      </layout-stack>
    </div>

    <h3>Inline Audio</h3>
    <div class="example">
      <p>Listen to the pronunciation: <audio class="compact minimal" controls style="vertical-align: middle; display: inline-block;"><source src="#" type="audio/mpeg" /></audio></p>
    </div>

    <h3>Audio in Figure</h3>
    <div class="example">
      <figure>
        <audio controls>
          <source src="#" type="audio/mpeg" />
        </audio>
        <figcaption>Interview with Jane Doe - Recorded December 2025</figcaption>
      </figure>
    </div>
  </section>

  <section>
    <h2>Fallback Content</h2>
    <p>Provide fallback for browsers that don't support audio.</p>

    <code-block language="html" label="Audio with fallback download link">{fallbackContentCode}</code-block>
  </section>

  <section>
    <h2>Accessibility</h2>

    <h3>Transcripts</h3>
    <p>Provide text transcripts for audio content so deaf users and those who can't play audio can access the information.</p>

    <code-block language="html" label="Audio with transcript link for accessibility">{transcriptCode}</code-block>

    <h3>Synchronized Text</h3>
    <p>Use <a href="/docs/elements/native/track/"><code>&lt;track&gt;</code></a> for synchronized captions (though browser support varies for audio).</p>

    <code-block language="html" label="Audio with captions track">{captionsTrackCode}</code-block>

    <h3>Best Practices</h3>
    <ul>
      <li>Always provide a text transcript for important audio</li>
      <li>Never autoplay audio - it's disruptive and inaccessible</li>
      <li>Ensure controls are visible and keyboard accessible</li>
      <li>Provide context about what the audio contains</li>
      <li>Include duration information when available</li>
    </ul>
  </section>

  <section>
    <h2>Related Elements</h2>
    <ul>
      <li><a href="/docs/elements/native/video/"><code>&lt;video&gt;</code></a> - Video content with similar API</li>
      <li><a href="/docs/elements/native/source/"><code>&lt;source&gt;</code></a> - Define multiple audio sources for format fallback</li>
      <li><a href="/docs/elements/native/track/"><code>&lt;track&gt;</code></a> - Synchronized text tracks (captions, descriptions)</li>
      <li><a href="/docs/elements/native/figure/"><code>&lt;figure&gt;</code></a> - Wrap audio with caption information</li>
    </ul>
  </section>

  <section>
    <h2>CSS Reference</h2>
    <p>Styles defined in <code>/src/native-elements/video/styles.css</code></p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Selector</th>
          <th>Properties</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>audio</code></td>
          <td><code>display: block; inline-size: 100%; max-inline-size: 100%;</code></td>
        </tr>
        <tr>
          <td><code>audio.minimal</code></td>
          <td><code>block-size: 2.5rem;</code></td>
        </tr>
        <tr>
          <td><code>audio.compact</code></td>
          <td><code>max-inline-size: 300px;</code></td>
        </tr>
      </tbody>
    </table>
  </section>
</ElementLayout>
