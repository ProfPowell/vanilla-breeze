---
/**
 * Table Caption (<caption>) Element Documentation
 *
 * The caption element provides a title or description for a table. It is essential
 * for accessibility, helping users understand the purpose and content of the table.
 */
import ElementLayout from '../../../../layouts/ElementLayout.astro';

// Code examples as template strings
const basicCaptionCode = `<table>
  <caption>Employee Directory - January 2024</caption>
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Department</th>
      <th scope="col">Email</th>
    </tr>
  </thead>
  <tbody>
    <!-- Table data -->
  </tbody>
</table>`;

const ariaLabelledbyCode = `<h3 id="sales-heading">Monthly Sales Data</h3>
<table aria-labelledby="sales-heading">
  <!-- Table content without caption -->
</table>`;
---

<ElementLayout
  title="caption"
  description="The caption element provides a title or description for a table. It is essential for accessibility, helping users understand the purpose and content of the table."
  elementName="caption"
  category="native"
  nativeGroup="Tables"
  currentPath="/docs/elements/native/caption/"
>
  <section>
    <h2>Description</h2>
    <p>The <code>&lt;caption&gt;</code> element must be the first child of a <a href="/docs/elements/native/table/"><code>&lt;table&gt;</code></a> element. It provides a programmatic association between the table and its description, which is announced by screen readers when users navigate to the table.</p>
    <p>Vanilla Breeze styles captions with muted text color and medium font weight, positioned at the top of the table with left alignment.</p>
  </section>

  <section>
    <h2>When to Use</h2>
    <ul>
      <li><strong>Every data table:</strong> All tables containing meaningful data should have a caption</li>
      <li><strong>Table identification:</strong> When multiple tables appear on a page</li>
      <li><strong>Context setting:</strong> To explain what data the table contains</li>
      <li><strong>Time-sensitive data:</strong> To indicate the date or period the data represents</li>
    </ul>

    <h3>When Not Required</h3>
    <ul>
      <li><strong>Decorative tables:</strong> Purely presentational tables (though these should be avoided)</li>
      <li><strong>Tables with adjacent headings:</strong> If a heading immediately precedes the table, use <code>aria-labelledby</code> instead</li>
    </ul>
  </section>

  <section>
    <h2>Basic Example</h2>
    <p>Place the caption as the first child of the table element.</p>

    <div class="example">
      <table>
        <caption>Employee Directory - January 2024</caption>
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Department</th>
            <th scope="col">Email</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Alice Johnson</td>
            <td>Engineering</td>
            <td>alice@example.com</td>
          </tr>
          <tr>
            <td>Bob Smith</td>
            <td>Design</td>
            <td>bob@example.com</td>
          </tr>
        </tbody>
      </table>
    </div>

    <code-block language="html" label="Table with caption element">{basicCaptionCode}</code-block>
  </section>

  <section>
    <h2>Caption Content</h2>
    <p>Captions can contain additional elements for richer descriptions.</p>

    <h3>With Description</h3>
    <div class="example">
      <table>
        <caption>
          Quarterly Sales Report
          <br />
          <small>Data from January - March 2024</small>
        </caption>
        <thead>
          <tr>
            <th scope="col">Product</th>
            <th scope="col" data-numeric>Q1 Sales</th>
            <th scope="col" data-numeric>Revenue</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Widget Pro</td>
            <td data-numeric>1,250</td>
            <td data-numeric>$62,500</td>
          </tr>
          <tr>
            <td>Gadget Plus</td>
            <td data-numeric>890</td>
            <td data-numeric>$44,500</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>With Data Source</h3>
    <div class="example">
      <table>
        <caption>
          Population by Region
          <br />
          <small>Source: Census Bureau, 2023</small>
        </caption>
        <thead>
          <tr>
            <th scope="col">Region</th>
            <th scope="col" data-numeric>Population</th>
            <th scope="col" data-numeric>Change</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Northeast</td>
            <td data-numeric>55,982,803</td>
            <td data-numeric>+0.2%</td>
          </tr>
          <tr>
            <td>Midwest</td>
            <td data-numeric>68,985,454</td>
            <td data-numeric>+0.4%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section>
    <h2>Accessibility</h2>
    <ul>
      <li><strong>Required for data tables:</strong> WCAG 2.1 Success Criterion 1.3.1 requires tables to be programmatically identifiable</li>
      <li><strong>Screen reader announcement:</strong> When a user navigates to a table, the caption is announced first, providing context</li>
      <li><strong>Be descriptive:</strong> Write captions that explain what data the table contains, not just "Table 1"</li>
      <li><strong>Include date/time context:</strong> If data is time-sensitive, include the relevant period in the caption</li>
    </ul>

    <h3>Alternative: aria-labelledby</h3>
    <p>If a heading immediately precedes the table, you can use <code>aria-labelledby</code> instead of a caption:</p>

    <div class="example">
      <h3 id="sales-heading">Monthly Sales Data</h3>
      <table aria-labelledby="sales-heading">
        <thead>
          <tr>
            <th scope="col">Month</th>
            <th scope="col" data-numeric>Sales</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>January</td>
            <td data-numeric>$10,500</td>
          </tr>
          <tr>
            <td>February</td>
            <td data-numeric>$12,300</td>
          </tr>
        </tbody>
      </table>
    </div>

    <code-block language="html" label="Table with aria-labelledby instead of caption">{ariaLabelledbyCode}</code-block>
  </section>

  <section>
    <h2>Styling</h2>
    <p>Vanilla Breeze applies the following styles to captions:</p>

    <table class="props-table">
      <thead>
        <tr>
          <th scope="col">Property</th>
          <th scope="col">Value</th>
          <th scope="col">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>padding</code></td>
          <td><code>var(--size-s) var(--size-m)</code></td>
          <td>Consistent spacing with table cells</td>
        </tr>
        <tr>
          <td><code>text-align</code></td>
          <td><code>start</code></td>
          <td>Left-aligned (RTL-aware)</td>
        </tr>
        <tr>
          <td><code>font-weight</code></td>
          <td><code>500</code></td>
          <td>Medium weight for emphasis</td>
        </tr>
        <tr>
          <td><code>color</code></td>
          <td><code>var(--color-text-muted)</code></td>
          <td>Muted to differentiate from data</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Related Elements</h2>
    <ul>
      <li><a href="/docs/elements/native/table/"><code>&lt;table&gt;</code></a> - Parent container (caption must be first child)</li>
      <li><a href="/docs/elements/native/thead/"><code>&lt;thead&gt;</code></a> - Header group that follows caption</li>
      <li><a href="/docs/elements/native/th/"><code>&lt;th&gt;</code></a> - Header cells that provide column/row context</li>
    </ul>
  </section>
</ElementLayout>
