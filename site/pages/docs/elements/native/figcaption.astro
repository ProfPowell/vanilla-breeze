---
/**
 * Figcaption Element Documentation
 *
 * The figcaption element provides a caption or legend for the content
 * of its parent figure element.
 */
import ElementLayout from '../../../../layouts/ElementLayout.astro';

// Code examples as template strings
const captionAfterCode = `<figure>
  <img src="photo.jpg" alt="..." />
  <figcaption>Caption after content</figcaption>
</figure>`;

const captionBeforeCode = `<figure>
  <figcaption>Caption before content</figcaption>
  <img src="photo.jpg" alt="..." />
</figure>`;

const centeredCaptionCode = `<figure>
  <img src="photo.jpg" alt="..." />
  <figcaption class="centered">Centered caption</figcaption>
</figure>`;

const endCaptionCode = `<figure>
  <img src="photo.jpg" alt="..." />
  <figcaption class="end">End-aligned caption</figcaption>
</figure>`;

const hiddenCaptionCode = `<figure>
  <img src="photo.jpg" alt="..." />
  <figcaption class="hidden">Screen reader only caption</figcaption>
</figure>`;

const figureNumberingCode = `<figcaption><strong>Figure 1:</strong> Description text.</figcaption>`;

const altVsFigcaptionCode = `<!-- Good: Different information in each -->
<figure>
  <img
    src="chart.png"
    alt="Bar chart showing sales increasing from $10M in Q1 to $15M in Q4" />
  <figcaption>
    Figure 2: Sales exceeded projections in all quarters.
  </figcaption>
</figure>

<!-- Bad: Duplicate information -->
<figure>
  <img
    src="chart.png"
    alt="Sales exceeded projections in all quarters" />
  <figcaption>
    Sales exceeded projections in all quarters.
  </figcaption>
</figure>`;

const visuallyHiddenExampleCode = `<figure>
  <img src="decorative-divider.svg" alt="" />
  <figcaption class="hidden">Decorative section divider</figcaption>
</figure>`;
---

<ElementLayout
  title="figcaption"
  description="The figcaption element provides a caption or legend for the content of its parent figure element."
  elementName="figcaption"
  category="native"
  nativeGroup="Text Content"
  currentPath="/docs/elements/native/figcaption/"
>
  <!-- Description Section -->
  <section>
    <h2>Description</h2>
    <p>The <code>&lt;figcaption&gt;</code> element represents a caption or legend describing the contents of its parent <code>&lt;figure&gt;</code> element. It can appear as the first or last child of the figure, and there can only be one figcaption per figure.</p>

    <p>Vanilla Breeze styles figcaption with muted text color and smaller font size, with variants for alignment and visibility.</p>
  </section>

  <!-- When to Use Section -->
  <section>
    <h2>When to Use</h2>
    <ul>
      <li><strong>Image descriptions</strong> - Explain what an image shows or why it's relevant</li>
      <li><strong>Photo credits</strong> - Attribution for photographers or image sources</li>
      <li><strong>Figure numbering</strong> - "Figure 1:", "Chart 2:", etc.</li>
      <li><strong>Code file names</strong> - Identify the source file for code examples</li>
      <li><strong>Quote attribution</strong> - Identify the source of a quotation</li>
      <li><strong>Data sources</strong> - Credit the source of chart or graph data</li>
    </ul>
  </section>

  <!-- Placement Section -->
  <section>
    <h2>Placement</h2>
    <p>Figcaption can appear at the beginning or end of a figure.</p>

    <h3>Caption After Content (Default)</h3>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/300" alt="Mountain landscape" loading="lazy" />
        <figcaption>Caption appears after the image content.</figcaption>
      </figure>
    </div>
    <code-block language="html" label="Caption after content">{captionAfterCode}</code-block>

    <h3>Caption Before Content</h3>
    <div class="example">
      <figure>
        <figcaption>Caption appears before the image content.</figcaption>
        <img src="https://picsum.photos/500/301" alt="Ocean view" loading="lazy" />
      </figure>
    </div>
    <code-block language="html" label="Caption before content">{captionBeforeCode}</code-block>
  </section>

  <!-- Variants Section -->
  <section>
    <h2>Variants</h2>

    <h3>Default (Start-aligned)</h3>
    <div class="example">
      <figure class="bordered">
        <img src="https://picsum.photos/500/280" alt="Default alignment" loading="lazy" />
        <figcaption>Default caption is start-aligned (left in LTR).</figcaption>
      </figure>
    </div>

    <h3>.centered</h3>
    <div class="example">
      <figure class="bordered">
        <img src="https://picsum.photos/500/281" alt="Centered caption" loading="lazy" />
        <figcaption class="centered">Centered caption text.</figcaption>
      </figure>
    </div>
    <code-block language="html" label="Centered caption">{centeredCaptionCode}</code-block>

    <h3>.end</h3>
    <div class="example">
      <figure class="bordered">
        <img src="https://picsum.photos/500/282" alt="End-aligned caption" loading="lazy" />
        <figcaption class="end">End-aligned caption text.</figcaption>
      </figure>
    </div>
    <code-block language="html" label="End-aligned caption">{endCaptionCode}</code-block>

    <h3>.hidden (Visually Hidden)</h3>
    <p>Provides caption for screen readers without visible display.</p>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/283" alt="Image with hidden caption" loading="lazy" />
        <figcaption class="hidden">This caption is hidden visually but accessible to screen readers.</figcaption>
      </figure>
      <p><small>The figure above has a visually hidden caption.</small></p>
    </div>
    <code-block language="html" label="Visually hidden caption">{hiddenCaptionCode}</code-block>
  </section>

  <!-- Caption Content Section -->
  <section>
    <h2>Caption Content</h2>
    <p>Figcaption can contain various types of content.</p>

    <h3>Simple Text</h3>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/300" alt="Simple caption example" loading="lazy" />
        <figcaption>A simple text caption describing the image.</figcaption>
      </figure>
    </div>

    <h3>Figure Numbering</h3>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/301" alt="Numbered figure" loading="lazy" />
        <figcaption><strong>Figure 1:</strong> Mountain landscape at sunset.</figcaption>
      </figure>
    </div>
    <code-block language="html" label="Figure numbering">{figureNumberingCode}</code-block>

    <h3>With Links</h3>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/302" alt="Caption with link" loading="lazy" />
        <figcaption>Photo by <a href="#">John Doe</a> on <a href="#">Unsplash</a>.</figcaption>
      </figure>
    </div>

    <h3>With Citations</h3>
    <div class="example">
      <figure>
        <img src="https://picsum.photos/500/303" alt="Historical photo" loading="lazy" />
        <figcaption>
          <cite>The Great Wave off Kanagawa</cite> by Hokusai, c. 1831.
          <small>Source: Metropolitan Museum of Art</small>
        </figcaption>
      </figure>
    </div>

    <h3>Multi-line Captions</h3>
    <div class="example">
      <figure class="bordered">
        <img src="https://picsum.photos/500/304" alt="Detailed caption example" loading="lazy" />
        <figcaption>
          <strong>Figure 3:</strong> Sales performance by region.
          <br />
          <small>Data collected Q1-Q4 2025. Source: Internal analytics.</small>
        </figcaption>
      </figure>
    </div>

    <h3>Rich Content</h3>
    <div class="example">
      <figure class="bordered">
        <img src="https://picsum.photos/500/305" alt="Rich caption example" loading="lazy" />
        <figcaption>
          <p><strong>Team photo at annual retreat</strong></p>
          <p>
            Left to right: Alice (Engineering), Bob (Design), Carol (Product).
            Photo taken at Lake Tahoe, December 2025.
          </p>
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Context-Specific Captions Section -->
  <section>
    <h2>Context-Specific Captions</h2>

    <h3>Code Example</h3>
    <p>In code figures, captions typically show the filename.</p>
    <div class="example">
      <figure class="code">
        <pre><code>const sum = (a, b) => a + b;
console.log(sum(2, 3)); // 5</code></pre>
        <figcaption>utils/math.js</figcaption>
      </figure>
    </div>

    <h3>Quote Attribution</h3>
    <p>In quote figures, captions provide attribution.</p>
    <div class="example">
      <figure class="quote">
        <blockquote>
          Design is not just what it looks like and feels like. Design is how it works.
        </blockquote>
        <figcaption>Steve Jobs</figcaption>
      </figure>
    </div>

    <h3>Chart/Graph Source</h3>
    <div class="example">
      <figure>
        <canvas class="bordered" width="500" height="200" id="chart-example"></canvas>
        <figcaption>
          <strong>Chart 1:</strong> Monthly active users (2025).
          <small>Source: Google Analytics</small>
        </figcaption>
      </figure>
    </div>

    <h3>Video Description</h3>
    <div class="example">
      <figure>
        <video controls poster="https://picsum.photos/500/280" style="max-inline-size: 500px;">
          <source src="#" type="video/mp4" />
        </video>
        <figcaption>
          <strong>Video:</strong> Product demo walkthrough.
          Duration: 5:32 | <a href="#">View transcript</a>
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Accessibility Section -->
  <section>
    <h2>Accessibility</h2>

    <h3>Role in Accessibility</h3>
    <p>When a <code>&lt;figure&gt;</code> contains a <code>&lt;figcaption&gt;</code>, screen readers announce the figure and its caption together, providing context for the content.</p>

    <h3>Alt Text vs Figcaption</h3>
    <p>These serve different purposes and shouldn't duplicate each other:</p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute/Element</th>
          <th>Purpose</th>
          <th>Audience</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>alt</code></td>
          <td>Describes the image itself</td>
          <td>Screen reader users (replaces image)</td>
        </tr>
        <tr>
          <td><code>&lt;figcaption&gt;</code></td>
          <td>Provides context about why the image is shown</td>
          <td>All users (supplements image)</td>
        </tr>
      </tbody>
    </table>

    <code-block language="html" label="Alt text vs figcaption">{altVsFigcaptionCode}</code-block>

    <h3>Visually Hidden Captions</h3>
    <p>Use <code>.hidden</code> when captions are needed for accessibility but not visually.</p>
    <code-block language="html" label="Visually hidden caption example">{visuallyHiddenExampleCode}</code-block>
  </section>

  <!-- Related Elements Section -->
  <section>
    <h2>Related Elements</h2>
    <ul>
      <li><a href="/docs/elements/native/figure/"><code>&lt;figure&gt;</code></a> - Parent element that contains figcaption</li>
      <li><a href="/docs/elements/native/img/"><code>&lt;img&gt;</code></a> - Images that figcaptions describe</li>
      <li><a href="/docs/elements/native/blockquote/"><code>&lt;blockquote&gt;</code></a> - Quotations that may have figcaption attribution</li>
    </ul>
  </section>

  <!-- CSS Reference Section -->
  <section>
    <h2>CSS Reference</h2>
    <p>Styles defined in <code>/src/native-elements/figure/styles.css</code></p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Selector</th>
          <th>Properties</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>figcaption</code></td>
          <td><code>font-size: var(--font-size-sm); color: var(--color-text-muted); margin-block-start: var(--size-s);</code></td>
        </tr>
        <tr>
          <td><code>figcaption.centered</code></td>
          <td><code>text-align: center;</code></td>
        </tr>
        <tr>
          <td><code>figcaption.end</code></td>
          <td><code>text-align: end;</code></td>
        </tr>
        <tr>
          <td><code>figcaption.hidden</code></td>
          <td><code>position: absolute; clip: rect(0,0,0,0); etc.</code></td>
        </tr>
        <tr>
          <td><code>figure.bordered &gt; figcaption</code></td>
          <td><code>margin-block-start; padding-block-start; border-block-start;</code></td>
        </tr>
        <tr>
          <td><code>figure.code &gt; figcaption</code></td>
          <td><code>padding; background; border-radius; font-family: mono;</code></td>
        </tr>
        <tr>
          <td><code>figure.quote &gt; figcaption</code></td>
          <td><code>font-style: normal; ::before adds em-dash;</code></td>
        </tr>
      </tbody>
    </table>
  </section>
</ElementLayout>

<script>
  // Demo chart
  const canvas = document.getElementById('chart-example') as HTMLCanvasElement;
  if (canvas) {
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = '#f8f8f8';
    ctx.fillRect(0, 0, 500, 200);

    const data = [45, 55, 48, 65, 72, 68, 75, 82, 79, 88, 92, 95];
    const maxVal = Math.max(...data);

    data.forEach((val, i) => {
      const height = (val / maxVal) * 150;
      const x = 30 + i * 38;
      ctx.fillStyle = '#4a90d9';
      ctx.fillRect(x, 180 - height, 30, height);
    });

    ctx.fillStyle = '#666';
    ctx.font = '12px system-ui';
    ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'].forEach((m, i) => {
      ctx.fillText(m, 38 + i * 38, 195);
    });
  }
</script>
