---
/**
 * Datalist Element Documentation
 *
 * Provides autocomplete suggestions for input elements. The datalist creates
 * a native dropdown of options that users can select from while still allowing
 * free-form text entry.
 */
import ElementLayout from '../../../../layouts/ElementLayout.astro';

// Code examples as template strings
const basicDatalistCode = `<label for="browser">Browser</label>
<input type="text" id="browser" list="browsers" placeholder="Start typing..." />
<datalist id="browsers">
  <option value="Chrome"></option>
  <option value="Firefox"></option>
  <option value="Safari"></option>
  <option value="Edge"></option>
  <option value="Opera"></option>
</datalist>`;

const inputVariantsCode = `<!-- No dropdown arrow -->
<input type="text" list="options" class="no-arrow" />

<!-- Search style with icon -->
<input type="search" list="options" class="search" />`;

const optionsWithLabelsCode = `<datalist id="airports">
  <option value="JFK" label="John F. Kennedy International"></option>
  <option value="LAX" label="Los Angeles International"></option>
  <option value="ORD" label="Chicago O'Hare"></option>
</datalist>`;

const formFieldCode = `<form-field>
  <label for="country">Country</label>
  <input type="text"
         id="country"
         name="country"
         list="countries"
         required
         autocomplete="country-name"
         aria-describedby="country-msg" />
  <datalist id="countries">
    <option value="United States"></option>
    <option value="Canada"></option>
    <!-- more options -->
  </datalist>
  <output id="country-msg" for="country" aria-live="polite">
    Start typing to see suggestions
  </output>
</form-field>`;

const cssReferenceCode = `/* Input with datalist indicator */
input[list] {
  background-image: url("data:image/svg+xml,..."); /* dropdown arrow */
  background-repeat: no-repeat;
  background-position: right var(--size-s) center;
  padding-inline-end: var(--size-xl);
}

/* Hide the dropdown arrow */
input[list].no-arrow {
  background-image: none;
  padding-inline-end: var(--size-s);
}

/* Search-style datalist input */
input[list].search {
  background-image: url("data:image/svg+xml,..."); /* search icon */
  background-position: left var(--size-s) center;
  padding-inline-start: var(--size-xl);
  padding-inline-end: var(--size-s);
}

/* The datalist element itself is hidden */
datalist {
  display: none;
}`;
---

<ElementLayout
  title="datalist"
  description="Provides autocomplete suggestions for input elements. The datalist creates a native dropdown of options that users can select from while still allowing free-form text entry."
  elementName="datalist"
  category="native"
  nativeGroup="Forms"
  currentPath="/docs/elements/native/datalist/"
>
  <section>
    <h2>When to Use</h2>
    <ul>
      <li>Providing suggestions while allowing custom values (e.g., country input)</li>
      <li>Autocomplete functionality without JavaScript</li>
      <li>Search inputs with common suggestions</li>
      <li>When users might enter values not in the predefined list</li>
    </ul>
    <p><strong>Use <a href="/docs/elements/native/select/">select</a> instead</strong> when users must choose from a fixed set of options.</p>
  </section>

  <section>
    <h2>Basic Usage</h2>
    <p>Connect an input to a datalist using the <code>list</code> attribute on the input and an <code>id</code> on the datalist.</p>

    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="browser-basic">Browser</label>
        <input type="text" id="browser-basic" list="browsers-basic" placeholder="Start typing..." />
        <datalist id="browsers-basic">
          <option value="Chrome"></option>
          <option value="Firefox"></option>
          <option value="Safari"></option>
          <option value="Edge"></option>
          <option value="Opera"></option>
          <option value="Brave"></option>
        </datalist>
      </div>
    </div>

    <h3>Code</h3>
    <code-block language="html" show-lines label="Basic datalist with input">{basicDatalistCode}</code-block>
  </section>

  <section>
    <h2>Input Variants</h2>

    <h3>Default (with dropdown arrow)</h3>
    <p>Inputs with a <code>list</code> attribute display a dropdown arrow to indicate suggestions are available.</p>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="color-arrow">Color</label>
        <input type="text" id="color-arrow" list="colors-arrow" placeholder="Pick a color..." />
        <datalist id="colors-arrow">
          <option value="Red"></option>
          <option value="Blue"></option>
          <option value="Green"></option>
          <option value="Yellow"></option>
          <option value="Purple"></option>
        </datalist>
      </div>
    </div>

    <h3>.no-arrow</h3>
    <p>Hide the dropdown indicator for a cleaner text input appearance.</p>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="color-no-arrow">Color</label>
        <input type="text" id="color-no-arrow" list="colors-no-arrow" class="no-arrow" placeholder="Pick a color..." />
        <datalist id="colors-no-arrow">
          <option value="Red"></option>
          <option value="Blue"></option>
          <option value="Green"></option>
          <option value="Yellow"></option>
          <option value="Purple"></option>
        </datalist>
      </div>
    </div>

    <h3>.search</h3>
    <p>Search-style input with a magnifying glass icon on the left.</p>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="product-search">Search Products</label>
        <input type="search" id="product-search" list="products-search" class="search" placeholder="Search..." />
        <datalist id="products-search">
          <option value="Laptop"></option>
          <option value="Laptop Stand"></option>
          <option value="Laptop Bag"></option>
          <option value="Wireless Mouse"></option>
          <option value="Mechanical Keyboard"></option>
        </datalist>
      </div>
    </div>

    <h3>Code</h3>
    <code-block language="html" show-lines label="Input variants with datalist">{inputVariantsCode}</code-block>
  </section>

  <section>
    <h2>Options with Labels</h2>
    <p>Options can include a label that is displayed alongside the value. The value is what gets submitted, while the label provides additional context.</p>

    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="airport">Airport</label>
        <input type="text" id="airport" list="airports" placeholder="Enter airport code..." />
        <datalist id="airports">
          <option value="JFK" label="John F. Kennedy International"></option>
          <option value="LAX" label="Los Angeles International"></option>
          <option value="ORD" label="Chicago O'Hare"></option>
          <option value="DFW" label="Dallas/Fort Worth"></option>
          <option value="SFO" label="San Francisco International"></option>
        </datalist>
      </div>
    </div>

    <h3>Code</h3>
    <code-block language="html" show-lines label="Options with labels">{optionsWithLabelsCode}</code-block>
  </section>

  <section>
    <h2>With Different Input Types</h2>
    <p>Datalist works with various input types beyond text.</p>

    <h3>Email Input</h3>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="email-suggest">Email</label>
        <input type="email" id="email-suggest" list="email-domains" placeholder="you@" />
        <datalist id="email-domains">
          <option value="@gmail.com"></option>
          <option value="@outlook.com"></option>
          <option value="@yahoo.com"></option>
          <option value="@icloud.com"></option>
        </datalist>
      </div>
    </div>

    <h3>URL Input</h3>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="url-suggest">Website</label>
        <input type="url" id="url-suggest" list="common-urls" placeholder="https://" />
        <datalist id="common-urls">
          <option value="https://github.com"></option>
          <option value="https://gitlab.com"></option>
          <option value="https://bitbucket.org"></option>
        </datalist>
      </div>
    </div>

    <h3>Number Input (Range)</h3>
    <div class="example">
      <div class="group" style="max-inline-size: 25rem;">
        <label for="range-suggest">Volume: <output id="volume-output">50</output></label>
        <input type="range" id="range-suggest" list="volume-values" min="0" max="100" value="50" oninput="document.getElementById('volume-output').value = this.value" />
        <datalist id="volume-values">
          <option value="0" label="Mute"></option>
          <option value="25" label="Low"></option>
          <option value="50" label="Medium"></option>
          <option value="75" label="High"></option>
          <option value="100" label="Max"></option>
        </datalist>
      </div>
    </div>
  </section>

  <section>
    <h2>Using with form-field</h2>
    <p>For enhanced accessibility and validation, wrap datalist inputs in the <a href="/docs/elements/custom-elements/form-field/">form-field custom element</a>.</p>

    <div class="example">
      <form style="max-inline-size: 25rem;">
        <form-field>
          <label for="country-ff">Country</label>
          <input type="text"
                 id="country-ff"
                 name="country"
                 list="countries-ff"
                 required
                 autocomplete="country-name"
                 aria-describedby="country-ff-msg" />
          <datalist id="countries-ff">
            <option value="United States"></option>
            <option value="Canada"></option>
            <option value="United Kingdom"></option>
            <option value="Australia"></option>
            <option value="Germany"></option>
            <option value="France"></option>
          </datalist>
          <output id="country-ff-msg" for="country-ff" aria-live="polite">
            Start typing to see suggestions
          </output>
        </form-field>
      </form>
    </div>

    <h3>Code</h3>
    <code-block language="html" show-lines label="Datalist with form-field">{formFieldCode}</code-block>
  </section>

  <section>
    <h2>Accessibility Notes</h2>
    <ul>
      <li><strong>Always include a label</strong>: The input must have an associated <a href="/docs/elements/native/label/">label</a></li>
      <li><strong>Screen reader support</strong>: Native datalist is well-supported by assistive technologies</li>
      <li><strong>Keyboard navigation</strong>: Users can navigate options with arrow keys</li>
      <li><strong>Allow custom values</strong>: Unlike select, datalist allows users to enter values not in the list</li>
      <li><strong>Provide fallback</strong>: The input works without the datalist in older browsers</li>
    </ul>
  </section>

  <section>
    <h2>CSS Reference</h2>
    <code-block language="css" show-lines label="CSS for datalist styling">{cssReferenceCode}</code-block>
  </section>

  <section>
    <h2>Browser Support Notes</h2>
    <ul>
      <li>Datalist is supported in all modern browsers</li>
      <li>Visual appearance varies between browsers (cannot be fully styled)</li>
      <li>The dropdown behavior is controlled by the browser</li>
      <li>On mobile devices, the suggestions may appear in a different format</li>
    </ul>
  </section>

  <section>
    <h2>Related Elements</h2>
    <ul>
      <li><a href="/docs/elements/native/input/">input</a> - The input element that uses datalist</li>
      <li><a href="/docs/elements/native/option/">option</a> - Defines individual suggestions</li>
      <li><a href="/docs/elements/native/select/">select</a> - For fixed option lists (no custom values)</li>
      <li><a href="/docs/elements/native/label/">label</a> - Associates text with the input</li>
      <li><a href="/docs/elements/custom-elements/form-field/">form-field</a> - Enhanced form field wrapper</li>
    </ul>
  </section>
</ElementLayout>
