---
/**
 * Password Strength & Rules Documentation
 *
 * Extends form-field-enhancements with data-strength and data-rules.
 */
import ElementLayout from '../../../../layouts/ElementLayout.astro';

const basicCode = `<form-field>
  <label for="pw">Password</label>
  <input type="password" id="pw"
    data-strength
    data-rules="length:8,uppercase,lowercase,number,special"
    placeholder="Create a strong password"
    autocomplete="new-password"
  />
</form-field>`;

const simpleCode = `<form-field>
  <label for="pw-simple">Password</label>
  <input type="password" id="pw-simple"
    data-strength
    data-rules="length:6,number"
    placeholder="At least 6 chars + number"
  />
</form-field>`;

const rulesRef = `length:N    — Minimum N characters (default 8)
uppercase   — At least one uppercase letter (A-Z)
lowercase   — At least one lowercase letter (a-z)
number      — At least one digit (0-9)
special     — At least one special character`;

const cssCode = `/* Strength label colors */
.strength-meter[data-level="weak"] .strength-label \{
  color: oklch(55% 0.2 25);   /* red */
\}
.strength-meter[data-level="fair"] .strength-label \{
  color: oklch(75% 0.18 75);  /* yellow */
\}
.strength-meter[data-level="good"] .strength-label \{
  color: oklch(65% 0.15 145); /* light green */
\}
.strength-meter[data-level="strong"] .strength-label \{
  color: oklch(60% 0.18 145); /* green */
\}`;
---

<ElementLayout
  title="Password Strength"
  description="Real-time password strength meter and rules checklist for registration forms."
  elementName="data-strength"
  category="component"
  currentPath="/docs/elements/web-components/password-strength/"
>
  <section>
    <h2>Overview</h2>
    <p>Add <code>data-strength</code> and <code>data-rules</code> to a password input inside <code>&lt;form-field&gt;</code> to show a strength meter and rules checklist. The meter uses native <code>&lt;meter&gt;</code> which inherits VB's existing meter CSS (optimum/sub-optimum color bands = weak/fair/strong). Works alongside the existing password show/hide toggle.</p>

    <browser-window
      src="/docs/examples/demos/password-strength-basic.html"
      url="https://vanilla-breeze.dev/password-strength"
      title="Password Strength Demo"
      shadow>
    </browser-window>
  </section>

  <section>
    <h2>Full Rules</h2>
    <p>Specify all the rules you want to enforce. Each rule is evaluated in real-time as the user types.</p>

    <code-block language="html" show-lines label="Full rules">{basicCode}</code-block>
  </section>

  <section>
    <h2>Simple Rules</h2>
    <p>Use fewer rules for simpler requirements.</p>

    <code-block language="html" show-lines label="Simple rules">{simpleCode}</code-block>
  </section>

  <section>
    <h2>Available Rules</h2>
    <table class="props-table">
      <thead>
        <tr>
          <th>Rule</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>length:N</code></td>
          <td>Minimum N characters (default 8)</td>
        </tr>
        <tr>
          <td><code>uppercase</code></td>
          <td>At least one uppercase letter (A&ndash;Z)</td>
        </tr>
        <tr>
          <td><code>lowercase</code></td>
          <td>At least one lowercase letter (a&ndash;z)</td>
        </tr>
        <tr>
          <td><code>number</code></td>
          <td>At least one digit (0&ndash;9)</td>
        </tr>
        <tr>
          <td><code>special</code></td>
          <td>At least one special character (!@#$ etc.)</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Attributes</h2>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-strength</code></td>
          <td>Enable strength meter and rules checklist on this password input.</td>
        </tr>
        <tr>
          <td><code>data-rules</code></td>
          <td>Comma-separated rules. Default: <code>"length:8"</code>.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Strength Levels</h2>
    <p>The strength label updates based on how many rules are met:</p>
    <ul>
      <li><strong>Weak</strong> &mdash; Less than 40% of rules met</li>
      <li><strong>Fair</strong> &mdash; 40&ndash;74% of rules met</li>
      <li><strong>Good</strong> &mdash; 75&ndash;99% of rules met</li>
      <li><strong>Strong</strong> &mdash; All rules met</li>
    </ul>
  </section>

  <section>
    <h2>Styling</h2>
    <code-block language="css" show-lines label="Strength colors">{cssCode}</code-block>
  </section>

  <section>
    <h2>Progressive Enhancement</h2>
    <ul>
      <li><strong>No JS:</strong> Password input works normally. Use native <code>minlength</code> and <code>pattern</code> for basic validation.</li>
      <li><strong>With JS:</strong> Real-time strength feedback with visual meter and rules checklist.</li>
    </ul>
  </section>

  <section>
    <h2>Related Elements</h2>
    <ul>
      <li><a href="/docs/elements/custom-elements/form-field/"><code>&lt;form-field&gt;</code></a> &mdash; Required wrapper (provides password toggle and validation)</li>
      <li><a href="/docs/elements/native/meter/"><code>&lt;meter&gt;</code></a> &mdash; Native meter element used for the strength bar</li>
      <li><a href="/docs/elements/native/input/"><code>&lt;input&gt;</code></a> &mdash; Native password input</li>
    </ul>
  </section>
</ElementLayout>
