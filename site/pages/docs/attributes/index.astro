---
/**
 * Attribute Index
 *
 * Categorized directory of all data attributes with type badges,
 * descriptions, and cross-references to element-documented attributes.
 */
import DocsLayout from '../../../layouts/DocsLayout.astro';

// Primary attributes â€” those with dedicated pages
const attributes = {
  layout: {
    label: 'Layout',
    items: [
      { name: 'data-layout', type: 'layout', href: '/docs/attributes/data-layout/', description: 'Apply stack, cluster, grid, center, sidebar, split, cover, and other layouts to any element' },
      { name: 'data-page-layout', type: 'layout', href: '/docs/attributes/data-page-layout/', description: 'Full-page grid layouts with semantic area assignment' },
      { name: 'data-layout-density', type: 'layout', href: '/docs/attributes/data-layout-density/', description: 'Compact or spacious spacing modes that cascade to descendants' },
    ],
  },
  formatting: {
    label: 'Formatting',
    items: [
      { name: 'data-format-number', type: 'formatting', href: '/docs/attributes/data-format-number/', description: 'Locale-aware number formatting via Intl.NumberFormat' },
      { name: 'data-format-date', type: 'formatting', href: '/docs/attributes/data-format-date/', description: 'Locale-aware date and relative time formatting' },
      { name: 'data-format-bytes', type: 'formatting', href: '/docs/attributes/data-format-bytes/', description: 'Human-readable file size formatting' },
      { name: 'data-ticker', type: 'behavior', href: '/docs/attributes/data-ticker/', description: 'Animated number count-up on scroll' },
    ],
  },
  clipboard: {
    label: 'Clipboard & Selection',
    items: [
      { name: 'data-copy', type: 'behavior', href: '/docs/attributes/data-copy/', description: 'Copy text to clipboard on click with visual feedback' },
      { name: 'data-select-all', type: 'behavior', href: '/docs/attributes/data-select-all/', description: 'Master checkbox for bulk selection' },
    ],
  },
  'text-effects': {
    label: 'Text Effects',
    items: [
      { name: 'data-text-effects', type: 'behavior', href: '/docs/attributes/data-text-effects/', description: 'Gradient, shimmer, glitch, reveal, highlight, typewriter, and scramble effects' },
    ],
  },
  interaction: {
    label: 'Interaction',
    items: [
      { name: 'data-hotkey', type: 'behavior', href: '/docs/attributes/data-hotkey/', description: 'Platform-aware keyboard shortcut display' },
      { name: 'data-spoiler', type: 'behavior', href: '/docs/attributes/data-spoiler/', description: 'Content concealment with blur, solid, or noise effects' },
      { name: 'data-animate-image', type: 'behavior', href: '/docs/attributes/data-animate-image/', description: 'Play/pause control for animated GIF, WebP, and APNG images' },
    ],
  },
  infrastructure: {
    label: 'Infrastructure',
    items: [
      { name: 'hide-until-ready', type: 'layout', href: '/docs/attributes/hide-until-ready/', description: 'Prevent FOUC by hiding elements until custom elements are defined' },
      { name: 'view-transitions', type: 'layout', href: '/docs/attributes/view-transitions/', description: 'CSS View Transitions with named groups, shared elements, and presets' },
    ],
  },
};

// Attributes documented on element/pattern pages (cross-references)
const documentedElsewhere = [
  { name: 'data-switch', description: 'Checkbox styled as toggle switch', href: '/docs/elements/native/input/#toggle-switch-data-switch' },
  { name: 'data-count', description: 'Live character/word counter for textareas', href: '/docs/elements/native/textarea/#character--word-count-data-count' },
  { name: 'data-grow', description: 'Auto-expanding textarea', href: '/docs/elements/native/textarea/#auto-expand-data-grow' },
  { name: 'data-strength', description: 'Password strength meter', href: '/docs/elements/native/input/#password-strength-data-strength' },
  { name: 'data-show-when', description: 'Conditional field visibility', href: '/docs/elements/native/form/#conditional-fields-data-show-when' },
  { name: 'data-hide-when', description: 'Conditional field hiding', href: '/docs/elements/native/form/#conditional-fields-data-show-when' },
  { name: 'data-range', description: 'Cross-browser styled range with track fill', href: '/docs/elements/native/input/#range-enhancement-data-range' },
  { name: 'data-bubble', description: 'Floating value bubble for range inputs', href: '/docs/elements/native/input/#range-enhancement-data-range' },
  { name: 'data-upload', description: 'Drag-and-drop file upload zone', href: '/docs/elements/native/input/#file-upload-zone-data-upload' },
  { name: 'data-autosave', description: 'Persist form drafts to localStorage', href: '/docs/elements/native/form/#form-autosave-data-autosave' },
  { name: 'data-mask', description: 'Input masking for phone, credit card, date, etc.', href: '/docs/elements/native/input/#input-masking-data-mask' },
  { name: 'data-markers', description: 'Tick marks on range sliders', href: '/docs/elements/native/input/#range-markers-data-markers' },
  { name: 'data-toggle-tags', description: 'Checkbox pill chips for multi-select', href: '/docs/elements/native/input/#toggle-tags-data-toggle-tags' },
  { name: 'data-stepper', description: 'Custom +/- buttons on number inputs', href: '/docs/elements/native/input/#number-stepper-data-stepper' },
  { name: 'data-color', description: 'Swatch and hex display for color inputs', href: '/docs/elements/native/input/#enhanced-color-input-data-color' },
  { name: 'data-wizard', description: 'Multi-step form wizard controller', href: '/docs/patterns/forms/wizard/' },
  { name: 'data-splitter', description: 'Resizable drag divider between panels', href: '/docs/elements/web-components/splitter/' },
];

// Calculate stats
const allItems = Object.values(attributes).flatMap(cat => cat.items);
const layoutCount = allItems.filter(i => i.type === 'layout').length;
const behaviorCount = allItems.filter(i => i.type === 'behavior').length;
const formattingCount = allItems.filter(i => i.type === 'formatting').length;
const totalCount = allItems.length;
---

<DocsLayout
  title="Attribute Index"
  description="Complete listing of all data attributes organized by category with type badges."
  currentSection="api"
>
  <style>
    .attribute-index {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--size-m);
      margin-block-start: var(--size-l);
    }

    .attribute-entry {
      display: flex;
      flex-direction: column;
      gap: var(--size-2xs);
      padding: var(--size-m);
      background: var(--color-surface);
      border: var(--border-width-thin) solid var(--color-border);
      border-radius: var(--radius-s);
      text-decoration: none;
      color: inherit;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .attribute-entry:hover {
      border-color: var(--color-interactive);
      box-shadow: 0 2px 8px oklch(0% 0 0 / 0.08);
    }

    .attribute-entry code {
      font-family: var(--font-mono);
      font-size: var(--font-size-sm);
      font-weight: 500;
    }

    .attribute-entry .description {
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      margin: 0;
    }

    .attribute-badge {
      padding: var(--size-3xs) var(--size-xs);
      border-radius: var(--radius-s);
      font-size: var(--font-size-xs);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .attribute-badge[data-type="layout"] {
      background: oklch(85% 0.1 145);
      color: oklch(30% 0.1 145);
    }

    .attribute-badge[data-type="behavior"] {
      background: oklch(85% 0.1 60);
      color: oklch(30% 0.1 60);
    }

    .attribute-badge[data-type="formatting"] {
      background: oklch(85% 0.1 250);
      color: oklch(30% 0.1 250);
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: var(--size-m);
      margin-block: var(--size-l);
      padding: var(--size-m);
      background: var(--color-surface-raised);
      border-radius: var(--radius-m);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: var(--size-xs);
      font-size: var(--font-size-sm);
    }

    .stats {
      display: flex;
      gap: var(--size-xl);
      margin-block: var(--size-m);
      color: var(--color-text-muted);
      font-size: var(--font-size-sm);
    }

    .stats strong {
      color: var(--color-text);
    }

    .category-heading {
      grid-column: 1 / -1;
      margin-block-start: var(--size-l);
      padding-block-end: var(--size-xs);
      border-block-end: var(--border-width-thin) solid var(--color-border);
      font-size: var(--font-size-lg);
      font-weight: 600;
    }

    .category-heading:first-of-type {
      margin-block-start: 0;
    }

    .xref-table {
      margin-block-start: var(--size-l);
    }

    .xref-table code {
      font-size: var(--font-size-sm);
    }
  </style>

  <h1>Attribute Index</h1>
  <p class="lead">Complete listing of all data attributes organized by category.</p>

  <div class="stats">
    <span><strong>{layoutCount}</strong> layout</span>
    <span><strong>{behaviorCount}</strong> behavior</span>
    <span><strong>{formattingCount}</strong> formatting</span>
    <span><strong>{totalCount}</strong> total</span>
  </div>

  <div class="legend">
    <div class="legend-item">
      <span class="attribute-badge" data-type="layout">layout</span>
      <span>CSS-only structural attributes</span>
    </div>
    <div class="legend-item">
      <span class="attribute-badge" data-type="behavior">behavior</span>
      <span>JS-enhanced interactive attributes</span>
    </div>
    <div class="legend-item">
      <span class="attribute-badge" data-type="formatting">formatting</span>
      <span>JS-enhanced display/formatting attributes</span>
    </div>
  </div>

  <nav class="attribute-index" aria-label="All attributes">
    {Object.entries(attributes).map(([key, category]) => (
      <>
        <h2 class="category-heading">{category.label}</h2>
        {category.items.map(item => (
          <a href={item.href} class="attribute-entry">
            <code>{item.name}</code>
            <span class="attribute-badge" data-type={item.type}>{item.type}</span>
            <p class="description">{item.description}</p>
          </a>
        ))}
      </>
    ))}
  </nav>

  <section class="xref-table">
    <h2>Also documented on element pages</h2>
    <p>These attributes are documented alongside the elements they enhance.</p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Description</th>
          <th>Documented on</th>
        </tr>
      </thead>
      <tbody>
        {documentedElsewhere.map(item => (
          <tr>
            <td><code><a href={item.href}>{item.name}</a></code></td>
            <td>{item.description}</td>
            <td><a href={item.href}>View docs</a></td>
          </tr>
        ))}
      </tbody>
    </table>
  </section>
</DocsLayout>
