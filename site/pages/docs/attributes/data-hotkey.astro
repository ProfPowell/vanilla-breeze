---
/**
 * data-hotkey Attribute Documentation
 *
 * Platform-aware keyboard shortcut display via data attributes.
 */
import AttributeLayout from '../../../layouts/AttributeLayout.astro';

const basicCode = `<kbd data-hotkey="meta+k">Ctrl+K</kbd>`;

const multipleCode = `<kbd data-hotkey="meta+k">Ctrl+K</kbd>
<kbd data-hotkey="meta+s">Ctrl+S</kbd>
<kbd data-hotkey="meta+shift+p">Ctrl+Shift+P</kbd>
<kbd data-hotkey="alt+f4">Alt+F4</kbd>`;

const inlineCode = `<p>Press <kbd data-hotkey="meta+k">Ctrl+K</kbd> to open the search palette.</p>`;

const commandPaletteCode = `<table>
  <tbody>
    <tr>
      <td>Search</td>
      <td><kbd data-hotkey="meta+k">Ctrl+K</kbd></td>
    </tr>
    <tr>
      <td>Save</td>
      <td><kbd data-hotkey="meta+s">Ctrl+S</kbd></td>
    </tr>
    <tr>
      <td>Undo</td>
      <td><kbd data-hotkey="meta+z">Ctrl+Z</kbd></td>
    </tr>
  </tbody>
</table>`;

const tooltipCode = `<tooltip-wc>
  <button type="button">
    <icon-wc name="search" size="sm"></icon-wc>
    Search
  </button>
  <template data-tooltip>
    Search <kbd data-hotkey="meta+k">Ctrl+K</kbd>
  </template>
</tooltip-wc>`;

const dynamicCode = `// Dynamically added elements are auto-enhanced via MutationObserver
const kbd = document.createElement('kbd');
kbd.dataset.hotkey = 'meta+n';
kbd.textContent = 'Ctrl+N';
document.body.appendChild(kbd);
// kbd is enhanced automatically \u2014 no manual init needed`;
---

<AttributeLayout
  title="data-hotkey"
  description="Platform-aware keyboard shortcut display. Add data-hotkey to any <kbd> element to render platform-appropriate key symbols."
  attributeName="data-hotkey"
  category="interaction"
  currentPath="/docs/attributes/data-hotkey/"
>
  <section>
    <h2>Overview</h2>
    <p>The <code>data-hotkey</code> attribute enhances native <code>&lt;kbd&gt;</code> elements with platform-aware key rendering. On Mac, modifier keys display as symbols; on other platforms, as text labels with <code>+</code> separators.</p>

    <browser-window
      src="/docs/examples/demos/hotkey-wc-basic.html"
      url="https://vanilla-breeze.dev/hotkey"
      title="Keyboard Shortcuts"
      shadow>
    </browser-window>

    <code-block language="html" show-lines label="Basic hotkey display">{basicCode}</code-block>
  </section>

  <section>
    <h2>How It Works</h2>
    <ol>
      <li>Reads the <code>data-hotkey</code> attribute value (e.g., <code>"meta+k"</code>)</li>
      <li>Detects the user's platform (Mac vs. other)</li>
      <li>Maps modifier names to platform-appropriate symbols or labels</li>
      <li>Generates a <code>&lt;kbd&gt;</code> element for each key in the combo</li>
      <li>Replaces the element's content with the styled key caps</li>
      <li>Sets <code>aria-label</code> with the readable text</li>
    </ol>
    <p>The original text content (e.g., "Ctrl+K") serves as a no-JS fallback. Nested <code>&lt;kbd&gt;</code> inside <code>&lt;kbd&gt;</code> is valid HTML for key combinations per the spec.</p>
  </section>

  <section>
    <h2>Attributes</h2>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-hotkey</code></td>
          <td>string</td>
          <td>Key combination string. Keys separated by <code>+</code>. Supported modifiers: <code>meta</code>, <code>alt</code>, <code>shift</code>, <code>ctrl</code>.</td>
        </tr>
        <tr>
          <td><code>data-hotkey-init</code></td>
          <td>boolean</td>
          <td>Set automatically to prevent double-enhancement. Do not set manually.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Modifier Key Mapping</h2>
    <p>Modifier keys are automatically translated based on the user's platform:</p>

    <table class="props-table">
      <thead>
        <tr>
          <th>Key name</th>
          <th>Mac</th>
          <th>Windows/Linux</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>meta</code></td>
          <td>&#x2318;</td>
          <td>Ctrl</td>
        </tr>
        <tr>
          <td><code>alt</code></td>
          <td>&#x2325;</td>
          <td>Alt</td>
        </tr>
        <tr>
          <td><code>shift</code></td>
          <td>&#x21E7;</td>
          <td>Shift</td>
        </tr>
        <tr>
          <td><code>ctrl</code></td>
          <td>&#x2303;</td>
          <td>Ctrl</td>
        </tr>
      </tbody>
    </table>

    <p>Non-modifier keys are displayed in uppercase (e.g., <code>k</code> becomes <kbd>K</kbd>).</p>
  </section>

  <section>
    <h2>Examples</h2>
    <p>Common keyboard shortcuts rendered with platform-aware symbols:</p>

    <div class="example">
      <layout-cluster data-layout-gap="xl">
        <span>Search: <kbd data-hotkey="meta+k">Ctrl+K</kbd></span>
        <span>Save: <kbd data-hotkey="meta+s">Ctrl+S</kbd></span>
        <span>Undo: <kbd data-hotkey="meta+z">Ctrl+Z</kbd></span>
        <span>Command palette: <kbd data-hotkey="meta+shift+p">Ctrl+Shift+P</kbd></span>
      </layout-cluster>
    </div>

    <code-block language="html" show-lines label="Multiple shortcut displays">{multipleCode}</code-block>
  </section>

  <section>
    <h2>Inline Usage</h2>
    <p>Works naturally inline with paragraph text:</p>

    <div class="example">
      <p>Press <kbd data-hotkey="meta+k">Ctrl+K</kbd> to open the search palette.</p>
      <p>Use <kbd data-hotkey="meta+shift+p">Ctrl+Shift+P</kbd> for the command palette.</p>
    </div>

    <code-block language="html" show-lines label="Inline with text">{inlineCode}</code-block>
  </section>

  <section>
    <h2>Common Use Cases</h2>

    <h3>Keyboard Shortcuts Table</h3>
    <p>Display a reference table of available shortcuts:</p>

    <div class="example">
      <table>
        <thead>
          <tr>
            <th>Action</th>
            <th>Shortcut</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Search</td>
            <td><kbd data-hotkey="meta+k">Ctrl+K</kbd></td>
          </tr>
          <tr>
            <td>Save</td>
            <td><kbd data-hotkey="meta+s">Ctrl+S</kbd></td>
          </tr>
          <tr>
            <td>Undo</td>
            <td><kbd data-hotkey="meta+z">Ctrl+Z</kbd></td>
          </tr>
          <tr>
            <td>Redo</td>
            <td><kbd data-hotkey="meta+shift+z">Ctrl+Shift+Z</kbd></td>
          </tr>
          <tr>
            <td>Select all</td>
            <td><kbd data-hotkey="meta+a">Ctrl+A</kbd></td>
          </tr>
        </tbody>
      </table>
    </div>

    <code-block language="html" show-lines label="Shortcuts reference table">{commandPaletteCode}</code-block>

    <h3>With Tooltips</h3>
    <p>Combine with <code>&lt;tooltip-wc&gt;</code> to show shortcuts on hover:</p>

    <div class="example">
      <layout-cluster data-layout-gap="l">
        <tooltip-wc>
          <button type="button">
            <icon-wc name="search" size="sm"></icon-wc>
            Search
          </button>
          <template data-tooltip>
            Search <kbd data-hotkey="meta+k">Ctrl+K</kbd>
          </template>
        </tooltip-wc>

        <tooltip-wc>
          <button type="button" class="secondary">
            <icon-wc name="save" size="sm"></icon-wc>
            Save
          </button>
          <template data-tooltip>
            Save <kbd data-hotkey="meta+s">Ctrl+S</kbd>
          </template>
        </tooltip-wc>
      </layout-cluster>
    </div>

    <code-block language="html" show-lines label="Shortcut in tooltip">{tooltipCode}</code-block>
  </section>

  <section>
    <h2>Dynamic Elements</h2>
    <p>Elements added to the DOM after page load are automatically enhanced via a MutationObserver. No manual initialization is needed.</p>

    <code-block language="javascript" show-lines label="Dynamically added hotkey elements">{dynamicCode}</code-block>
  </section>

  <section>
    <h2>Accessibility</h2>
    <ul>
      <li>Sets <code>aria-label</code> on the element with the full text content for screen readers</li>
      <li>Uses semantic <code>&lt;kbd&gt;</code> elements which are recognized by assistive technology</li>
      <li>Nested <code>&lt;kbd&gt;</code> inside <code>&lt;kbd&gt;</code> is valid HTML for key combinations per the spec</li>
      <li>The original text content serves as a no-JS fallback</li>
      <li>On Mac, separators between keys are omitted since the symbols are self-explanatory; on other platforms, <code>+</code> separators are included for clarity</li>
    </ul>
  </section>

</AttributeLayout>
