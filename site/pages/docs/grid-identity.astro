---
/**
 * Grid Identity Documentation
 *
 * The three-tier grid identity system: how semantic HTML elements
 * auto-register to grid areas at page, main, and component levels.
 */
import DocsLayout from '../../layouts/DocsLayout.astro';

const pageLayoutExample = `<body data-page-layout="sidebar-left">
  <header>Site header</header>
  <nav>Navigation</nav>
  <main>Content</main>
  <footer>Site footer</footer>
</body>`;

const hasAdaptationExample = `<!-- No nav present → layout adapts to single column automatically -->
<body data-page-layout="sidebar-left">
  <header>Site header</header>
  <!-- <nav> removed → :has() adapts columns -->
  <main>Full-width content</main>
  <footer>Footer</footer>
</body>`;

const namedAreaExample = `<body data-page-layout="landing" data-layout-gap="none">
  <header>...</header>
  <section data-layout-area="hero">Hero content</section>
  <section data-layout-area="feature">Features grid</section>
  <section data-layout-area="cta">Call to action</section>
  <footer>...</footer>
</body>`;

const mainSidebarExample = `<main data-layout="sidebar-right">
  <article>
    <!-- auto → main-article area -->
    <h1>Page Content</h1>
    <p>Article body...</p>
  </article>
  <aside>
    <!-- auto → main-aside area -->
    <nav>Table of contents</nav>
  </aside>
</main>`;

const regionsExample = `<article data-layout="regions" data-layout-gap="m">
  <header>Card Title</header>          <!-- auto → header area -->
  <section><p>Content...</p></section>  <!-- auto → content area -->
  <footer>Updated 2h ago</footer>       <!-- auto → footer area -->
</article>`;

const regionsGridExample = `<div data-layout="grid" data-layout-min="15rem" data-layout-gap="m">
  <article data-layout="regions" data-layout-gap="s">
    <header>Performance</header>
    <section><p>Optimized for speed.</p></section>
    <footer>Core feature</footer>
  </article>
  <article data-layout="regions" data-layout-gap="s">
    <header>Accessibility</header>
    <section><p>WCAG 2.1 AA compliant.</p></section>
    <footer>Built-in</footer>
  </article>
</div>`;

const mediaExample = `<div data-layout="media" data-layout-gap="m">
  <img src="avatar.jpg" alt="" width="48" height="48">
  <div>
    <strong>Jane Doe</strong>
    <p>Published a new article about grid identity.</p>
  </div>
</div>`;

const threeTierExample = `<body data-page-layout="sidebar-left">        <!-- Tier 1: page -->
  <header>Site Header</header>
  <nav>Primary Navigation</nav>
  <main data-layout="sidebar-right">            <!-- Tier 2: main -->
    <article data-layout="regions" data-layout-gap="l"> <!-- Tier 3: component -->
      <header><h1>Article Title</h1></header>
      <section><p>Article body...</p></section>
      <footer>Published Jan 2025</footer>
    </article>
    <aside><nav>Table of Contents</nav></aside>
  </main>
  <footer>Site Footer</footer>
</body>`;

const containerQueryExample = `@container region-main (width < 40rem) {
  .article-grid {
    grid-template-columns: 1fr;
  }
}`;

const dataContainerExample = `<div data-container="card">
  <!-- Named container (container-name: card) -->
  <p>Content that responds to container width</p>
</div>`;
---

<DocsLayout
  title="Grid Identity"
  description="HTML declares structure, CSS assigns layout. Semantic elements auto-register to grid areas based on their type — no classes needed."
  currentSection="docs"
  toc
>
  <style>
    .key-concept {
      padding: var(--size-m);
      background: var(--color-primary-subtle);
      border-inline-start: var(--border-width-thick) solid var(--color-interactive);
      border-radius: var(--radius-s);
      margin-block: var(--size-m);
    }

    .key-concept strong {
      color: var(--color-interactive);
    }

    .demo-embed {
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      overflow: hidden;
      margin-block: var(--size-m);
    }

    .demo-embed iframe {
      width: 100%;
      border: none;
      background: var(--color-surface);
    }

  </style>

  <!-- Section 1: The Concept -->
  <section id="concept">
    <h2>The Concept</h2>
    <p>VB's grid identity system implements the CSS Zen Garden principle: the same semantic HTML transforms through pure CSS. Write <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code>, <code>&lt;aside&gt;</code>, and <code>&lt;footer&gt;</code>, and the layout assigns them to grid areas automatically.</p>

    <div class="key-concept">
      <strong>Zen Garden Principle:</strong> HTML declares structure. CSS assigns layout. JavaScript handles behavior. Each concern stays in its proper layer.
    </div>

    <h3>Three Tiers</h3>
    <p>Grid identity works at three levels, each scoped to a different container:</p>

    <div data-layout="grid" data-layout-min="200px" data-layout-gap="m">
      <layout-card data-variant="outlined" data-padding="m">
        <layout-stack data-layout-gap="2xs">
          <h4>Tier 1: Page</h4>
          <code>data-page-layout</code>
          <p>Body-level structure. Areas: <code>body-header</code>, <code>body-nav</code>, <code>body-main</code>, <code>body-aside</code>, <code>body-footer</code></p>
        </layout-stack>
      </layout-card>
      <layout-card data-variant="outlined" data-padding="m">
        <layout-stack data-layout-gap="2xs">
          <h4>Tier 2: Main</h4>
          <code>main[data-layout]</code>
          <p>Nested layout within content area. Areas: <code>main-header</code>, <code>main-nav</code>, <code>main-article</code>, <code>main-aside</code>, <code>main-footer</code></p>
        </layout-stack>
      </layout-card>
      <layout-card data-variant="outlined" data-padding="m">
        <layout-stack data-layout-gap="2xs">
          <h4>Tier 3: Component</h4>
          <code>data-layout="regions"</code>
          <p>Generalized structure on any element. Areas: <code>header</code>, <code>content</code>, <code>footer</code></p>
        </layout-stack>
      </layout-card>
    </div>
  </section>

  <!-- Section 2: Page-Level Identity -->
  <section id="page-level">
    <h2>Page-Level Identity</h2>
    <p>Apply <code>data-page-layout</code> to the <code>&lt;body&gt;</code> element. Direct semantic children are auto-assigned to grid areas based on their element type.</p>

    <h3>Available Templates</h3>
    <table>
      <thead>
        <tr>
          <th>Template</th>
          <th>Token</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>stack</code></td><td><code>--tpl-stack</code></td><td>Single column, mobile-first</td></tr>
        <tr><td><code>sidebar-left</code></td><td><code>--tpl-sidebar-left</code></td><td>Two-column with left navigation</td></tr>
        <tr><td><code>sidebar-right</code></td><td><code>--tpl-sidebar-right</code></td><td>Two-column with right sidebar</td></tr>
        <tr><td><code>holy-grail</code></td><td><code>--tpl-holy-grail</code></td><td>Three-column classic layout</td></tr>
        <tr><td><code>app-shell</code></td><td><code>--tpl-app-shell</code></td><td>Vertical nav bar for apps</td></tr>
        <tr><td><code>dashboard</code></td><td><code>--tpl-dashboard</code></td><td>Admin panel with sticky nav</td></tr>
        <tr><td><code>article</code></td><td><code>--tpl-article</code></td><td>Centered content for reading</td></tr>
        <tr><td><code>landing</code></td><td><code>--tpl-landing</code></td><td>Marketing page with named sections</td></tr>
      </tbody>
    </table>

    <h3>Grid Identity Mapping</h3>
    <table>
      <thead>
        <tr>
          <th>Element</th>
          <th>Grid Area</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>&lt;header&gt;</code></td><td><code>body-header</code></td></tr>
        <tr><td><code>&lt;nav&gt;</code></td><td><code>body-nav</code></td></tr>
        <tr><td><code>&lt;main&gt;</code></td><td><code>body-main</code></td></tr>
        <tr><td><code>&lt;aside&gt;</code></td><td><code>body-aside</code></td></tr>
        <tr><td><code>&lt;footer&gt;</code></td><td><code>body-footer</code></td></tr>
      </tbody>
    </table>

    <h3>Example</h3>
    <code-block language="html" label="Page-level identity">{pageLayoutExample}</code-block>

    <h3>Content-Aware Adaptation</h3>
    <p>Layouts automatically adapt when elements are absent. CSS <code>:has()</code> selectors detect what children are present and adjust the grid template accordingly.</p>
    <ul>
      <li><code>sidebar-left</code> without <code>&lt;nav&gt;</code> &#x2192; single column</li>
      <li><code>sidebar-right</code> without <code>&lt;aside&gt;</code> &#x2192; single column</li>
      <li><code>holy-grail</code> without <code>&lt;aside&gt;</code> &#x2192; two columns</li>
      <li><code>holy-grail</code> without both &#x2192; single column</li>
    </ul>

    <code-block language="html" label=":has() adaptation">{hasAdaptationExample}</code-block>

    <p>All page layouts collapse to stack on viewports narrower than 768px (unless <code>data-layout-nowrap</code> is set).</p>

    <p><a href="/docs/examples/demos/grid-identity.html">View the page layouts demo &rarr;</a></p>
  </section>

  <!-- Section 3: Named Area Overrides -->
  <section id="named-areas">
    <h2>Named Area Overrides</h2>
    <p>Use <code>data-layout-area</code> to explicitly assign any element to a named grid area. This overrides the automatic identity assignment.</p>

    <table>
      <thead>
        <tr>
          <th>Value</th>
          <th>Use Case</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>hero</code></td><td>Hero section on landing pages</td></tr>
        <tr><td><code>feature</code></td><td>Feature showcase section</td></tr>
        <tr><td><code>cta</code></td><td>Call-to-action section</td></tr>
        <tr><td><code>sidebar</code></td><td>Generic sidebar area</td></tr>
        <tr><td><code>content</code></td><td>Main content area</td></tr>
        <tr><td><code>banner</code></td><td>Banner or announcement</td></tr>
        <tr><td><code>toc</code></td><td>Table of contents</td></tr>
      </tbody>
    </table>

    <h3>Landing Page Example</h3>
    <p>The <code>landing</code> page template defines areas for <code>hero</code>, <code>feature</code>, and <code>cta</code>. Use <code>data-layout-area</code> to assign sections to these areas.</p>

    <code-block language="html" label="Named area overrides on landing page">{namedAreaExample}</code-block>

    <div class="key-concept">
      <strong>When to use explicit vs auto:</strong> Use auto identity (the default) for standard page structure. Use <code>data-layout-area</code> when you need sections that do not map to standard semantic elements, or when using the <code>landing</code> template.
    </div>

    <p><a href="/docs/examples/demos/page-layout-landing.html">View the landing page demo &rarr;</a></p>
  </section>

  <!-- Section 4: Main-Level Identity -->
  <section id="main-level">
    <h2>Main-Level Identity</h2>
    <p>The <code>&lt;main&gt;</code> element can have its own <code>data-layout</code> to create a second tier of grid identity. Children of <code>main[data-layout]</code> auto-register to <code>main-*</code> areas.</p>

    <h3>Main-Level Grid Areas</h3>
    <table>
      <thead>
        <tr>
          <th>Element</th>
          <th>Grid Area</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>&lt;header&gt;</code></td><td><code>main-header</code></td></tr>
        <tr><td><code>&lt;nav&gt;</code></td><td><code>main-nav</code></td></tr>
        <tr><td><code>&lt;article&gt;</code></td><td><code>main-article</code></td></tr>
        <tr><td><code>&lt;section&gt;</code></td><td><code>main-section</code></td></tr>
        <tr><td><code>&lt;aside&gt;</code></td><td><code>main-aside</code></td></tr>
        <tr><td><code>&lt;footer&gt;</code></td><td><code>main-footer</code></td></tr>
      </tbody>
    </table>

    <h3>Available Main-Level Templates</h3>
    <table>
      <thead>
        <tr>
          <th>Template</th>
          <th>Grid</th>
          <th>Use Case</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>sidebar-left</code></td><td><code>main-nav</code> | <code>main-article</code></td><td>Documentation with sub-navigation</td></tr>
        <tr><td><code>sidebar-right</code></td><td><code>main-article</code> | <code>main-aside</code></td><td>Article with table of contents</td></tr>
      </tbody>
    </table>

    <code-block language="html" label="Main-level sidebar with identity">{mainSidebarExample}</code-block>

    <p>Main-level templates also support <code>:has()</code> adaptation: if the nav or aside is absent, the layout falls back to a single column.</p>
  </section>

  <!-- Section 5: Component-Level Regions -->
  <section id="component-level">
    <h2>Component-Level Regions</h2>
    <p>Two new layout types extend grid identity down to individual components.</p>

    <h3>Regions</h3>
    <p><code>data-layout="regions"</code> creates a header / content / footer grid on any element. Semantic children auto-place without explicit attributes.</p>

    <table>
      <thead>
        <tr>
          <th>Element</th>
          <th>Grid Area</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>&lt;header&gt;</code> or <code>[slot="header"]</code></td><td><code>header</code></td></tr>
        <tr><td><code>&lt;section&gt;</code> or <code>[slot="content"]</code></td><td><code>content</code></td></tr>
        <tr><td><code>&lt;footer&gt;</code> or <code>[slot="footer"]</code></td><td><code>footer</code></td></tr>
        <tr><td>Any other child</td><td><code>content</code> (implicit)</td></tr>
      </tbody>
    </table>

    <code-block language="html" label="Regions layout">{regionsExample}</code-block>

    <h3>Grid of Region Cards</h3>
    <p>The big win: combine <code>data-layout="grid"</code> with <code>data-layout="regions"</code> articles for card lists where each card auto-structures itself.</p>

    <code-block language="html" label="Grid + regions card list">{regionsGridExample}</code-block>

    <p><a href="/docs/examples/demos/regions-basic.html">View the regions demo &rarr;</a></p>

    <h3>Media Object</h3>
    <p><code>data-layout="media"</code> places a figure and content side by side &mdash; the most common component pattern on the web.</p>

    <table>
      <thead>
        <tr>
          <th>Element</th>
          <th>Grid Area</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>&lt;figure&gt;</code>, <code>&lt;img&gt;</code>, <code>&lt;picture&gt;</code>, <code>&lt;video&gt;</code>, or <code>[slot="figure"]</code></td><td><code>figure</code></td></tr>
        <tr><td>Any other child</td><td><code>content</code></td></tr>
      </tbody>
    </table>

    <code-block language="html" label="Media object">{mediaExample}</code-block>

    <table>
      <thead>
        <tr>
          <th>Modifier</th>
          <th>Effect</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>data-layout-reverse</code></td><td>Content on left, figure on right</td></tr>
        <tr><td><code>data-layout-align</code></td><td>Vertical alignment: <code>start</code>, <code>center</code>, <code>end</code>, <code>stretch</code></td></tr>
        <tr><td><code>data-layout-gap</code></td><td>Gap between figure and content</td></tr>
      </tbody>
    </table>

    <p>Media objects stack vertically in containers narrower than 25rem (via container query).</p>

    <p><a href="/docs/examples/demos/media-basic.html">View the media object demo &rarr;</a></p>
  </section>

  <!-- Section 6: Composing Tiers -->
  <section id="composing-tiers">
    <h2>Composing Tiers</h2>
    <p>The full power of grid identity appears when you nest all three tiers. Each tier is scoped to its own container, so area names never collide.</p>

    <code-block language="html" label="Three-tier nesting">{threeTierExample}</code-block>

    <p>In this example:</p>
    <ul>
      <li><strong>Tier 1</strong> &mdash; <code>data-page-layout="sidebar-left"</code> on body places the header, nav, main, and footer into page-level grid areas.</li>
      <li><strong>Tier 2</strong> &mdash; <code>data-layout="sidebar-right"</code> on main creates a secondary sidebar for the table of contents, using <code>main-article</code> and <code>main-aside</code> areas.</li>
      <li><strong>Tier 3</strong> &mdash; <code>data-layout="regions"</code> on article auto-places its header, section, and footer into component-level areas.</li>
    </ul>

    <div class="key-concept">
      <strong>No collisions:</strong> Each tier uses namespaced area names (<code>body-*</code>, <code>main-*</code>, <code>header</code>/<code>content</code>/<code>footer</code>). They compose freely without conflict.
    </div>

    <p><a href="/docs/examples/demos/nested-grid-identity.html">View the three-tier nesting demo &rarr;</a></p>
  </section>

  <!-- Section 7: Quick Reference -->
  <section id="quick-reference">
    <h2>Quick Reference</h2>

    <h3>Utilities</h3>
    <table>
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Effect</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>data-layout-sticky</code></td><td>Sticky positioning for header, nav, or aside</td></tr>
        <tr><td><code>data-layout-bleed</code></td><td>Span all grid columns (full-width)</td></tr>
        <tr><td><code>data-layout-nowrap</code></td><td>Prevent responsive collapse to stack</td></tr>
        <tr><td><code>data-sidebar="collapsed"</code></td><td>Use collapsed sidebar width (64px)</td></tr>
        <tr><td><code>data-sidebar="hidden"</code></td><td>Hide the sidebar nav entirely</td></tr>
        <tr><td><code>data-layout-area</code></td><td>Explicit grid area override</td></tr>
      </tbody>
    </table>

    <h3>Named Containers</h3>
    <p>Page layout regions have named containers for targeted <code>@container</code> queries. This lets component authors write precision queries that target a specific region rather than the nearest anonymous container.</p>

    <table>
      <thead>
        <tr>
          <th>Context</th>
          <th>Element</th>
          <th>Container Name</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>data-page-layout</code></td><td><code>&lt;main&gt;</code></td><td><code>region-main</code></td></tr>
        <tr><td><code>data-page-layout</code></td><td><code>&lt;nav&gt;</code></td><td><code>region-nav</code></td></tr>
        <tr><td><code>data-page-layout</code></td><td><code>&lt;aside&gt;</code></td><td><code>region-aside</code></td></tr>
        <tr><td><code>main[data-layout="sidebar-left"]</code></td><td><code>&lt;nav&gt;</code></td><td><code>region-main-nav</code></td></tr>
        <tr><td><code>main[data-layout="sidebar-left"]</code></td><td><code>&lt;article&gt;</code></td><td><code>region-main-content</code></td></tr>
        <tr><td><code>main[data-layout="sidebar-right"]</code></td><td><code>&lt;article&gt;</code></td><td><code>region-main-content</code></td></tr>
        <tr><td><code>main[data-layout="sidebar-right"]</code></td><td><code>&lt;aside&gt;</code></td><td><code>region-main-aside</code></td></tr>
      </tbody>
    </table>

    <p>Example: adapt typography when the main content area is narrow:</p>
    <code-block language="css" label="Targeted container query">{containerQueryExample}</code-block>

    <p>For non-semantic elements that need containment, use the <code>data-container</code> attribute:</p>
    <code-block language="html" label="Explicit container opt-in">{dataContainerExample}</code-block>

    <p>Available presets: <code>card</code>, <code>panel</code>, <code>media</code>. Use the boolean form <code>data-container</code> (no value) for anonymous containment.</p>

    <h3>Related Pages</h3>
    <layout-grid data-layout-min="200px" data-layout-gap="m">
      <a href="/docs/semantic-layouts/" class="section-card">
        <h4>Semantic Layouts</h4>
        <p>Component-level data-layout attributes.</p>
      </a>
      <a href="/docs/attributes/" class="section-card">
        <h4>Attributes Reference</h4>
        <p>Complete data-layout API documentation.</p>
      </a>
      <a href="/docs/patterns/application/shells/" class="section-card">
        <h4>Shell Patterns</h4>
        <p>Page layout patterns in practice.</p>
      </a>
      <a href="/docs/examples/" class="section-card">
        <h4>Demos</h4>
        <p>Interactive layout demonstrations.</p>
      </a>
    </layout-grid>
  </section>
</DocsLayout>
