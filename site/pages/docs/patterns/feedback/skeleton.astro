---
import PatternLayout from '../../../../layouts/PatternLayout.astro';

const skeletonTextCode = `<layout-card aria-busy="true" aria-label="Loading content">
  <layout-stack data-layout-gap="s">
    <div class="skeleton skeleton-heading"></div>
    <div class="skeleton skeleton-line"></div>
    <div class="skeleton skeleton-line"></div>
    <div class="skeleton skeleton-line"></div>
  </layout-stack>
</layout-card>`;

const skeletonCardCode = `<div class="card-skeleton" aria-busy="true" aria-label="Loading card">
  <layout-card>
    <div class="skeleton skeleton-image"></div>
    <div class="card-content">
      <layout-stack data-layout-gap="m">
        <layout-stack data-layout-gap="s">
          <div class="skeleton skeleton-heading"></div>
          <div class="skeleton skeleton-line full"></div>
          <div class="skeleton skeleton-line medium"></div>
          <div class="skeleton skeleton-line short"></div>
        </layout-stack>
        <div class="skeleton skeleton-button"></div>
      </layout-stack>
    </div>
  </layout-card>
</div>`;

const skeletonTableCode = `<layout-card data-padding="none" aria-busy="true" aria-label="Loading table data">
  <table class="data-table">
    <thead>
      <tr>
        <th scope="col" style="width: 40px;"></th>
        <th scope="col">User</th>
        <th scope="col">Email</th>
        <th scope="col">Role</th>
        <th scope="col">Status</th>
        <th scope="col">Joined</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><div class="skeleton skeleton-checkbox"></div></td>
        <td>
          <div class="user-cell">
            <div class="skeleton skeleton-avatar"></div>
            <div class="skeleton skeleton-line name"></div>
          </div>
        </td>
        <td><div class="skeleton skeleton-line email"></div></td>
        <td><div class="skeleton skeleton-line role"></div></td>
        <td><div class="skeleton skeleton-line status"></div></td>
        <td><div class="skeleton skeleton-line date"></div></td>
      </tr>
      <!-- Additional rows... -->
    </tbody>
  </table>
</layout-card>`;

const skeletonCssCode = `@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

.skeleton {
  background: var(--color-border);
  border-radius: var(--radius-s);
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

.skeleton-heading {
  height: 1.75rem;
  width: 60%;
}

.skeleton-line {
  height: 1rem;
}

.skeleton-line:nth-child(1) { width: 100%; }
.skeleton-line:nth-child(2) { width: 100%; }
.skeleton-line:nth-child(3) { width: 75%; }

.skeleton-image {
  aspect-ratio: 16 / 9;
  width: 100%;
  border-radius: var(--radius-m);
}

.skeleton-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
}

.skeleton-button {
  height: 2.5rem;
  width: 8rem;
  border-radius: var(--radius-m);
}`;
---

<PatternLayout
  title="Skeleton"
  description="Skeleton loading patterns to display placeholder content while data is being fetched. Reduce perceived load time with animated placeholders."
  patternName="Skeleton"
  category="feedback"
  currentPath="/docs/patterns/feedback/skeleton/"
>
  <section>
    <h2>Overview</h2>
    <layout-text>
      <p>Skeleton loaders create a visual preview of content that will appear, giving users an immediate sense of the page structure. They are preferable to spinners for content-heavy pages as they maintain layout stability and feel faster.</p>
      <p><strong>Key features:</strong></p>
      <ul>
        <li>Pure CSS animation using <code>@keyframes</code> for smooth pulse effect</li>
        <li>Accessible loading states with <code>aria-busy="true"</code></li>
        <li>Flexible placeholder sizes matching your content dimensions</li>
        <li>Uses Vanilla Breeze CSS custom properties for consistent theming</li>
        <li>Layout primitives like <code>&lt;layout-stack&gt;</code> for structure</li>
      </ul>
    </layout-text>
  </section>

  <section>
    <h2>Text Placeholder</h2>
    <layout-text>
      <p>Display placeholder lines for text content like paragraphs. Use varying widths to simulate natural text flow, with the last line typically shorter.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/skeleton-text.html"
      url="https://vanilla-breeze.dev/skeleton-text"
      title="Skeleton - Text Placeholder"
      shadow>
    </browser-window>

    <code-block language="html" label="skeleton-text.html">{skeletonTextCode}</code-block>
  </section>

  <section>
    <h2>Card Placeholder</h2>
    <layout-text>
      <p>A complete card skeleton with image placeholder, heading, text lines, and button. Use this pattern for product cards, blog posts, or any content card that loads asynchronously.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/skeleton-card.html"
      url="https://vanilla-breeze.dev/skeleton-card"
      title="Skeleton - Card Placeholder"
      shadow>
    </browser-window>

    <code-block language="html" label="skeleton-card.html">{skeletonCardCode}</code-block>
  </section>

  <section>
    <h2>Table Placeholder</h2>
    <layout-text>
      <p>Table skeleton with real headers and placeholder rows. Includes avatar, checkbox, and various cell widths to match typical table layouts. Use this when loading tabular data.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/skeleton-table.html"
      url="https://vanilla-breeze.dev/skeleton-table"
      title="Skeleton - Table Placeholder"
      shadow>
    </browser-window>

    <code-block language="html" label="skeleton-table.html">{skeletonTableCode}</code-block>
  </section>

  <section>
    <h2>CSS Animation</h2>
    <layout-text>
      <p>The skeleton animation uses a simple pulse effect that fades between two opacity values. This is performant and works across all browsers.</p>
    </layout-text>

    <code-block language="css" label="skeleton.css">{skeletonCssCode}</code-block>
  </section>

  <section>
    <h2>Configuration</h2>
    <layout-text>
      <p>Skeleton elements are built from simple divs with CSS classes. Here are the key styling options:</p>
    </layout-text>

    <table class="props-table">
      <thead>
        <tr>
          <th>Class</th>
          <th>Purpose</th>
          <th>Customization</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>.skeleton</code></td>
          <td>Base class with animation</td>
          <td>Change <code>animation-duration</code> for speed</td>
        </tr>
        <tr>
          <td><code>.skeleton-heading</code></td>
          <td>Heading placeholder</td>
          <td>Adjust <code>height</code> and <code>width</code></td>
        </tr>
        <tr>
          <td><code>.skeleton-line</code></td>
          <td>Text line placeholder</td>
          <td>Set <code>width</code> per line for variety</td>
        </tr>
        <tr>
          <td><code>.skeleton-image</code></td>
          <td>Image placeholder</td>
          <td>Adjust <code>aspect-ratio</code> to match images</td>
        </tr>
        <tr>
          <td><code>.skeleton-avatar</code></td>
          <td>Circular avatar placeholder</td>
          <td>Set <code>width</code>/<code>height</code> for size</td>
        </tr>
        <tr>
          <td><code>.skeleton-button</code></td>
          <td>Button placeholder</td>
          <td>Match your button dimensions</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Animation Variants</h2>
    <layout-text>
      <p>You can customize the animation effect to match your brand or preferences:</p>
    </layout-text>

    <code-block language="css" label="animation-variants.css">{`/* Default pulse animation */
@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}

/* Shimmer/wave animation (left-to-right) */
@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-border) 0%,
    var(--color-surface-raised) 50%,
    var(--color-border) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}`}</code-block>
  </section>

  <section>
    <h2>Usage Notes</h2>
    <layout-text>
      <ul>
        <li><strong>Accessibility:</strong> Always add <code>aria-busy="true"</code> to containers and an <code>aria-label</code> describing the loading state. Remove these when content loads.</li>
        <li><strong>Animation performance:</strong> The pulse animation only animates <code>opacity</code>, which is highly performant. Avoid animating layout properties.</li>
        <li><strong>Layout stability:</strong> Match skeleton dimensions to actual content to prevent layout shift (CLS) when content loads.</li>
        <li><strong>Screen readers:</strong> Consider adding <code>role="status"</code> with a live region announcement when content finishes loading.</li>
        <li><strong>Duration:</strong> Use skeletons for loads under 3-5 seconds. For longer waits, consider progress indicators with estimated time.</li>
        <li><strong>Reduce motion:</strong> Respect <code>prefers-reduced-motion</code> by disabling or reducing animations for users who prefer it.</li>
      </ul>
    </layout-text>

    <code-block language="css" label="reduced-motion.css">{`@media (prefers-reduced-motion: reduce) {
  .skeleton {
    animation: none;
    opacity: 0.6;
  }
}`}</code-block>
  </section>

  <section>
    <h2>Related</h2>
    <layout-grid data-layout-min="200px" data-layout-gap="m">
      <a href="/docs/patterns/feedback/feedback-states/" class="section-card">
        <h3>Feedback States</h3>
        <p>Unified empty, loading, and error states</p>
      </a>
      <a href="/docs/patterns/feedback/empty-states/" class="section-card">
        <h3>Empty States</h3>
        <p>When there's no content to display</p>
      </a>
      <a href="/docs/patterns/feedback/error-pages/" class="section-card">
        <h3>Error Pages</h3>
        <p>404, 500, and maintenance pages</p>
      </a>
    </layout-grid>
  </section>
</PatternLayout>
