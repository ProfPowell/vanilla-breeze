---
import PatternLayout from '../../../../layouts/PatternLayout.astro';

const fieldsetStyles = `fieldset {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-l);
  padding: var(--size-l);
}

fieldset legend {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  padding: 0 var(--size-xs);
}`;

const settingsNavStyles = `.settings-nav {
  background: var(--color-surface);
  border-inline-end: 1px solid var(--color-border);
  padding: var(--size-l);
  min-block-size: 100vh;
}

.settings-nav h2 {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-muted);
  margin: 0 0 var(--size-m) var(--size-s);
}

.settings-nav a {
  display: flex;
  align-items: center;
  gap: var(--size-s);
  padding: var(--size-s) var(--size-m);
  color: var(--color-text-muted);
  text-decoration: none;
  border-radius: var(--radius-m);
  transition: color var(--duration-fast) var(--ease-default),
              background var(--duration-fast) var(--ease-default);
}

.settings-nav a:hover {
  color: var(--color-text);
  background: var(--color-surface-raised);
}

.settings-nav a[aria-current="page"] {
  color: var(--color-interactive);
  background: var(--color-interactive-muted);
  font-weight: var(--font-weight-medium);
}`;

const tabNavStyles = `.tab-list {
  display: flex;
  gap: 0;
  list-style: none;
  padding: 0;
  margin: 0;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
}

.tab {
  padding: var(--size-m) var(--size-l);
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-muted);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-default);
  margin-bottom: -1px;
}

.tab:hover {
  color: var(--color-text);
  background: var(--color-surface-raised);
}

.tab[aria-selected="true"] {
  color: var(--color-interactive);
  border-bottom-color: var(--color-interactive);
}

.tab-panel {
  padding: var(--size-l);
}

.tab-panel[hidden] {
  display: none;
}`;
---

<PatternLayout
  title="Settings"
  description="Settings page patterns with grouped sections, sidebar navigation, and tabbed interfaces for application preferences and configuration."
  patternName="Settings"
  category="application"
  currentPath="/docs/patterns/application/settings/"
>
  <section>
    <h2>Overview</h2>
    <layout-text>
      <p>Settings patterns provide organized interfaces for managing user preferences, account configuration, and application options. These layouts scale from simple single-page forms to complex multi-section configurations.</p>
      <p><strong>Key features:</strong></p>
      <ul>
        <li>Grouped sections with fieldset and legend for logical organization</li>
        <li>Sidebar navigation for multi-page settings with persistent nav</li>
        <li>Tab-based organization for compact, single-page layouts</li>
        <li>Toggle switches and radio groups for preference selection</li>
        <li>Clear save/cancel actions with form validation</li>
      </ul>
    </layout-text>
  </section>

  <section>
    <h2>Grouped Sections</h2>
    <layout-text>
      <p>A straightforward settings layout using fieldset sections with legend headings. Each section groups related settings together, making it easy to scan and understand the form structure.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/settings-sections.html"
      url="https://app.example.com/settings"
      title="Grouped Sections Settings"
      shadow>
    </browser-window>

    <code-block language="html" label="settings-sections.html">&lt;section data-layout="center" data-layout-max="normal"&gt;
  &lt;form action="/settings" method="POST" data-layout="stack" data-layout-gap="xl"&gt;
    &lt;header data-layout="stack" data-layout-gap="xs"&gt;
      &lt;h1&gt;Settings&lt;/h1&gt;
      &lt;p class="text-muted"&gt;Manage your account settings and preferences.&lt;/p&gt;
    &lt;/header&gt;

    &lt;!-- Profile Section --&gt;
    &lt;fieldset&gt;
      &lt;legend&gt;Profile&lt;/legend&gt;
      &lt;div data-layout="stack" data-layout-gap="l"&gt;
        &lt;form-field&gt;
          &lt;label for="name"&gt;Full name&lt;/label&gt;
          &lt;input type="text" id="name" name="name" value="John Doe"/&gt;
        &lt;/form-field&gt;
        &lt;form-field&gt;
          &lt;label for="email"&gt;Email address&lt;/label&gt;
          &lt;input type="email" id="email" name="email" value="john@example.com"/&gt;
        &lt;/form-field&gt;
        &lt;form-field&gt;
          &lt;label for="bio"&gt;Bio&lt;/label&gt;
          &lt;textarea id="bio" name="bio" rows="4"&gt;&lt;/textarea&gt;
        &lt;/form-field&gt;
      &lt;/div&gt;
    &lt;/fieldset&gt;

    &lt;!-- Notifications Section --&gt;
    &lt;fieldset&gt;
      &lt;legend&gt;Notifications&lt;/legend&gt;
      &lt;div data-layout="stack" data-layout-gap="m"&gt;
        &lt;label&gt;
          &lt;input type="checkbox" name="notify_comments" checked/&gt;
          &lt;span&gt;Comments on your posts&lt;/span&gt;
        &lt;/label&gt;
        &lt;label&gt;
          &lt;input type="checkbox" name="notify_mentions" checked/&gt;
          &lt;span&gt;Mentions by other users&lt;/span&gt;
        &lt;/label&gt;
      &lt;/div&gt;
    &lt;/fieldset&gt;

    &lt;!-- Privacy Section --&gt;
    &lt;fieldset&gt;
      &lt;legend&gt;Privacy&lt;/legend&gt;
      &lt;div data-layout="stack" data-layout-gap="m"&gt;
        &lt;label&gt;
          &lt;input type="radio" name="visibility" value="public"/&gt;
          &lt;span&gt;Public - Anyone can view your profile&lt;/span&gt;
        &lt;/label&gt;
        &lt;label&gt;
          &lt;input type="radio" name="visibility" value="private" checked/&gt;
          &lt;span&gt;Private - Only approved followers&lt;/span&gt;
        &lt;/label&gt;
      &lt;/div&gt;
    &lt;/fieldset&gt;

    &lt;footer data-layout="cluster" data-layout-justify="end" data-layout-gap="m"&gt;
      &lt;button type="button" class="secondary"&gt;Cancel&lt;/button&gt;
      &lt;button type="submit"&gt;Save changes&lt;/button&gt;
    &lt;/footer&gt;
  &lt;/form&gt;
&lt;/section&gt;</code-block>

    <h3>Section Fieldset Styles</h3>
    <code-block language="css" label="Fieldset styling">{fieldsetStyles}</code-block>
  </section>

  <section>
    <h2>Sidebar Navigation</h2>
    <layout-text>
      <p>A settings layout with persistent sidebar navigation for applications with many configuration sections. The sidebar provides quick access to different settings categories while the main area displays the selected section.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/settings-sidebar.html"
      url="https://app.example.com/settings/general"
      title="Sidebar Navigation Settings"
      shadow>
    </browser-window>

    <code-block language="html" label="settings-sidebar.html">&lt;body data-page-layout="sidebar-left" data-layout-gap="none" data-layout-sidebar-width="narrow"&gt;
  &lt;!-- Settings Navigation --&gt;
  &lt;nav class="settings-nav" aria-label="Settings navigation"&gt;
    &lt;h2&gt;Settings&lt;/h2&gt;
    &lt;ul data-layout="stack" data-layout-gap="xs"&gt;
      &lt;li&gt;
        &lt;a href="#" aria-current="page"&gt;
          &lt;icon-wc name="cog"&gt;&lt;/icon-wc&gt;
          General
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#"&gt;
          &lt;icon-wc name="shield-check"&gt;&lt;/icon-wc&gt;
          Security
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#"&gt;
          &lt;icon-wc name="bell"&gt;&lt;/icon-wc&gt;
          Notifications
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#"&gt;
          &lt;icon-wc name="credit-card"&gt;&lt;/icon-wc&gt;
          Billing
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#"&gt;
          &lt;icon-wc name="puzzle-piece"&gt;&lt;/icon-wc&gt;
          Integrations
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;

  &lt;!-- Settings Content --&gt;
  &lt;main class="settings-content"&gt;
    &lt;div data-layout="stack" data-layout-gap="xl"&gt;
      &lt;header&gt;
        &lt;h1&gt;General Settings&lt;/h1&gt;
        &lt;p class="text-muted"&gt;Manage your account preferences.&lt;/p&gt;
      &lt;/header&gt;

      &lt;section class="settings-section"&gt;
        &lt;h2&gt;Account Information&lt;/h2&gt;
        &lt;!-- Form fields --&gt;
      &lt;/section&gt;
    &lt;/div&gt;
  &lt;/main&gt;
&lt;/body&gt;</code-block>

    <h3>Sidebar Navigation Styles</h3>
    <code-block language="css" label="Settings navigation CSS">{settingsNavStyles}</code-block>
  </section>

  <section>
    <h2>Tab Navigation</h2>
    <layout-text>
      <p>A compact settings layout using tabs for section navigation. This pattern works well when settings fit on a single page and users need to switch between a few main categories quickly. Toggle switches use VB's built-in <code>&lt;input data-switch&gt;</code> for on/off settings.</p>
    </layout-text>

    <browser-window
      src="/docs/patterns/demos/settings-tabs.html"
      url="https://app.example.com/settings"
      title="Tab Navigation Settings"
      shadow>
    </browser-window>

    <code-block language="html" label="settings-tabs.html">&lt;div class="settings-card"&gt;
  &lt;!-- Tab List --&gt;
  &lt;div role="tablist" class="tab-list" aria-label="Settings sections"&gt;
    &lt;button role="tab" class="tab" id="tab-account"
            aria-selected="true" aria-controls="panel-account"&gt;
      Account
    &lt;/button&gt;
    &lt;button role="tab" class="tab" id="tab-security"
            aria-selected="false" aria-controls="panel-security" tabindex="-1"&gt;
      Security
    &lt;/button&gt;
    &lt;button role="tab" class="tab" id="tab-notifications"
            aria-selected="false" aria-controls="panel-notifications" tabindex="-1"&gt;
      Notifications
    &lt;/button&gt;
    &lt;button role="tab" class="tab" id="tab-billing"
            aria-selected="false" aria-controls="panel-billing" tabindex="-1"&gt;
      Billing
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;!-- Tab Panels --&gt;
  &lt;div role="tabpanel" class="tab-panel" id="panel-account"
       aria-labelledby="tab-account"&gt;
    &lt;!-- Account settings form --&gt;
  &lt;/div&gt;

  &lt;div role="tabpanel" class="tab-panel" id="panel-security"
       aria-labelledby="tab-security" hidden&gt;
    &lt;!-- Security settings --&gt;
  &lt;/div&gt;
&lt;/div&gt;</code-block>

    <h3>Tab Styles</h3>
    <code-block language="css" label="Tab navigation CSS">{tabNavStyles}</code-block>

    <h3>Toggle Switches</h3>
    <layout-text>
      <p>Use VB's built-in <code>&lt;input type="checkbox" data-switch&gt;</code> for toggle settings — no custom CSS needed. Size variants are available with <code>data-switch="sm"</code> and <code>data-switch="lg"</code>.</p>
    </layout-text>
    <code-block language="html" label="Toggle switch usage">&lt;!-- Default toggle --&gt;
&lt;input type="checkbox" data-switch name="email_notifications"
       aria-labelledby="email-notifications-label"/&gt;

&lt;!-- Small toggle --&gt;
&lt;input type="checkbox" data-switch="sm" name="compact_toggle"/&gt;

&lt;!-- Large toggle --&gt;
&lt;input type="checkbox" data-switch="lg" name="prominent_toggle"/&gt;</code-block>
  </section>

  <section>
    <h2>Configuration</h2>
    <layout-text>
      <p>Settings patterns use these layout elements and attributes:</p>
    </layout-text>

    <h3>Page Layout</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Values</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-page-layout</code></td>
          <td><code>sidebar-left</code></td>
          <td>Creates a sidebar + main content layout for settings navigation.</td>
        </tr>
        <tr>
          <td><code>data-layout-sidebar-width</code></td>
          <td><code>narrow</code> <code>normal</code> <code>wide</code></td>
          <td>Controls the width of the settings sidebar. Use <code>narrow</code> for icon + text nav.</td>
        </tr>
        <tr>
          <td><code>data-layout-gap</code></td>
          <td><code>none</code> <code>xs</code> <code>s</code> <code>m</code> <code>l</code> <code>xl</code></td>
          <td>Gap between sidebar and content. Use <code>none</code> for seamless border connection.</td>
        </tr>
      </tbody>
    </table>

    <h3>Form Structure</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Element</th>
          <th>Purpose</th>
          <th>Usage</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>&lt;fieldset&gt;</code></td>
          <td>Group related settings</td>
          <td>Wrap each logical section (Profile, Notifications, Privacy).</td>
        </tr>
        <tr>
          <td><code>&lt;legend&gt;</code></td>
          <td>Section heading</td>
          <td>Provides accessible label for the fieldset group.</td>
        </tr>
        <tr>
          <td><code>&lt;form-field&gt;</code></td>
          <td>Input wrapper</td>
          <td>Wraps label, input, and validation messages.</td>
        </tr>
        <tr>
          <td><code>data-layout="stack"</code></td>
          <td>Vertical spacing</td>
          <td>Apply to any element for vertical spacing with consistent gaps.</td>
        </tr>
      </tbody>
    </table>

    <h3>Tab Accessibility</h3>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Element</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>role="tablist"</code></td>
          <td>Tab container</td>
          <td>Identifies the tab navigation container.</td>
        </tr>
        <tr>
          <td><code>role="tab"</code></td>
          <td>Tab buttons</td>
          <td>Identifies each tab button.</td>
        </tr>
        <tr>
          <td><code>role="tabpanel"</code></td>
          <td>Content panels</td>
          <td>Identifies each tab content area.</td>
        </tr>
        <tr>
          <td><code>aria-selected</code></td>
          <td>Tab buttons</td>
          <td>Indicates which tab is currently active.</td>
        </tr>
        <tr>
          <td><code>aria-controls</code></td>
          <td>Tab buttons</td>
          <td>Links tab to its associated panel.</td>
        </tr>
        <tr>
          <td><code>aria-labelledby</code></td>
          <td>Tab panels</td>
          <td>Links panel to its associated tab for labeling.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>Usage Notes</h2>
    <layout-text>
      <ul>
        <li><strong>Toggle switches:</strong> Use <code>&lt;input type="checkbox" data-switch&gt;</code> for on/off settings — VB provides complete toggle styling with size variants (<code>data-switch="sm"</code>, <code>data-switch="lg"</code>)</li>
        <li><strong>Setting rows:</strong> Use <code>&lt;hgroup class="tight"&gt;</code> for heading + description pairs in setting rows — provides automatic muted text and margin resets</li>
        <li><strong>Form validation:</strong> Show validation errors inline near the relevant field, not at the top of the page</li>
        <li><strong>Save states:</strong> Provide clear feedback when settings are saved; consider auto-save for simple toggles</li>
        <li><strong>Section organization:</strong> Group settings logically by category; put most-used settings first</li>
        <li><strong>Keyboard navigation:</strong> Tabs should support arrow key navigation between tabs, and Enter/Space to activate</li>
        <li><strong>Loading states:</strong> Show skeleton placeholders while loading settings to prevent layout shift</li>
        <li><strong>Confirmation dialogs:</strong> Confirm before destructive actions like account deletion or password changes</li>
        <li><strong>Deep linking:</strong> Support URL fragments or query params to link directly to specific settings sections</li>
        <li><strong>Mobile considerations:</strong> Convert sidebar nav to a dropdown or stacked layout on small screens</li>
      </ul>
    </layout-text>
  </section>

  <section>
    <h2>Related</h2>
    <layout-grid data-layout-min="200px" data-layout-gap="m">
      <a href="/docs/patterns/application/dashboard/" class="section-card">
        <h3>Dashboard</h3>
        <p>Admin dashboards with stats and data tables</p>
      </a>
      <a href="/docs/patterns/application/shells/" class="section-card">
        <h3>App Shells</h3>
        <p>Application shell layouts with navigation</p>
      </a>
      <a href="/docs/patterns/forms/wizard/" class="section-card">
        <h3>Wizard</h3>
        <p>Multi-step form workflows</p>
      </a>
      <a href="/docs/elements/custom-elements/form-field/" class="section-card">
        <h3>Form Field</h3>
        <p>Form input wrapper with labels and validation</p>
      </a>
      <a href="/docs/elements/custom-elements/icon-wc/" class="section-card">
        <h3>Icon</h3>
        <p>SVG icon component with Lucide icons</p>
      </a>
    </layout-grid>
  </section>
</PatternLayout>
