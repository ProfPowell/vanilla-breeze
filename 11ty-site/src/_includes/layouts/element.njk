{#
  Element layout — for individual element documentation pages.
  Includes sidebar navigation (3 categories) and TOC.

  Front matter variables:
    elementName — element tag name (e.g., "button")
    category    — 'native', 'custom', or 'component'
    nativeGroup — which native group to open (e.g., 'Forms')
    currentPath — current page path for aria-current
    title       — page title
    description — element description
#}
{% extends "layouts/base.njk" %}

{% set dataPage = "docs" %}
{% set currentSection = "api" %}
{% set includeDocs = true %}

{%- set elements = navigation.elements -%}

{%- set categoryMap = {
  "native": { "label": elements.native.label, "href": "/docs/elements/native/" },
  "custom": { "label": elements.custom.label, "href": "/docs/elements/custom-elements/" },
  "component": { "label": elements.component.label, "href": "/docs/elements/web-components/" }
} -%}
{%- set crumb = categoryMap[category] -%}

{% block pageContent %}
<main data-pagefind-body>
  {% include "partials/sidebar-nav-drawer.njk" %}

  <layout-sidebar data-layout-gap="xl" data-layout-sidebar-width="narrow" data-layout-content-min="60">
    <nav class="tree" id="nav-drawer" data-layout-density="compact" aria-label="Elements navigation" data-vt="sidebar">
      <label for="nav-drawer-toggle" class="nav-drawer-close" aria-label="Close navigation">
        <icon-wc name="x"></icon-wc>
      </label>

      <!-- Native Elements -->
      <details{% if category == 'native' %} open{% endif %}>
        <summary>{{ elements.native.label }}</summary>
        {% for group in elements.native.groups %}
        <details{% if nativeGroup == group.label %} open{% endif %}>
          <summary>{{ group.label }}</summary>
          <ul>
            {% for item in group.items %}
            <li>
              <a href="{{ item.href }}"{% if currentPath == item.href %} aria-current="page"{% endif %}>
                {{ item.name }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </details>
        {% endfor %}
      </details>

      <!-- Custom Elements -->
      <details{% if category == 'custom' %} open{% endif %}>
        <summary>{{ elements.custom.label }}</summary>
        <ul>
          {% for item in elements.custom.items %}
          <li>
            <a href="{{ item.href }}"{% if currentPath == item.href %} aria-current="page"{% endif %}>
              {{ item.name }}
            </a>
          </li>
          {% endfor %}
        </ul>
      </details>

      <!-- Web Components -->
      <details{% if category == 'component' %} open{% endif %}>
        <summary>{{ elements.component.label }}</summary>
        <ul>
          {% for item in elements.component.items %}
          <li>
            <a href="{{ item.href }}"{% if currentPath == item.href %} aria-current="page"{% endif %}>
              {{ item.name }}
            </a>
          </li>
          {% endfor %}
        </ul>
      </details>
    </nav>

    <layout-sidebar data-layout-side="end" data-layout-sidebar-width="narrow" data-layout-gap="xl">
      <aside>
        <page-toc data-levels="h2,h3" data-scope="article"></page-toc>
      </aside>
      <article>
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <ol>
            <li><a href="/docs/elements/">Elements</a></li>
            <li><a href="{{ crumb.href }}">{{ crumb.label }}</a></li>
            <li><span aria-current="page">{{ elementName | escape }}</span></li>
          </ol>
        </nav>
        <h1>{{ elementName | escape }}</h1>
        <p class="lead">{{ description }}</p>

        <heading-links data-levels="h2,h3">
          {{ content | safe }}
        </heading-links>
      </article>
    </layout-sidebar>
  </layout-sidebar>
</main>
{% endblock %}
