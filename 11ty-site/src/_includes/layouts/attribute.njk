{#
  Attribute layout — for attribute documentation pages.
  Includes sidebar navigation (native + data attribute categories) and TOC.

  Front matter variables:
    attributeName  — attribute name (e.g., "data-layout" or "loading")
    attributeType  — 'native' or 'data'
    category       — attribute category key (e.g., 'layout', 'formatting', 'form-controls')
    nativeGroup    — which native group to open (e.g., 'Global', 'Performance')
    currentPath    — current page path for aria-current
    title          — page title
    description    — attribute description
#}
{% extends "layouts/base.njk" %}

{% set dataPage = "docs" %}
{% set currentSection = "api" %}
{% set includeDocs = true %}

{%- set attrs = navigation.attributes -%}

{%- set categoryMap = {
  "native": { "label": "Native Attributes", "href": "/docs/attributes/" },
  "data": { "label": "Data Attributes", "href": "/docs/attributes/" }
} -%}
{%- set crumb = categoryMap[attributeType] -%}

{% block pageContent %}
<main data-pagefind-body>
  {% include "partials/sidebar-nav-drawer.njk" %}

  <layout-sidebar data-layout-gap="xl" data-layout-sidebar-width="narrow" data-layout-content-min="60">
    <nav class="tree" id="nav-drawer" data-layout-density="compact" aria-label="Attributes navigation" data-vt="sidebar">
      <label for="nav-drawer-toggle" class="nav-drawer-close" aria-label="Close navigation">
        <icon-wc name="x"></icon-wc>
      </label>

      <!-- Native Attributes -->
      <details{% if attributeType == 'native' %} open{% endif %}>
        <summary>{{ attrs.native.label }}</summary>
        {% for group in attrs.native.groups %}
        <details{% if nativeGroup == group.label %} open{% endif %}>
          <summary>{{ group.label }}</summary>
          <ul>
            {% for item in group.items %}
            <li>
              <a href="{{ item.href }}"{% if currentPath == item.href %} aria-current="page"{% endif %}>
                {{ item.name }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </details>
        {% endfor %}
      </details>

      <!-- Data Attributes -->
      <details{% if attributeType == 'data' %} open{% endif %}>
        <summary>{{ attrs.data.label }}</summary>
        {% for key, cat in attrs.data.groups %}
        <details{% if category == key %} open{% endif %}>
          <summary>{{ cat.label }}</summary>
          <ul>
            {% for item in cat.items %}
            <li>
              <a href="{{ item.href }}"{% if currentPath == item.href %} aria-current="page"{% endif %}>
                {{ item.name }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </details>
        {% endfor %}
      </details>
    </nav>

    <layout-sidebar data-layout-side="end" data-layout-sidebar-width="narrow" data-layout-gap="xl">
      <aside>
        <page-toc data-levels="h2,h3" data-scope="article"></page-toc>
      </aside>
      <article>
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <ol>
            <li><a href="/docs/attributes/">Attributes</a></li>
            {% if crumb %}
            <li><span>{{ crumb.label }}</span></li>
            {% endif %}
            <li><span aria-current="page">{{ attributeName }}</span></li>
          </ol>
        </nav>
        <h1>{{ attributeName }}</h1>
        <p class="lead">{{ description | escape }}</p>

        <heading-links data-levels="h2,h3">
          {{ content | safe }}
        </heading-links>
      </article>
    </layout-sidebar>
  </layout-sidebar>
</main>
{% endblock %}
