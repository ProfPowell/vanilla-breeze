---
layout: layouts/attribute.njk
title: "data-upload"
description: "Enhance a file input with a drag-and-drop zone, file list display, and browse button. Works with native accept and multiple attributes."
attributeName: data-upload
category: form-controls
attributeType: data
currentPath: /docs/attributes/data-upload/
permalink: /docs/attributes/data-upload/
---

{% set basicCode %}<label for="avatar">Profile photo</label>
<input type="file" id="avatar" data-upload>{% endset %}

{% set acceptCode %}<label for="document">Upload document</label>
<input type="file" id="document" data-upload accept=".pdf,.doc,.docx">{% endset %}

{% set multipleCode %}<label for="gallery">Upload images</label>
<input type="file" id="gallery" data-upload accept="image/*" multiple>{% endset %}

{% set formFieldCode %}<form-field>
  <label for="resume">Resume</label>
  <input type="file" id="resume" data-upload accept=".pdf,.doc,.docx" required>
  <small slot="help">PDF or Word document, max 5 MB.</small>
</form-field>{% endset %}

{% set styledZoneCode %}<!-- The upload zone is fully customizable via CSS -->
<label for="cover">Cover image</label>
<input type="file" id="cover" data-upload accept="image/png,image/jpeg">{% endset %}

{% set eventCode %}{% raw %}const input = document.querySelector('[data-upload]');

input.addEventListener('change', (e) => {
  const files = e.target.files;
  for (const file of files) {
    console.log(file.name, file.size, file.type);
  }
});{% endraw %}{% endset %}

{% set dragEventCode %}{% raw %}const zone = document.querySelector('.upload-zone');

zone.addEventListener('dragenter', () => {
  console.log('File dragged over zone');
});

zone.addEventListener('drop', (e) => {
  console.log('Files dropped:', e.dataTransfer.files.length);
});{% endraw %}{% endset %}

{% set stylingCode %}{% raw %}/* Default zone styling */
.upload-zone {
  border: 2px dashed var(--color-border);
  border-radius: var(--radius-m);
  padding: var(--size-xl);
  text-align: center;
  transition: border-color 0.15s, background-color 0.15s;
  cursor: pointer;
}

/* Drag-over state */
.upload-zone[data-dragover] {
  border-color: var(--color-primary);
  background-color: var(--color-primary-subtle);
}

/* Prompt text */
.upload-prompt {
  color: var(--color-text-muted);
}

/* File list */
.upload-file-list {
  list-style: none;
  padding: 0;
  margin-top: var(--size-s);
}{% endraw %}{% endset %}

{% set customPromptCode %}<!-- The prompt text is generated from accept and multiple attributes -->
<!-- Single file: "Drop file here or click to browse" -->
<!-- Multiple: "Drop files here or click to browse" -->
<!-- With accept: shows allowed types -->{% endset %}

{% set dynamicCode %}// Dynamically added upload inputs are auto-enhanced via MutationObserver
const input = document.createElement('input');
input.type = 'file';
input.dataset.upload = '';
input.accept = 'image/*';
document.body.appendChild(input);
// input is ready to use â€” no manual init needed{% endset %}

{% set domStructureCode %}<!-- Before init -->
<input type="file" id="avatar" data-upload>

<!-- After init -->
<div class="upload-zone" role="presentation">
  <div class="upload-prompt">
    <p>Drop file here or click to browse</p>
  </div>
  <input type="file" id="avatar" data-upload data-upload-init>
  <ul class="upload-file-list" aria-label="Selected files"></ul>
</div>{% endset %}

<section>
    <h2>Overview</h2>
    <p>The <code>data-upload</code> attribute enhances a native <code>&lt;input type="file"&gt;</code> with a drag-and-drop zone, visual file list, and styled prompt. No wrapper element needed &mdash; just add the attribute to the file input.</p>

    <browser-window
      src="/docs/examples/demos/upload-basic.html"
      url="https://vanilla-breeze.dev/upload"
      title="File Upload"
      shadow>
    </browser-window>

    <code-block language="html" show-lines label="Basic file upload">{{ basicCode | escape }}</code-block>
  </section>

  <section>
    <h2>How It Works</h2>
    <p>Add <code>data-upload</code> to any <code>&lt;input type="file"&gt;</code>. The init script:</p>
    <ol>
      <li>Creates a <code>.upload-zone</code> wrapper with <code>role="presentation"</code> around the input</li>
      <li>Adds a <code>.upload-prompt</code> with contextual text based on <code>accept</code> and <code>multiple</code> attributes</li>
      <li>Creates a <code>.upload-file-list</code> (<code>&lt;ul&gt;</code> with <code>aria-label="Selected files"</code>) to display chosen files</li>
      <li>Listens for drag events (<code>dragenter</code>, <code>dragleave</code>, <code>dragover</code>, <code>drop</code>) on the zone</li>
      <li>Sets <code>data-dragover</code> on the zone during active drag for visual feedback</li>
      <li>Clicking anywhere in the zone triggers the hidden native file input</li>
      <li>On file selection, renders file names and sizes in the file list</li>
    </ol>
    <p>The underlying input remains a real form control. It submits with the form, respects <code>accept</code> and <code>multiple</code>, and fires native <code>change</code> events.</p>
  </section>

  <section>
    <h2>Attributes</h2>
    <table class="props-table">
      <thead>
        <tr>
          <th>Attribute</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>data-upload</code></td>
          <td>boolean</td>
          <td>Enables the drag-and-drop zone enhancement on the file input.</td>
        </tr>
        <tr>
          <td><code>data-upload-init</code></td>
          <td>boolean</td>
          <td>Set automatically to prevent double-binding. Do not set manually.</td>
        </tr>
        <tr>
          <td><code>accept</code></td>
          <td>string</td>
          <td>Native attribute. Filters allowed file types. Reflected in the prompt text.</td>
        </tr>
        <tr>
          <td><code>multiple</code></td>
          <td>boolean</td>
          <td>Native attribute. Allows selecting multiple files. Changes prompt to plural text.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section>
    <h2>DOM Structure</h2>
    <p>After initialization, the file input is wrapped in the following structure:</p>

    <code-block language="html" show-lines label="Generated DOM structure">{{ domStructureCode | escape }}</code-block>

    <p>The native <code>&lt;input type="file"&gt;</code> is visually hidden but remains in the DOM for form submission and accessibility.</p>
  </section>

  <section>
    <h2>Accept Types</h2>
    <p>Use the native <code>accept</code> attribute to restrict file types. The prompt text updates to reflect allowed types. Dragged files that do not match the accept filter are rejected.</p>

    <div class="example">
      <div>
        <label for="doc-demo">Upload document</label>
        <input type="file" id="doc-demo" data-upload accept=".pdf,.doc,.docx">
      </div>
    </div>

    <code-block language="html" show-lines label="Restricted file types">{{ acceptCode | escape }}</code-block>
  </section>

  <section>
    <h2>Multiple Files</h2>
    <p>Add the native <code>multiple</code> attribute to allow selecting more than one file. The file list displays all selected files with individual entries.</p>

    <div class="example">
      <div>
        <label for="gallery-demo">Upload images</label>
        <input type="file" id="gallery-demo" data-upload accept="image/*" multiple>
      </div>
    </div>

    <code-block language="html" show-lines label="Multiple file upload">{{ multipleCode | escape }}</code-block>
  </section>

  <section>
    <h2>With Form Field</h2>
    <p>Wrap in <code>&lt;form-field&gt;</code> for validation feedback, helper text, and required indicators.</p>

    <div class="example">
      <form-field>
        <label for="resume-demo">Resume</label>
        <input type="file" id="resume-demo" data-upload accept=".pdf,.doc,.docx" required>
        <small slot="help">PDF or Word document, max 5 MB.</small>
      </form-field>
    </div>

    <code-block language="html" show-lines label="Upload inside form-field">{{ formFieldCode | escape }}</code-block>
  </section>

  <section>
    <h2>Drag States</h2>
    <p>During a drag operation, the <code>data-dragover</code> attribute is set on the <code>.upload-zone</code> element. Use it in CSS to provide visual feedback indicating the zone is an active drop target.</p>
    <ul>
      <li><code>dragenter</code> &mdash; sets <code>data-dragover</code> when a file enters the zone</li>
      <li><code>dragleave</code> &mdash; removes <code>data-dragover</code> when the file leaves the zone</li>
      <li><code>dragover</code> &mdash; prevents default to enable drop</li>
      <li><code>drop</code> &mdash; processes dropped files and removes <code>data-dragover</code></li>
    </ul>
  </section>

  <section>
    <h2>Events</h2>
    <p>The file input fires the native <code>change</code> event when files are selected via browse or drag-and-drop. Access the files from <code>e.target.files</code>.</p>

    <code-block language="javascript" show-lines label="Listening for file selection">{{ eventCode | escape }}</code-block>

    <p>You can also listen for drag events directly on the <code>.upload-zone</code> element:</p>

    <code-block language="javascript" show-lines label="Drag event listeners">{{ dragEventCode | escape }}</code-block>
  </section>

  <section>
    <h2>Styling</h2>
    <p>The upload zone, prompt, and file list are fully customizable via CSS. All styles target the generated class names:</p>

    <code-block language="css" show-lines label="Upload zone styling">{{ stylingCode | escape }}</code-block>

    <p>The dashed border and background color change during drag-over, providing clear visual feedback. The file list renders below the prompt with file names and formatted sizes.</p>
  </section>

  <section>
    <h2>Dynamic Elements</h2>
    <p>File inputs added to the DOM after page load are automatically enhanced via a MutationObserver. No manual initialization is needed.</p>

    <code-block language="javascript" show-lines label="Dynamically added file inputs">{{ dynamicCode | escape }}</code-block>
  </section>

  <section>
    <h2>Accessibility</h2>
    <ul>
      <li><code>role="presentation"</code> on the zone wrapper prevents it from being announced as an interactive element</li>
      <li><code>aria-label="Selected files"</code> on the file list gives screen readers context for the displayed file names</li>
      <li>The native <code>&lt;input type="file"&gt;</code> remains in the DOM, preserving keyboard access and screen reader announcements</li>
      <li>Clicking or pressing Enter/Space on the zone opens the native file picker dialog</li>
      <li>A visible <code>&lt;label&gt;</code> is required for the file input</li>
      <li><code>accept</code> restrictions are enforced on both browse and drop to prevent invalid file selection</li>
      <li>Without JavaScript, the native file input renders normally &mdash; progressive enhancement</li>
    </ul>
  </section>
