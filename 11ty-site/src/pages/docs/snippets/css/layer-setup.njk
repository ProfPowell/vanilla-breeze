---
layout: layouts/docs.njk
title: "Layer Setup Snippet"
description: "CSS @layer configuration for explicit cascade control. Define layer order once, then organize styles without specificity battles."
currentSection: examples
currentPath: /docs/snippets/css/layer-setup/
permalink: /docs/snippets/css/layer-setup/
---

<nav class="breadcrumb" aria-label="Breadcrumb">
    <ol>
      <li><a href="/docs/snippets/">Snippets</a></li>
      <li><span aria-current="page">Layer Setup</span></li>
    </ol>
  </nav>

  <h1>Layer Setup</h1>
  <p class="lead">CSS <code>@layer</code> configuration for explicit cascade control. Define layer order once, then organize styles without specificity battles.</p>

  <section>
    <h2>Overview</h2>
    <layout-text>
      <p>CSS Cascade Layers let you control which styles win when there are conflicts, regardless of specificity or source order. Vanilla Breeze uses six layers:</p>
      <ol>
        <li><strong>tokens</strong> - Design tokens (custom properties)</li>
        <li><strong>reset</strong> - Baseline normalization</li>
        <li><strong>native-elements</strong> - Styling for standard HTML elements</li>
        <li><strong>custom-elements</strong> - CSS-only custom element layouts</li>
        <li><strong>web-components</strong> - JavaScript-enhanced components</li>
        <li><strong>utils</strong> - Utility overrides (highest layer precedence)</li>
      </ol>
      <p>Layers declared first have <strong>lowest</strong> precedence. Un-layered styles have the <strong>highest</strong> precedence.</p>
    </layout-text>
  </section>

  <section>
    <h2>Visual Diagram</h2>
    <layout-text>
      <p>Layer precedence flows from bottom (lowest) to top (highest):</p>
    </layout-text>

    <browser-window
      src="/docs/snippets/demos/layer-setup.html"
      url="https://vanilla-breeze.dev/layers"
      title="Layer Diagram"
      shadow>
    </browser-window>
  </section>

  <section>
    <h2>Source Code</h2>
    <layout-text>
      <p>Copy this to your main CSS file to establish layer ordering.</p>
    </layout-text>

    {% set _code4 %}/**
 * CSS Layer Setup
 *
 * Establishes the cascade order for Vanilla Breeze styles.
 * Layers listed first have LOWEST precedence.
 * Un-layered styles have HIGHEST precedence (use sparingly).
 */

/* Declare all layers upfront for explicit ordering */
@layer tokens, reset, native-elements, custom-elements, web-components, utils;

/* Import each layer's styles */
@import "./tokens/index.css" layer(tokens);
@import "./base/reset.css" layer(reset);
@import "./native-elements/index.css" layer(native-elements);
@import "./custom-elements/index.css" layer(custom-elements);
@import "./web-components/index.css" layer(web-components);
@import "./utils/index.css" layer(utils);{% endset %}
    <code-block language="css" label="layer-setup.css">{{ _code4 | escape }}</code-block>
  </section>

  <section>
    <h2>Usage Examples</h2>

    <h3>Adding Styles to a Layer</h3>
    <layout-text>
      <p>Wrap your CSS in a <code>@layer</code> block to place it in the correct layer:</p>
    </layout-text>
    {% set _code3 %}@layer native-elements {
  button {
    font-weight: var(--font-weight-medium);
  }
}{% endset %}
    <code-block language="css" label="Adding to native-elements layer">{{ _code3 | escape }}</code-block>

    <h3>Component Overrides</h3>
    <layout-text>
      <p>Add component-specific styles to the web-components layer:</p>
    </layout-text>
    {% set _code2 %}@layer web-components {
  accordion-wc {
    --accordion-gap: var(--size-m);
  }
}{% endset %}
    <code-block language="css" label="Component customization">{{ _code2 | escape }}</code-block>

    <h3>Utility Classes</h3>
    <layout-text>
      <p>Utilities go in the highest-precedence layer to ensure they always apply:</p>
    </layout-text>
    {% set _code1 %}@layer utils {
  .visually-hidden {
    position: absolute;
    clip: rect(0 0 0 0);
    width: 1px;
    height: 1px;
  }

  .text-center {
    text-align: center;
  }
}{% endset %}
    <code-block language="css" label="Utility classes">{{ _code1 | escape }}</code-block>
  </section>

  <section>
    <h2>Layer Purposes</h2>

    <h3>tokens</h3>
    <layout-text>
      <p>Design tokens define your visual language - colors, spacing, typography, etc. They're declared as CSS custom properties on <code>:root</code> and have the lowest precedence since they're just variable definitions.</p>
    </layout-text>

    <h3>reset</h3>
    <layout-text>
      <p>Browser normalization and sensible defaults. Removes inconsistent default styles across browsers and establishes a predictable baseline.</p>
    </layout-text>

    <h3>native-elements</h3>
    <layout-text>
      <p>Styles for standard HTML elements like <code>&lt;button&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;table&gt;</code>, etc. These build on the reset with Vanilla Breeze styling conventions.</p>
    </layout-text>

    <h3>custom-elements</h3>
    <layout-text>
      <p>CSS-only custom elements like <code>&lt;layout-stack&gt;</code>, <code>&lt;layout-grid&gt;</code>, and <code>&lt;layout-card&gt;</code>. These provide layout primitives without JavaScript.</p>
    </layout-text>

    <h3>web-components</h3>
    <layout-text>
      <p>JavaScript-enhanced components like <code>&lt;accordion-wc&gt;</code>, <code>&lt;tabs-wc&gt;</code>, and <code>&lt;dropdown-wc&gt;</code>. These extend native HTML with interactive behavior.</p>
    </layout-text>

    <h3>utils</h3>
    <layout-text>
      <p>Utility classes for one-off overrides. Use sparingly - prefer component-level styling. Utilities have the highest layer precedence to ensure they always work.</p>
    </layout-text>
  </section>

  <section>
    <h2>Why Layers?</h2>
    <layout-text>
      <p>Without layers, CSS specificity wars lead to escalating selector complexity or <code>!important</code> abuse. Layers solve this by separating concerns:</p>
      <ul>
        <li>Utility classes always override component styles (no <code>!important</code> needed)</li>
        <li>Component styles always override base element styles</li>
        <li>You can import third-party CSS into lower layers</li>
        <li>Source order within a layer still matters, but layer order takes precedence</li>
      </ul>
    </layout-text>
  </section>

  <section>
    <h2>Related</h2>
    <layout-grid data-layout-min="200px" data-layout-gap="m">
      <a href="/docs/snippets/css/tokens-starter/" class="section-card">
        <h3>Tokens Starter</h3>
        <p>Design tokens for the tokens layer</p>
      </a>
      <a href="/docs/elements/" class="section-card">
        <h3>Elements</h3>
        <p>Native and custom element documentation</p>
      </a>
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@layer" class="section-card" target="_blank">
        <h3>MDN: @layer</h3>
        <p>CSS Cascade Layers specification</p>
      </a>
    </layout-grid>
  </section>
