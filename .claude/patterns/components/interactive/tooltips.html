<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Tooltip Component - Component Library</title>
  <link rel="stylesheet" href="../components.css"/>
</head>
<body>
  <main class="demo-page">
    <h1>Tooltip Component</h1>
    <p>Contextual hints that appear on hover/focus. Uses the native Popover API with CSS anchoring.</p>

    <section class="demo-section">
      <h2>Basic Tooltips</h2>
      <p>Hover or focus on buttons to see tooltips.</p>

      <div class="demo-row gap-xl">
        <tooltip-wrapper>
          <button type="button" data-button="secondary" popovertarget="tip1" popovertargetaction="toggle" aria-describedby="tip1">
            Hover me
          </button>
          <div id="tip1" popover="hint" data-tooltip>
            This is a tooltip
          </div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="secondary" popovertarget="tip2" popovertargetaction="toggle" aria-describedby="tip2">
            With longer text
          </button>
          <div id="tip2" popover="hint" data-tooltip>
            Tooltips can contain longer explanatory text to help users understand the interface.
          </div>
        </tooltip-wrapper>
      </div>
    </section>

    <section class="demo-section">
      <h2>Positions</h2>
      <p>Tooltips can appear in different positions relative to their trigger.</p>

      <div class="demo-grid-2x2 text-center" data-max-width="sm">
        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-top" aria-describedby="tip-top">
            Top
          </button>
          <div id="tip-top" popover="hint" data-tooltip data-position="top">
            Tooltip on top
          </div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-bottom" aria-describedby="tip-bottom">
            Bottom
          </button>
          <div id="tip-bottom" popover="hint" data-tooltip data-position="bottom">
            Tooltip on bottom
          </div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-left" aria-describedby="tip-left">
            Left
          </button>
          <div id="tip-left" popover="hint" data-tooltip data-position="left">
            Left
          </div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-right" aria-describedby="tip-right">
            Right
          </button>
          <div id="tip-right" popover="hint" data-tooltip data-position="right">
            Right
          </div>
        </tooltip-wrapper>
      </div>
    </section>

    <section class="demo-section">
      <h2>Icon Button Tooltips</h2>
      <p>Particularly useful for icon-only buttons to provide context.</p>

      <div class="demo-row gap-md">
        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-edit" aria-label="Edit" aria-describedby="tip-edit">
            <x-icon name="pencil" size="sm"></x-icon>
          </button>
          <div id="tip-edit" popover="hint" data-tooltip>Edit</div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-delete" aria-label="Delete" aria-describedby="tip-delete">
            <x-icon name="trash-2" size="sm"></x-icon>
          </button>
          <div id="tip-delete" popover="hint" data-tooltip>Delete</div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-share" aria-label="Share" aria-describedby="tip-share">
            <x-icon name="share-2" size="sm"></x-icon>
          </button>
          <div id="tip-share" popover="hint" data-tooltip>Share</div>
        </tooltip-wrapper>

        <tooltip-wrapper>
          <button type="button" data-button="ghost" popovertarget="tip-download" aria-label="Download" aria-describedby="tip-download">
            <x-icon name="download" size="sm"></x-icon>
          </button>
          <div id="tip-download" popover="hint" data-tooltip>Download</div>
        </tooltip-wrapper>
      </div>
    </section>

    <section class="demo-section">
      <h2>In Context</h2>

      <h3>Toolbar</h3>
      <article class="demo-card" data-max-width="md">
        <div class="demo-toolbar">
          <tooltip-wrapper>
            <button type="button" data-button="ghost" data-size="small" popovertarget="tb-bold" aria-label="Bold" aria-describedby="tb-bold">
              <x-icon name="bold" size="sm"></x-icon>
            </button>
            <div id="tb-bold" popover="hint" data-tooltip>Bold (Ctrl+B)</div>
          </tooltip-wrapper>

          <tooltip-wrapper>
            <button type="button" data-button="ghost" data-size="small" popovertarget="tb-italic" aria-label="Italic" aria-describedby="tb-italic">
              <x-icon name="italic" size="sm"></x-icon>
            </button>
            <div id="tb-italic" popover="hint" data-tooltip>Italic (Ctrl+I)</div>
          </tooltip-wrapper>

          <tooltip-wrapper>
            <button type="button" data-button="ghost" data-size="small" popovertarget="tb-underline" aria-label="Underline" aria-describedby="tb-underline">
              <x-icon name="underline" size="sm"></x-icon>
            </button>
            <div id="tb-underline" popover="hint" data-tooltip>Underline (Ctrl+U)</div>
          </tooltip-wrapper>

          <span class="demo-toolbar-separator"></span>

          <tooltip-wrapper>
            <button type="button" data-button="ghost" data-size="small" popovertarget="tb-link" aria-label="Insert link" aria-describedby="tb-link">
              <x-icon name="link" size="sm"></x-icon>
            </button>
            <div id="tb-link" popover="hint" data-tooltip>Insert Link (Ctrl+K)</div>
          </tooltip-wrapper>

          <tooltip-wrapper>
            <button type="button" data-button="ghost" data-size="small" popovertarget="tb-image" aria-label="Insert image" aria-describedby="tb-image">
              <x-icon name="image" size="sm"></x-icon>
            </button>
            <div id="tb-image" popover="hint" data-tooltip>Insert Image</div>
          </tooltip-wrapper>
        </div>
      </article>

      <h3>Form Field Help</h3>
      <article class="demo-card" data-max-width="sm">
        <form-field>
          <div class="flex items-center gap-sm">
            <label for="api-key">API Key</label>
            <tooltip-wrapper>
              <button type="button" data-button="ghost" data-size="small" popovertarget="help-api" aria-label="Help" aria-describedby="help-api" class="px-sm">
                <x-icon name="help-circle" size="xs"></x-icon>
              </button>
              <div id="help-api" popover="hint" data-tooltip data-max-width="xs">
                Your API key can be found in Settings &gt; Developer &gt; API Keys. Keep it secret!
              </div>
            </tooltip-wrapper>
          </div>
          <input type="text" id="api-key" placeholder="sk-..."/>
        </form-field>
      </article>

      <h3>Truncated Text</h3>
      <article class="demo-card" data-max-width="xs">
        <tooltip-wrapper>
          <div class="demo-truncate" popovertarget="tip-truncated" aria-describedby="tip-truncated">
            This is a very long piece of text that will be truncated
          </div>
          <div id="tip-truncated" popover="hint" data-tooltip data-max-width="sm">
            This is a very long piece of text that will be truncated
          </div>
        </tooltip-wrapper>
      </article>
    </section>

    <section class="demo-section">
      <h2>Accessibility</h2>
      <ul>
        <li>Use <code>aria-describedby</code> to associate tooltip with trigger</li>
        <li>Tooltips should be visible on both hover and focus</li>
        <li>Keep tooltip text concise and informative</li>
        <li>Don't put essential information only in tooltips</li>
        <li>Ensure sufficient color contrast for tooltip text</li>
      </ul>
    </section>

    <section class="demo-section">
      <h2>Usage</h2>
      <pre><code>&lt;!-- Basic tooltip --&gt;
&lt;tooltip-wrapper&gt;
  &lt;button popovertarget="my-tip" aria-describedby="my-tip"&gt;
    Hover me
  &lt;/button&gt;
  &lt;div id="my-tip" popover="hint" data-tooltip&gt;
    Tooltip content
  &lt;/div&gt;
&lt;/tooltip-wrapper&gt;

&lt;!-- With position --&gt;
&lt;div id="tip" popover="hint" data-tooltip data-position="top"&gt;
  Appears above
&lt;/div&gt;

&lt;!-- Icon button with tooltip --&gt;
&lt;tooltip-wrapper&gt;
  &lt;button aria-label="Edit" popovertarget="edit-tip" aria-describedby="edit-tip"&gt;
    &lt;x-icon name="pencil"&gt;&lt;/x-icon&gt;
  &lt;/button&gt;
  &lt;div id="edit-tip" popover="hint" data-tooltip&gt;Edit&lt;/div&gt;
&lt;/tooltip-wrapper&gt;</code></pre>
    </section>
  </main>

  <script>
    // Show tooltips on hover (in addition to click from popovertarget)
    document.querySelectorAll('tooltip-wrapper').forEach(wrapper => {
      const trigger = wrapper.querySelector('[popovertarget]');
      const tooltip = wrapper.querySelector('[popover]');

      if (trigger && tooltip) {
        trigger.addEventListener('mouseenter', () => tooltip.showPopover());
        trigger.addEventListener('mouseleave', () => tooltip.hidePopover());
        trigger.addEventListener('focus', () => tooltip.showPopover());
        trigger.addEventListener('blur', () => tooltip.hidePopover());
      }
    });
  </script>
</body>
</html>
