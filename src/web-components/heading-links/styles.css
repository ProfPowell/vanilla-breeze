/* heading-links: Anchor link styles for headings */

heading-links {
  display: block;
}

/* Heading container - enable anchor visibility on hover */
heading-links :is(h1, h2, h3, h4, h5, h6) {
  position: relative;
  scroll-margin-top: var(--size-xl);
}

/* Anchor container */
.heading-anchor {
  display: inline-flex;
  align-items: center;
  gap: var(--size-3xs);
  margin-inline-start: var(--size-xs);
  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease-default);
  vertical-align: middle;
}

/* Show on heading hover/focus */
heading-links :is(h1, h2, h3, h4, h5, h6):hover .heading-anchor,
heading-links :is(h1, h2, h3, h4, h5, h6):focus-within .heading-anchor {
  opacity: 1;
}

/* Anchor buttons */
.heading-anchor-link,
.heading-anchor-copy {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--size-3xs);
  background: transparent;
  border: none;
  border-radius: var(--radius-s);
  color: var(--color-text-muted);
  cursor: pointer;
  transition:
    color var(--duration-fast) var(--ease-default),
    background-color var(--duration-fast) var(--ease-default);
}

.heading-anchor-link:hover,
.heading-anchor-copy:hover {
  color: var(--color-interactive);
  background: var(--color-surface-raised);
}

.heading-anchor-link:focus-visible,
.heading-anchor-copy:focus-visible {
  outline: var(--border-width-medium) solid var(--color-interactive);
  outline-offset: var(--border-width-thin);
}

/* Success state after copy */
.heading-anchor-copy.copied {
  color: var(--color-success);
}

/* Screen reader only announcement */
heading-links .sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus indicator when heading is targeted via hash */
heading-links :is(h1, h2, h3, h4, h5, h6):target {
  outline: var(--border-width-medium) solid var(--color-interactive);
  outline-offset: var(--size-xs);
  border-radius: var(--radius-s);
}

/* Always show anchor when heading is focused */
heading-links :is(h1, h2, h3, h4, h5, h6):focus .heading-anchor {
  opacity: 1;
}

/* Reduced motion: no transition delays */
@media (prefers-reduced-motion: reduce) {
  .heading-anchor,
  .heading-anchor-link,
  .heading-anchor-copy {
    transition: none;
  }
}
