/* heading-links: Anchor link styles for headings */

heading-links {
  display: block;

  /* Heading container - enable anchor visibility on hover */
  & :is(h1, h2, h3, h4, h5, h6) {
    position: relative;
    scroll-margin-top: var(--size-xl);

    /* Show anchor on heading hover/focus */
    &:hover .heading-anchor,
    &:focus-within .heading-anchor,
    &:focus .heading-anchor {
      opacity: 1;
    }
  }

  /* Anchor link */
  & .heading-anchor {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-inline-start: var(--size-xs);
    padding: var(--size-3xs);
    background: transparent;
    border-radius: var(--radius-s);
    color: var(--color-text-muted);
    text-decoration: none;
    opacity: 0;
    vertical-align: middle;
    /* Fix icon size - use fixed font-size so icon em units don't scale with heading */
    font-size: 1rem;
    transition:
      opacity var(--duration-fast) var(--ease-default),
      color var(--duration-fast) var(--ease-default),
      background-color var(--duration-fast) var(--ease-default);

    &:hover {
      color: var(--color-interactive);
      background: var(--color-surface-raised);
    }

    &:focus-visible {
      opacity: 1;
      outline: var(--border-width-medium) solid var(--color-interactive);
      outline-offset: var(--border-width-thin);
    }

    /* Success state after copy */
    &.copied {
      color: var(--color-success);
    }
  }

  /* Screen reader only announcement */
  & .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

/* Reduced motion: no transition delays */
@media (prefers-reduced-motion: reduce) {
  heading-links .heading-anchor {
    transition: none;
  }
}
