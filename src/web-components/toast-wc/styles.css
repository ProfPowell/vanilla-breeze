/* toast-wc: Toast notification container */

toast-wc {
  position: fixed;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: var(--size-s);
  pointer-events: none;
  max-inline-size: min(24rem, calc(100vw - var(--size-l)));

  /* Default position: top-end */
  inset-block-start: var(--size-m);
  inset-inline-end: var(--size-m);
  align-items: flex-end;

  /* Position variants */
  &[data-position="top-start"] {
    inset-block-start: var(--size-m);
    inset-inline-start: var(--size-m);
    inset-inline-end: auto;
    align-items: flex-start;
  }

  &[data-position="bottom-end"] {
    inset-block-start: auto;
    inset-block-end: var(--size-m);
    inset-inline-end: var(--size-m);
    align-items: flex-end;
    flex-direction: column-reverse;
  }

  &[data-position="bottom-start"] {
    inset-block-start: auto;
    inset-block-end: var(--size-m);
    inset-inline-start: var(--size-m);
    inset-inline-end: auto;
    align-items: flex-start;
    flex-direction: column-reverse;
  }

  &[data-position="top-center"] {
    inset-block-start: var(--size-m);
    inset-inline-start: 50%;
    inset-inline-end: auto;
    transform: translateX(-50%);
    align-items: center;
  }

  &[data-position="bottom-center"] {
    inset-block-start: auto;
    inset-block-end: var(--size-m);
    inset-inline-start: 50%;
    inset-inline-end: auto;
    transform: translateX(-50%);
    align-items: center;
    flex-direction: column-reverse;
  }
}

@scope (toast-wc) {
  /* Individual toast styling */
  .toast {
    display: flex;
    align-items: flex-start;
    gap: var(--size-s);
    padding: var(--size-s) var(--size-m);
    background: var(--color-surface);
    border-radius: var(--radius-m);
    box-shadow:
      0 4px 12px oklch(0% 0 0 / 0.15),
      0 1px 3px oklch(0% 0 0 / 0.1);
    pointer-events: auto;
    min-inline-size: 12rem;
    max-inline-size: 100%;
    animation: toast-enter var(--duration-normal) var(--ease-default) forwards;

    /* Exit animation */
    &[data-state="hiding"] {
      animation: toast-exit var(--duration-fast) var(--ease-default) forwards;
    }
  }

  /* Toast icon */
  .icon {
    flex-shrink: 0;
    font-size: var(--font-size-lg);
    line-height: 1;
  }

  /* Toast message */
  .message {
    flex: 1;
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
    padding-block: 0.125em;
  }

  /* Toast action button */
  .action {
    flex-shrink: 0;
    padding: var(--size-xs) var(--size-s);
    font-size: var(--font-size-sm);
    font-weight: 500;
    background: transparent;
    border: none;
    color: var(--color-interactive);
    cursor: pointer;
    border-radius: var(--radius-s);
    transition: background-color var(--duration-fast) var(--ease-default);

    &:hover {
      background: var(--color-surface-hover);
    }

    &:focus-visible {
      outline: var(--border-width-medium) solid var(--color-interactive);
      outline-offset: var(--border-width-thin);
    }
  }

  /* Toast close button */
  .close {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    inline-size: 1.5rem;
    block-size: 1.5rem;
    padding: 0;
    font-size: var(--font-size-sm);
    background: transparent;
    border: none;
    color: var(--color-text-muted);
    cursor: pointer;
    border-radius: var(--radius-s);
    transition:
      background-color var(--duration-fast) var(--ease-default),
      color var(--duration-fast) var(--ease-default);

    &:hover {
      background: var(--color-surface-hover);
      color: var(--color-text);
    }

    &:focus-visible {
      outline: var(--border-width-medium) solid var(--color-interactive);
      outline-offset: var(--border-width-thin);
    }
  }

  /* --- Variants --- */

  /* Info (default) */
  .toast[data-variant="info"] {
    border-inline-start: var(--border-width-thick) solid var(--color-interactive);

    & > .icon {
      color: var(--color-interactive);
    }
  }

  /* Success */
  .toast[data-variant="success"] {
    border-inline-start: var(--border-width-thick) solid var(--color-success);

    & > .icon {
      color: var(--color-success);
    }
  }

  /* Warning */
  .toast[data-variant="warning"] {
    border-inline-start: var(--border-width-thick) solid var(--color-warning);

    & > .icon {
      color: var(--color-warning);
    }
  }

  /* Error */
  .toast[data-variant="error"] {
    border-inline-start: var(--border-width-thick) solid var(--color-error);

    & > .icon {
      color: var(--color-error);
    }
  }
}

/* Entry animations based on position */
@keyframes toast-enter {
  from {
    opacity: 0;
    transform: translateY(calc(var(--size-m) * -1));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes toast-exit {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(calc(var(--size-s) * -1));
  }
}

/* Bottom position toasts enter from below */
toast-wc[data-position="bottom-end"] > .toast,
toast-wc[data-position="bottom-start"] > .toast,
toast-wc[data-position="bottom-center"] > .toast {
  animation-name: toast-enter-bottom;
}

@keyframes toast-enter-bottom {
  from {
    opacity: 0;
    transform: translateY(var(--size-m));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- Reduced Motion --- */
@media (prefers-reduced-motion: reduce) {
  @scope (toast-wc) {
    .toast {
      animation: none;
      opacity: 1;

      &[data-state="hiding"] {
        animation: none;
        opacity: 0;
      }
    }
  }
}
