/* x-tooltip: Enhanced tooltip with positioning and arrow */

x-tooltip {
  display: inline-block;
  position: relative;
}

/* Tooltip element */
x-tooltip > .tooltip {
  position: fixed;
  top: var(--tooltip-top, 0);
  left: var(--tooltip-left, 0);
  z-index: 1000;
  padding: var(--space-xs) var(--space-s);
  background: var(--color-gray-900);
  color: var(--color-gray-50);
  font-size: var(--text-s);
  line-height: var(--leading-normal);
  border-radius: var(--radius-s);
  max-inline-size: 20rem;
  white-space: normal;
  word-wrap: break-word;
  pointer-events: none;

  /* Hidden by default */
  opacity: 0;
  visibility: hidden;
  transition:
    opacity var(--duration-fast) var(--ease-default),
    visibility var(--duration-fast) var(--ease-default);
}

/* Visible state */
x-tooltip > .tooltip[data-state="visible"] {
  opacity: 1;
  visibility: visible;
}

/* Tooltip arrow */
x-tooltip > .tooltip > .tooltip-arrow {
  position: absolute;
  inline-size: 8px;
  block-size: 8px;
  background: var(--color-gray-900);
  transform: rotate(45deg);
}

/* Arrow positions */
x-tooltip > .tooltip[data-position="top"] > .tooltip-arrow {
  inset-block-end: -4px;
  inset-inline-start: calc(50% - 4px);
}

x-tooltip > .tooltip[data-position="bottom"] > .tooltip-arrow {
  inset-block-start: -4px;
  inset-inline-start: calc(50% - 4px);
}

x-tooltip > .tooltip[data-position="left"] > .tooltip-arrow {
  inset-inline-end: -4px;
  inset-block-start: calc(50% - 4px);
}

x-tooltip > .tooltip[data-position="right"] > .tooltip-arrow {
  inset-inline-start: -4px;
  inset-block-start: calc(50% - 4px);
}

/* --- Dark theme compatibility --- */
@media (prefers-color-scheme: dark) {
  x-tooltip > .tooltip {
    background: var(--color-gray-100);
    color: var(--color-gray-900);
  }

  x-tooltip > .tooltip > .tooltip-arrow {
    background: var(--color-gray-100);
  }
}

/* --- Reduced Motion --- */

@media (prefers-reduced-motion: reduce) {
  x-tooltip > .tooltip {
    transition: none;
  }
}
