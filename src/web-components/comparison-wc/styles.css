/* comparison-wc: Before/after image comparison slider */

/* --- Progressive enhancement: no-JS fallback --- */
comparison-wc:not(:defined) {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--size-s);
}

comparison-wc:not(:defined) > * {
  display: block;
  width: 100%;
}

/* --- Defined state --- */
comparison-wc:defined {
  display: grid;
  position: relative;
  overflow: hidden;
}

/* Both children overlap in the same grid cell */
comparison-wc:defined > :not(.comparison-divider) {
  grid-area: 1 / 1;
  display: block;
  width: 100%;
}

/* Second child gets clipped to reveal the first */
comparison-wc:defined > :not(.comparison-divider):nth-child(2) {
  clip-path: inset(0 0 0 var(--_position, 50%));
}

/* --- Divider line --- */
.comparison-divider {
  grid-area: 1 / 1;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  width: 3px;
  margin-left: -1.5px;
  background: white;
  cursor: col-resize;
  touch-action: none;
  z-index: 1;
  box-shadow: 0 0 4px oklch(0% 0 0 / 0.3);
}

/* Circular handle */
.comparison-divider::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 40px;
  height: 40px;
  margin: -20px 0 0 -20px;
  border-radius: 50%;
  background: white;
  border: 2px solid oklch(0% 0 0 / 0.15);
  box-shadow: 0 2px 8px oklch(0% 0 0 / 0.2);
}

/* Focus visible */
.comparison-divider:focus-visible {
  outline: 3px solid var(--color-focus, oklch(60% 0.2 260));
  outline-offset: 2px;
}
