/**
 * Vanilla Breeze Labs CSS
 *
 * Experimental features and extensions for the Vanilla Breeze design system.
 * These features are in development and may change or be removed.
 *
 * Usage:
 * 1. Include after vanilla-breeze.css
 * 2. Use data-labs attribute to enable features on specific elements
 *
 * @layer labs - experimental features isolated in their own cascade layer
 */

@layer labs {
  /* ============================================
     MOTION TOKENS
     Extended animation and transition system
     ============================================ */

  :root {
    /* Motion personalities (easing curves) */
    --motion-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --motion-snappy: cubic-bezier(0.4, 0, 0.2, 1);
    --motion-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);
    --motion-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);

    /* Stagger animation delay */
    --motion-stagger-delay: 50ms;

    /* Default hover transform */
    --motion-hover-lift: translateY(-2px);
    --motion-hover-scale: scale(1.02);
  }

  /* Hover effects utility classes */
  [data-labs~="hover-lift"] {
    transition:
      transform var(--duration-normal, 200ms) var(--motion-smooth),
      box-shadow var(--duration-normal, 200ms) var(--motion-smooth);
  }

  [data-labs~="hover-lift"]:hover {
    transform: var(--motion-hover-lift);
    box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1));
  }

  [data-labs~="hover-scale"] {
    transition: transform var(--duration-normal, 200ms) var(--motion-bounce);
  }

  [data-labs~="hover-scale"]:hover {
    transform: var(--motion-hover-scale);
  }

  [data-labs~="hover-glow"] {
    transition: box-shadow var(--duration-normal, 200ms) var(--motion-smooth);
  }

  [data-labs~="hover-glow"]:hover {
    box-shadow:
      0 0 0 4px var(--color-primary-subtle, rgba(59, 130, 246, 0.2)),
      0 0 20px var(--color-primary-subtle, rgba(59, 130, 246, 0.2));
  }

  /* ============================================
     SURFACE TEXTURES
     Background patterns and overlays
     ============================================ */

  :root {
    /* Texture patterns as data URIs */
    --texture-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");

    --texture-dots: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='2' cy='2' r='1' fill='%23000' fill-opacity='0.1'/%3E%3C/svg%3E");

    --texture-grid: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40' fill='none' stroke='%23000' stroke-opacity='0.05'/%3E%3C/svg%3E");

    --texture-lines: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 6L6 0' stroke='%23000' stroke-opacity='0.08' stroke-width='0.5'/%3E%3C/svg%3E");

    --texture-opacity: 0.05;
  }

  [data-labs~="texture-noise"] {
    position: relative;
  }

  [data-labs~="texture-noise"]::after {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--texture-noise);
    opacity: var(--texture-opacity);
    pointer-events: none;
  }

  [data-labs~="texture-dots"] {
    background-image: var(--texture-dots);
  }

  [data-labs~="texture-grid"] {
    background-image: var(--texture-grid);
  }

  [data-labs~="texture-lines"] {
    background-image: var(--texture-lines);
  }

  /* ============================================
     GLASSMORPHISM
     Frosted glass effects
     ============================================ */

  :root {
    --glass-blur: 10px;
    --glass-opacity: 0.8;
    --glass-border-opacity: 0.2;
  }

  [data-labs~="glass"] {
    background: rgba(255, 255, 255, var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(255, 255, 255, var(--glass-border-opacity));
  }

  @media (prefers-color-scheme: dark) {
    [data-labs~="glass"] {
      background: rgba(0, 0, 0, calc(var(--glass-opacity) * 0.6));
      border-color: rgba(255, 255, 255, calc(var(--glass-border-opacity) * 0.5));
    }
  }

  /* ============================================
     ANIMATED GRADIENTS
     Background animations
     ============================================ */

  @property --gradient-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
  }

  [data-labs~="gradient-animate"] {
    --gradient-speed: 3s;
    background: linear-gradient(
      var(--gradient-angle),
      var(--color-primary, #3b82f6),
      var(--color-secondary, #8b5cf6)
    );
    animation: gradient-rotate var(--gradient-speed) linear infinite;
  }

  @keyframes gradient-rotate {
    to {
      --gradient-angle: 360deg;
    }
  }

  [data-labs~="gradient-aurora"] {
    background: linear-gradient(
      -45deg,
      #ee7752,
      #e73c7e,
      #23a6d5,
      #23d5ab
    );
    background-size: 400% 400%;
    animation: aurora-shift 15s ease infinite;
  }

  @keyframes aurora-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* ============================================
     STAGGER ANIMATIONS
     Sequential child animations
     ============================================ */

  @keyframes labs-fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  [data-labs~="stagger"] > * {
    animation: labs-fade-in 300ms ease-out backwards;
  }

  [data-labs~="stagger"] > *:nth-child(1) { animation-delay: calc(var(--motion-stagger-delay) * 0); }
  [data-labs~="stagger"] > *:nth-child(2) { animation-delay: calc(var(--motion-stagger-delay) * 1); }
  [data-labs~="stagger"] > *:nth-child(3) { animation-delay: calc(var(--motion-stagger-delay) * 2); }
  [data-labs~="stagger"] > *:nth-child(4) { animation-delay: calc(var(--motion-stagger-delay) * 3); }
  [data-labs~="stagger"] > *:nth-child(5) { animation-delay: calc(var(--motion-stagger-delay) * 4); }
  [data-labs~="stagger"] > *:nth-child(6) { animation-delay: calc(var(--motion-stagger-delay) * 5); }
  [data-labs~="stagger"] > *:nth-child(7) { animation-delay: calc(var(--motion-stagger-delay) * 6); }
  [data-labs~="stagger"] > *:nth-child(8) { animation-delay: calc(var(--motion-stagger-delay) * 7); }
  [data-labs~="stagger"] > *:nth-child(9) { animation-delay: calc(var(--motion-stagger-delay) * 8); }
  [data-labs~="stagger"] > *:nth-child(10) { animation-delay: calc(var(--motion-stagger-delay) * 9); }

  /* ============================================
     NEON EFFECTS
     Glowing borders and text
     ============================================ */

  :root {
    --neon-color: #00ff88;
    --neon-intensity: 1;
  }

  [data-labs~="neon-border"] {
    border-color: var(--neon-color);
    box-shadow:
      0 0 5px var(--neon-color),
      0 0 calc(10px * var(--neon-intensity)) var(--neon-color),
      0 0 calc(20px * var(--neon-intensity)) var(--neon-color),
      inset 0 0 5px rgba(0, 255, 136, 0.1);
  }

  [data-labs~="neon-text"] {
    color: var(--neon-color);
    text-shadow:
      0 0 5px var(--neon-color),
      0 0 10px var(--neon-color),
      0 0 20px var(--neon-color);
  }

  /* ============================================
     REDUCED MOTION SUPPORT
     ============================================ */

  @media (prefers-reduced-motion: reduce) {
    [data-labs~="hover-lift"],
    [data-labs~="hover-scale"],
    [data-labs~="hover-glow"],
    [data-labs~="gradient-animate"],
    [data-labs~="gradient-aurora"],
    [data-labs~="stagger"] > * {
      animation: none !important;
      transition: none !important;
    }
  }
}
