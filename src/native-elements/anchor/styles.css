/* anchor: Link styling with variants and auto-detection */

a {
  color: var(--color-interactive);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 0.15em;
  transition:
    color var(--duration-fast) var(--ease-default),
    text-decoration-thickness var(--duration-fast) var(--ease-default);

  &:hover {
    text-decoration-thickness: 2px;
  }

  &:focus-visible {
    outline: var(--border-width-medium) solid var(--color-interactive);
    outline-offset: var(--border-width-thin);
    border-radius: var(--radius-s);
  }

  /* Remove underline for links wrapping block elements */
  &:has(> img),
  &:has(> picture),
  &:has(> figure),
  &:has(> layout-card) {
    text-decoration: none;
  }
}

/* ===========================================
   Link Variants (data-variant API)
   =========================================== */

/* Muted link - less prominent, for secondary navigation */
a[data-variant="muted"] {
  color: var(--color-text-muted);

  &:hover {
    color: var(--color-text);
  }
}

/* Plain link - no underline by default, appears on hover */
a[data-variant="plain"] {
  text-decoration: none;

  &:hover {
    text-decoration: underline;
  }
}

/* Legacy class support (backwards compatibility) */
a.muted {
  color: var(--color-text-muted);

  &:hover {
    color: var(--color-text);
  }
}

a.plain {
  text-decoration: none;

  &:hover {
    text-decoration: underline;
  }
}

/* ===========================================
   Auto-Detect Link Types
   Use data-no-icon to suppress auto-icons
   =========================================== */

/* External links - auto-detect http(s) links */
a[href^="http"]:not([data-no-icon])::after,
a[href^="//"]:not([data-no-icon])::after {
  content: " ↗";
  font-size: 0.75em;
  font-style: normal;
  opacity: 0.7;
}

/* Legacy .external class support */
a.external::after {
  content: " ↗";
  font-size: 0.75em;
  font-style: normal;
  opacity: 0.7;
}

/* Download links */
a[download]:not([data-no-icon])::after {
  content: " ↓";
  font-size: 0.75em;
  font-style: normal;
  opacity: 0.7;
}

/* Email links */
a[href^="mailto:"]:not([data-no-icon])::before {
  content: "✉ ";
  font-size: 0.85em;
  font-style: normal;
  opacity: 0.7;
}

/* Phone links */
a[href^="tel:"]:not([data-no-icon])::before {
  content: "☏ ";
  font-size: 0.85em;
  font-style: normal;
  opacity: 0.7;
}

/* ===========================================
   Context Overrides
   Links in navigation contexts don't show icons
   =========================================== */

nav a[href^="http"]::after,
nav a[href^="//"]::after,
nav a[download]::after,
nav a[href^="mailto:"]::before,
nav a[href^="tel:"]::before,
header a[href^="http"]::after,
header a[href^="//"]::after {
  content: none;
}
