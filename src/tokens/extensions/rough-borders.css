/**
 * Rough Borders Extension
 *
 * Adds sketchy/hand-drawn border support via SVG filters.
 * Requires the SVG filter definitions to be included in the page
 * (see src/assets/rough-border-filters.svg).
 *
 * Usage:
 *   <!-- Include filters in your HTML -->
 *   <svg style="position: absolute; width: 0; height: 0; overflow: hidden;">
 *     <!-- filters from rough-border-filters.svg -->
 *   </svg>
 *
 *   .card {
 *     filter: var(--filter-rough);
 *   }
 */

:root {
  /* ========================================
   * Roughness Intensity
   * 0 = none, 1 = light, 2 = medium, 3 = heavy
   * ======================================== */
  --border-roughness: 0;

  /* ========================================
   * SVG Filter References
   * These map to filters defined in rough-border-filters.svg
   * ======================================== */
  --filter-rough-none: none;
  --filter-rough-light: url(#vb-rough-light);
  --filter-rough-medium: url(#vb-rough-medium);
  --filter-rough-heavy: url(#vb-rough-heavy);

  /* Active filter based on roughness level (defaults to none) */
  --filter-rough: var(--filter-rough-none);

  /* ========================================
   * Sketch Shadow Preset
   * Brutalist-style offset shadow without blur
   * ======================================== */
  --shadow-sketch-offset: 4px;
  --shadow-sketch: var(--shadow-sketch-offset) var(--shadow-sketch-offset) 0 var(--color-text, oklch(20% 0 0));

  /* ========================================
   * Hand-drawn Border Presets
   * Border-image values for sketchy borders
   * ======================================== */

  /* Wavy curves border */
  --border-image-sketch: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0,2 Q10,0 20,2 T40,2 M0,38 Q10,40 20,38 T40,38 M2,0 Q0,10 2,20 T2,40 M38,0 Q40,10 38,20 T38,40' fill='none' stroke='%23333' stroke-width='2'/%3E%3C/svg%3E") 10 stretch;

  /* Variable dash border */
  --border-image-rough: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Crect x='2' y='2' width='44' height='44' fill='none' stroke='%23333' stroke-width='3' stroke-dasharray='8,4,2,4' stroke-linecap='round'/%3E%3C/svg%3E") 12 round;

  /* Marker stroke border */
  --border-image-marker: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M2,5 C10,2 30,8 38,3 M2,35 C8,38 32,32 38,37 M5,2 C3,12 7,28 3,38 M35,2 C38,10 33,30 37,38' fill='none' stroke='%23333' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E") 10 stretch;
}

/* Dark mode adjustments for border images */
[data-mode="dark"] {
  --border-image-sketch: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0,2 Q10,0 20,2 T40,2 M0,38 Q10,40 20,38 T40,38 M2,0 Q0,10 2,20 T2,40 M38,0 Q40,10 38,20 T38,40' fill='none' stroke='%23ccc' stroke-width='2'/%3E%3C/svg%3E") 10 stretch;
  --border-image-rough: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Crect x='2' y='2' width='44' height='44' fill='none' stroke='%23ccc' stroke-width='3' stroke-dasharray='8,4,2,4' stroke-linecap='round'/%3E%3C/svg%3E") 12 round;
  --border-image-marker: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M2,5 C10,2 30,8 38,3 M2,35 C8,38 32,32 38,37 M5,2 C3,12 7,28 3,38 M35,2 C38,10 33,30 37,38' fill='none' stroke='%23ccc' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E") 10 stretch;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-mode="light"]) {
    --border-image-sketch: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M0,2 Q10,0 20,2 T40,2 M0,38 Q10,40 20,38 T40,38 M2,0 Q0,10 2,20 T2,40 M38,0 Q40,10 38,20 T38,40' fill='none' stroke='%23ccc' stroke-width='2'/%3E%3C/svg%3E") 10 stretch;
    --border-image-rough: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48'%3E%3Crect x='2' y='2' width='44' height='44' fill='none' stroke='%23ccc' stroke-width='3' stroke-dasharray='8,4,2,4' stroke-linecap='round'/%3E%3C/svg%3E") 12 round;
    --border-image-marker: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Cpath d='M2,5 C10,2 30,8 38,3 M2,35 C8,38 32,32 38,37 M5,2 C3,12 7,28 3,38 M35,2 C38,10 33,30 37,38' fill='none' stroke='%23ccc' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E") 10 stretch;
  }
}
