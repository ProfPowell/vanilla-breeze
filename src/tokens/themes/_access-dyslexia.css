/**
 * Accessibility Theme: Dyslexia-Friendly
 * Typography optimized for readers with dyslexia
 *
 * Features:
 * - Atkinson Hyperlegible font (designed for low vision, works great for dyslexia)
 * - Extra letter and word spacing for easier tracking
 * - Generous line height to prevent line-skipping
 * - Shorter line lengths for easier reading
 * - Left-aligned text only (no justified text)
 *
 * Font: Atkinson Hyperlegible is free from the Braille Institute
 * https://brailleinstitute.org/freefont
 *
 * Apply via: data-theme="a11y-dyslexia"
 * Composable: data-theme="forest a11y-dyslexia"
 */

/* ===== FONT FACE DEFINITIONS ===== */
/* Atkinson Hyperlegible from Google Fonts */
@font-face {
  font-family: "Atkinson Hyperlegible";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/atkinsonhyperlegible/v11/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G04pIo.woff2") format("woff2");
}

@font-face {
  font-family: "Atkinson Hyperlegible";
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/atkinsonhyperlegible/v11/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G056Ikqg.woff2") format("woff2");
}

@font-face {
  font-family: "Atkinson Hyperlegible";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/atkinsonhyperlegible/v11/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8Wbc9eA.woff2") format("woff2");
}

@font-face {
  font-family: "Atkinson Hyperlegible";
  font-style: italic;
  font-weight: 700;
  font-display: swap;
  src: url("https://fonts.gstatic.com/s/atkinsonhyperlegible/v11/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056Yb_A.woff2") format("woff2");
}

:root[data-theme~="a11y-dyslexia"],
[data-theme~="a11y-dyslexia"] {
  /* ===== FONT FAMILY ===== */
  /* Atkinson Hyperlegible with robust fallbacks */
  --font-sans: "Atkinson Hyperlegible", "Segoe UI", Verdana, Tahoma, sans-serif;
  --font-serif: "Atkinson Hyperlegible", Georgia, "Times New Roman", serif;

  /* Keep monospace separate for code */
  --font-mono: ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, monospace;

  /* ===== LETTER SPACING ===== */
  /* Wider letter spacing helps distinguish similar characters */
  --letter-spacing-tight: 0;
  --letter-spacing-normal: 0.05em;
  --letter-spacing-wide: 0.08em;
  --letter-spacing-wider: 0.12em;

  /* ===== WORD SPACING ===== */
  /* Extra space between words aids word recognition */
  --word-spacing: 0.16em;

  /* ===== LINE HEIGHT ===== */
  /* Generous line height prevents line-skipping */
  --line-height-none: 1.2;
  --line-height-tight: 1.5;
  --line-height-snug: 1.65;
  --line-height-normal: 1.8;
  --line-height-relaxed: 2;
  --line-height-loose: 2.2;

  /* Legacy aliases */
  --leading-tight: var(--line-height-tight);
  --leading-snug: var(--line-height-snug);
  --leading-normal: var(--line-height-normal);
  --leading-relaxed: var(--line-height-relaxed);
  --leading-loose: var(--line-height-loose);

  /* ===== LINE LENGTH ===== */
  /* Shorter lines are easier to track */
  --measure-narrow: 40ch;
  --measure-normal: 55ch;
  --measure-wide: 65ch;

  /* Content width follows suit */
  --content-narrow: 35rem;
  --content-normal: 50rem;
  --content-wide: 65rem;

  /* ===== FONT WEIGHT ===== */
  /* Slightly bolder text for better character definition */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
}

/* ===== TYPOGRAPHY ADJUSTMENTS ===== */
:root[data-theme~="a11y-dyslexia"],
[data-theme~="a11y-dyslexia"] {
  /* Apply word-spacing to body text */
  & p,
  & li,
  & dd,
  & td,
  & th,
  & label,
  & span:not([class]) {
    word-spacing: var(--word-spacing);
    letter-spacing: var(--letter-spacing-normal);
  }

  /* Ensure no justified text - left-align only */
  & p,
  & li,
  & blockquote {
    text-align: left;
    hyphens: none;
  }

  /* Avoid all-caps for extended text */
  & h1,
  & h2,
  & h3,
  & h4,
  & h5,
  & h6 {
    text-transform: none;
    letter-spacing: var(--letter-spacing-normal);
  }

  /* Avoid italics for emphasis - use bold instead */
  & em {
    font-style: normal;
    font-weight: var(--font-weight-semibold);
  }

  /* Make strong even more distinct */
  & strong {
    font-weight: var(--font-weight-bold);
  }

  /* Links should be clearly distinguishable */
  & a:not([class]) {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 3px;
  }

  /* Lists with more spacing */
  & ul,
  & ol {
    padding-inline-start: 1.5em;
  }

  & li {
    margin-block-end: 0.5em;
  }

  /* Blockquotes clearly separated */
  & blockquote {
    padding-inline-start: 1.5em;
    border-inline-start-width: 4px;
  }

  /* Tables with better cell spacing */
  & td,
  & th {
    padding: 0.75em 1em;
  }

  /* Form labels clearly associated */
  & label {
    display: block;
    margin-block-end: 0.5em;
    font-weight: var(--font-weight-medium);
  }
}

/* ===== BACKGROUND COLOR OPTION ===== */
/* Cream/off-white background can reduce visual stress */
/* Uncomment if desired - some users prefer pure white, others prefer cream */
/*
:root[data-theme~="a11y-dyslexia"][data-mode="light"],
[data-theme~="a11y-dyslexia"]:not([data-mode="dark"]) {
  --color-background: oklch(98% 0.01 80);
  --color-surface: oklch(99% 0.005 80);
}
*/
