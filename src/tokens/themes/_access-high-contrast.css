/**
 * Accessibility Theme: High Contrast
 * Manual opt-in theme for WCAG AAA contrast compliance
 *
 * Features:
 * - 7:1+ contrast ratios (AAA level)
 * - Enhanced focus indicators (3px visible rings)
 * - Simplified decorations (no shadows that could obscure content)
 * - Works in both light and dark modes
 *
 * Apply via: data-theme="a11y-high-contrast"
 * Composable: data-theme="forest a11y-high-contrast"
 */

/* Light mode high contrast */
:root[data-theme~="a11y-high-contrast"],
[data-theme~="a11y-high-contrast"] {
  /* ===== BACKGROUND & SURFACE ===== */
  --color-background: oklch(100% 0 0);     /* Pure white */
  --color-surface: oklch(98% 0 0);         /* Near white */
  --color-surface-raised: oklch(100% 0 0); /* Pure white */
  --color-surface-sunken: oklch(95% 0 0);  /* Light gray */

  /* ===== TEXT - AAA CONTRAST ===== */
  /* All text colors achieve 7:1+ ratio against backgrounds */
  --color-text: oklch(10% 0 0);            /* Near black - 19:1 ratio */
  --color-text-muted: oklch(30% 0 0);      /* Dark gray - 7.5:1 ratio */
  --color-text-subtle: oklch(35% 0 0);     /* Medium dark - 7:1 ratio */
  --color-text-inverted: oklch(100% 0 0);  /* White */
  --color-text-on-primary: oklch(100% 0 0);

  /* ===== BORDERS - HIGHLY VISIBLE ===== */
  --color-border: oklch(30% 0 0);          /* Dark, visible borders */
  --color-border-strong: oklch(20% 0 0);   /* Very dark for emphasis */
  --color-border-subtle: oklch(45% 0 0);   /* Still visible */
  --color-border-focus: oklch(40% 0.25 265); /* Contrasting blue */

  /* ===== PRIMARY COLORS - ADJUSTED FOR CONTRAST ===== */
  /* Primary colors darkened for better contrast on white */
  --color-primary: oklch(40% 0.2 var(--hue-primary, 260));
  --color-primary-hover: oklch(35% 0.22 var(--hue-primary, 260));
  --color-primary-active: oklch(30% 0.2 var(--hue-primary, 260));
  --color-primary-subtle: oklch(90% 0.05 var(--hue-primary, 260));

  --color-secondary: oklch(40% 0.1 var(--hue-secondary, 200));
  --color-accent: oklch(45% 0.18 var(--hue-accent, 30));

  --color-interactive: var(--color-primary);
  --color-interactive-hover: var(--color-primary-hover);

  /* ===== STATUS COLORS - HIGH CONTRAST ===== */
  --color-success: oklch(35% 0.15 145);
  --color-success-text: oklch(25% 0.12 145);
  --color-warning: oklch(40% 0.15 70);
  --color-warning-text: oklch(30% 0.12 70);
  --color-error: oklch(40% 0.2 25);
  --color-error-text: oklch(30% 0.18 25);
  --color-info: oklch(35% 0.12 240);
  --color-info-text: oklch(25% 0.1 240);

  /* ===== FOCUS INDICATORS ===== */
  --focus-ring-width: 3px;
  --focus-ring-offset: 2px;
  --focus-ring-color: oklch(40% 0.25 265); /* Visible blue */
  --color-focus-ring: var(--focus-ring-color);

  /* ===== SIMPLIFIED DECORATIONS ===== */
  /* Remove shadows that could reduce contrast or obscure edges */
  --shadow-xs: none;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
  --shadow-xl: none;
  --shadow-2xl: none;

  /* Minimal border radius for clearer boundaries */
  --radius-m: var(--radius-xs);
  --radius-l: var(--radius-s);

  /* Slightly thicker borders */
  --border-width-thin: 1px;
  --border-width-medium: 2px;
}

/* ===== DARK MODE VARIANT ===== */
:root[data-theme~="a11y-high-contrast"][data-mode="dark"],
[data-theme~="a11y-high-contrast"][data-mode="dark"] {
  color-scheme: dark;

  /* ===== DARK BACKGROUND & SURFACE ===== */
  --color-background: oklch(5% 0 0);       /* Near black */
  --color-surface: oklch(10% 0 0);         /* Very dark */
  --color-surface-raised: oklch(15% 0 0);  /* Dark gray */
  --color-surface-sunken: oklch(3% 0 0);   /* Darkest */

  /* ===== LIGHT TEXT ON DARK ===== */
  --color-text: oklch(95% 0 0);            /* Near white - 18:1 ratio */
  --color-text-muted: oklch(80% 0 0);      /* Light gray - 8:1 ratio */
  --color-text-subtle: oklch(75% 0 0);     /* Medium light - 7:1 ratio */
  --color-text-inverted: oklch(5% 0 0);    /* Near black */
  --color-text-on-primary: oklch(5% 0 0);

  /* ===== LIGHT BORDERS ON DARK ===== */
  --color-border: oklch(75% 0 0);
  --color-border-strong: oklch(85% 0 0);
  --color-border-subtle: oklch(60% 0 0);
  --color-border-focus: oklch(70% 0.2 265);

  /* ===== LIGHTENED PRIMARIES FOR DARK MODE ===== */
  --color-primary: oklch(70% 0.18 var(--hue-primary, 260));
  --color-primary-hover: oklch(75% 0.2 var(--hue-primary, 260));
  --color-primary-subtle: oklch(20% 0.08 var(--hue-primary, 260));

  --color-secondary: oklch(70% 0.08 var(--hue-secondary, 200));
  --color-accent: oklch(70% 0.16 var(--hue-accent, 30));

  /* ===== DARK MODE STATUS COLORS ===== */
  --color-success: oklch(70% 0.15 145);
  --color-success-text: oklch(80% 0.12 145);
  --color-warning: oklch(75% 0.15 70);
  --color-warning-text: oklch(85% 0.1 70);
  --color-error: oklch(70% 0.18 25);
  --color-error-text: oklch(80% 0.15 25);
  --color-info: oklch(70% 0.12 240);
  --color-info-text: oklch(80% 0.1 240);

  /* ===== DARK MODE FOCUS ===== */
  --focus-ring-color: oklch(70% 0.2 265);
  --color-focus-ring: var(--focus-ring-color);
}

/* Also respond to system dark preference when no explicit mode set */
@media (prefers-color-scheme: dark) {
  :root[data-theme~="a11y-high-contrast"]:not([data-mode="light"]),
  [data-theme~="a11y-high-contrast"]:not([data-mode="light"]) {
    color-scheme: dark;

    --color-background: oklch(5% 0 0);
    --color-surface: oklch(10% 0 0);
    --color-surface-raised: oklch(15% 0 0);
    --color-surface-sunken: oklch(3% 0 0);

    --color-text: oklch(95% 0 0);
    --color-text-muted: oklch(80% 0 0);
    --color-text-subtle: oklch(75% 0 0);
    --color-text-inverted: oklch(5% 0 0);
    --color-text-on-primary: oklch(5% 0 0);

    --color-border: oklch(75% 0 0);
    --color-border-strong: oklch(85% 0 0);
    --color-border-subtle: oklch(60% 0 0);
    --color-border-focus: oklch(70% 0.2 265);

    --color-primary: oklch(70% 0.18 var(--hue-primary, 260));
    --color-primary-hover: oklch(75% 0.2 var(--hue-primary, 260));
    --color-primary-subtle: oklch(20% 0.08 var(--hue-primary, 260));

    --focus-ring-color: oklch(70% 0.2 265);
    --color-focus-ring: var(--focus-ring-color);
  }
}
