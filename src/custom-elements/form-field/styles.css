/**
 * form-field - Accessible form field wrapper
 *
 * Markup pattern:
 * <form-field>
 *   <label for="name">Name</label>
 *   <input id="name" required aria-describedby="name-hint name-error" />
 *   <output id="name-hint" class="hint" for="name">3-20 characters.</output>
 *   <output id="name-error" class="error" for="name" aria-live="polite">Please enter a valid name.</output>
 * </form-field>
 */

form-field {
  display: block;
}

/* Required field indicator */
form-field:has(:required) label::after {
  content: " *";
  color: var(--color-error);
}

/* Hint - always visible */
form-field output.hint {
  display: block;
  font-size: var(--font-size-s);
  color: var(--color-text-muted);
  margin-block-start: var(--size-xs);
}

/* Error - hidden by default */
form-field output.error {
  display: none;
  font-size: var(--font-size-s);
  color: var(--color-error);
  margin-block-start: var(--size-xs);
}

/* Valid state - after user interaction */
form-field:has(:user-valid) {
  & input,
  & textarea,
  & select {
    border-color: var(--color-success);
    background: color-mix(in oklab, var(--color-success) 5%, transparent);
  }

  & output.hint {
    display: none;
  }
}

/* Invalid state - after user interaction */
form-field:has(:user-invalid) {
  & input,
  & textarea,
  & select {
    border-color: var(--color-error);
  }

  & output.error {
    display: block;
  }
}

/* Checkbox/radio variants */
form-field[data-type="checkbox"],
form-field[data-type="radio"] {
  & label {
    display: flex;
    align-items: center;
    gap: var(--size-xs);
    cursor: pointer;
  }

  & input {
    margin: 0;
  }
}
