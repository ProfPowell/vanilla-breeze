media-avatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  width: var(--_size, 3rem);
  height: var(--_size, 3rem);
  border-radius: var(--_radius, var(--radius-full));
  background: var(--color-gray-200);
  color: var(--color-gray-600);
  font-weight: var(--font-weight-medium);
  font-size: var(--_font-size, 1rem);
  overflow: hidden;
  flex-shrink: 0;

  /* Image */
  & > img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Fallback (initials or icon) */
  & > [data-fallback] {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    text-transform: uppercase;
  }

  /* Status indicator */
  & > [data-status] {
    position: absolute;
    inset-block-end: 0;
    inset-inline-end: 0;
    width: 25%;
    height: 25%;
    min-width: 0.5rem;
    min-height: 0.5rem;
    border-radius: var(--radius-full);
    border: 2px solid var(--color-surface);
    background: var(--color-gray-400);

    &[data-status="online"] { background: var(--color-success); }
    &[data-status="offline"] { background: var(--color-gray-400); }
    &[data-status="busy"] { background: var(--color-error); }
    &[data-status="away"] { background: var(--color-warning); }
  }

  /* Sizes */
  &[data-size="xs"] {
    --_size: 1.5rem;
    --_font-size: 0.5rem;
  }

  &[data-size="sm"] {
    --_size: 2rem;
    --_font-size: 0.75rem;
  }

  &[data-size="md"] {
    --_size: 3rem;
    --_font-size: 1rem;
  }

  &[data-size="lg"] {
    --_size: 4rem;
    --_font-size: 1.25rem;
  }

  &[data-size="xl"] {
    --_size: 6rem;
    --_font-size: 1.75rem;
  }

  &[data-size="2xl"] {
    --_size: 8rem;
    --_font-size: 2.5rem;
  }

  /* Shapes */
  &[data-shape="square"] {
    --_radius: var(--radius-m);
  }

  &[data-shape="rounded"] {
    --_radius: var(--radius-l);
  }

  /* Ring/border */
  &[data-ring] {
    box-shadow: 0 0 0 2px var(--color-surface), 0 0 0 4px var(--color-border);
  }
}

/* Avatar group */
[data-avatar-group] {
  display: flex;
  flex-direction: row-reverse;
  justify-content: flex-end;

  & > media-avatar {
    margin-inline-start: -0.5rem;
    box-shadow: 0 0 0 2px var(--color-surface);

    &:last-child {
      margin-inline-start: 0;
    }
  }
}
