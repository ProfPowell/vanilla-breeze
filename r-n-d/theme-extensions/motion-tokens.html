<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Motion Tokens - Theme Extension R&amp;D | Vanilla Breeze</title>

  <!-- Core VB System -->
  <link rel="stylesheet" href="/cdn/vanilla-breeze.css">

  <style>
    /* ============================================
       MOTION TOKENS EXPLORATION
       Expanding the motion system with theme-driven
       animation presets and motion personalities
       ============================================ */

    :root {
      /* New motion presets to explore */
      --motion-hover-transform: translateY(-2px);
      --motion-hover-shadow: var(--shadow-lg);
      --motion-enter: fade-in 200ms ease-out;
      --motion-exit: fade-out 150ms ease-in;
      --motion-stagger-delay: 50ms;

      /* Motion personality tokens */
      --motion-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
      --motion-snappy: cubic-bezier(0.4, 0, 0.2, 1);
      --motion-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);
      --motion-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    body {
      display: grid;
      grid-template:
        "body-header" auto
        "body-main"   1fr
        "body-footer" auto
        / 1fr;
      min-height: 100dvh;
    }

    main {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: var(--space-6);
    }

    /* Theme Switcher */
    .theme-switcher {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 10000;
      display: flex;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--color-surface-raised);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-l);
      box-shadow: var(--shadow-lg);
    }

    .theme-switcher select,
    .theme-switcher button {
      padding: 0.5rem;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-s);
      background: var(--color-surface);
      color: var(--color-text);
      font-family: inherit;
      font-size: var(--text-sm);
      cursor: pointer;
    }

    .theme-switcher button[aria-pressed="true"] {
      background: var(--color-primary);
      color: white;
      border-color: var(--color-primary);
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: var(--space-12) var(--space-4);
      margin-block-end: var(--space-8);
    }

    .hero h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      margin: 0 0 var(--space-4) 0;
    }

    .hero p {
      font-size: var(--text-lg);
      color: var(--color-text-muted);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Section */
    .demo-section {
      margin-block-end: var(--space-12);
      padding: var(--space-6);
      background: var(--color-surface-raised);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-l);
    }

    .demo-section h2 {
      margin: 0 0 var(--space-2) 0;
    }

    .demo-section > p {
      color: var(--color-text-muted);
      margin: 0 0 var(--space-6) 0;
    }

    /* ============================================
       HOVER EFFECTS DEMO
       ============================================ */
    .hover-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
    }

    .hover-card {
      padding: var(--space-5);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      text-align: center;
    }

    .hover-card h3 {
      margin: 0 0 var(--space-2) 0;
      font-size: var(--text-base);
    }

    .hover-card p {
      margin: 0;
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    /* Lift effect */
    .hover-lift {
      transition:
        transform var(--duration-normal) var(--ease-out-3),
        box-shadow var(--duration-normal) var(--ease-out-3);
    }
    .hover-lift:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    /* Glow effect */
    .hover-glow {
      transition: box-shadow var(--duration-normal) var(--ease-out-3);
    }
    .hover-glow:hover {
      box-shadow: 0 0 0 4px var(--color-primary-subtle),
                  0 0 20px var(--color-primary-subtle);
    }

    /* Scale effect */
    .hover-scale {
      transition: transform var(--duration-normal) var(--motion-bounce);
    }
    .hover-scale:hover {
      transform: scale(1.03);
    }

    /* Slide effect */
    .hover-slide {
      position: relative;
      overflow: hidden;
    }
    .hover-slide::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--color-primary);
      transform: translateX(-100%);
      transition: transform var(--duration-normal) var(--ease-out-3);
      opacity: 0.1;
    }
    .hover-slide:hover::before {
      transform: translateX(0);
    }

    /* Border grow effect */
    .hover-border {
      border: 2px solid transparent;
      transition: border-color var(--duration-fast) var(--ease-out-3);
    }
    .hover-border:hover {
      border-color: var(--color-primary);
    }

    /* Tilt effect */
    .hover-tilt {
      transition: transform var(--duration-fast) var(--ease-out-3);
    }
    .hover-tilt:hover {
      transform: perspective(500px) rotateY(5deg);
    }

    /* ============================================
       TRANSITION PRESETS DEMO
       ============================================ */
    .transition-demo {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-4);
      justify-content: center;
    }

    .transition-box {
      width: 80px;
      height: 80px;
      background: var(--color-primary);
      border-radius: var(--radius-m);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: var(--text-xs);
      font-weight: var(--weight-semibold);
      text-align: center;
      cursor: pointer;
    }

    .transition-box.snappy {
      transition: transform 150ms var(--motion-snappy);
    }
    .transition-box.smooth {
      transition: transform 300ms var(--motion-smooth);
    }
    .transition-box.bouncy {
      transition: transform 400ms var(--motion-bounce);
    }
    .transition-box.elastic {
      transition: transform 500ms var(--motion-elastic);
    }

    .transition-box:hover {
      transform: scale(1.2);
    }

    .transition-labels {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-4);
      justify-content: center;
      margin-top: var(--space-2);
    }

    .transition-labels span {
      width: 80px;
      text-align: center;
      font-size: var(--text-xs);
      color: var(--color-text-muted);
    }

    /* ============================================
       ENTER/EXIT ANIMATIONS
       ============================================ */
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fade-out {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    @keyframes slide-in-up {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slide-in-down {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scale-in {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes pop-in {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      70% {
        transform: scale(1.05);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .enter-exit-demo {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-4);
      justify-content: center;
    }

    .enter-card {
      padding: var(--space-4);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      text-align: center;
      min-width: 140px;
    }

    .enter-card h4 {
      margin: 0 0 var(--space-2) 0;
      font-size: var(--text-sm);
    }

    .enter-box {
      width: 60px;
      height: 60px;
      background: var(--color-primary);
      border-radius: var(--radius-s);
      margin: 0 auto var(--space-2) auto;
    }

    .enter-box.animate-fade { animation: fade-in 300ms ease-out; }
    .enter-box.animate-slide-up { animation: slide-in-up 300ms ease-out; }
    .enter-box.animate-slide-down { animation: slide-in-down 300ms ease-out; }
    .enter-box.animate-scale { animation: scale-in 300ms ease-out; }
    .enter-box.animate-pop { animation: pop-in 400ms var(--motion-bounce); }

    .replay-btn {
      padding: var(--space-1) var(--space-2);
      font-size: var(--text-xs);
      background: var(--color-surface-alt);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-s);
      cursor: pointer;
    }

    /* ============================================
       STAGGERED ANIMATIONS
       ============================================ */
    .stagger-list {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-3);
      justify-content: center;
    }

    .stagger-item {
      padding: var(--space-3) var(--space-4);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      animation: slide-in-up 300ms ease-out backwards;
    }

    .stagger-item:nth-child(1) { animation-delay: calc(var(--motion-stagger-delay) * 0); }
    .stagger-item:nth-child(2) { animation-delay: calc(var(--motion-stagger-delay) * 1); }
    .stagger-item:nth-child(3) { animation-delay: calc(var(--motion-stagger-delay) * 2); }
    .stagger-item:nth-child(4) { animation-delay: calc(var(--motion-stagger-delay) * 3); }
    .stagger-item:nth-child(5) { animation-delay: calc(var(--motion-stagger-delay) * 4); }
    .stagger-item:nth-child(6) { animation-delay: calc(var(--motion-stagger-delay) * 5); }
    .stagger-item:nth-child(7) { animation-delay: calc(var(--motion-stagger-delay) * 6); }
    .stagger-item:nth-child(8) { animation-delay: calc(var(--motion-stagger-delay) * 7); }

    .stagger-controls {
      display: flex;
      gap: var(--space-3);
      align-items: center;
      justify-content: center;
      margin-top: var(--space-4);
    }

    .stagger-controls label {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: var(--text-sm);
    }

    .stagger-controls input[type="range"] {
      width: 120px;
    }

    /* ============================================
       VIEW TRANSITIONS DEMO
       ============================================ */
    .vt-demo {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
    }

    .vt-card {
      padding: var(--space-5);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      text-align: center;
      cursor: pointer;
      view-transition-name: var(--vt-name);
    }

    .vt-card:nth-child(1) { --vt-name: vt-card-1; }
    .vt-card:nth-child(2) { --vt-name: vt-card-2; }
    .vt-card:nth-child(3) { --vt-name: vt-card-3; }

    .vt-card.expanded {
      grid-column: 1 / -1;
      padding: var(--space-8);
      background: var(--color-primary);
      color: white;
    }

    .vt-card h3 {
      margin: 0 0 var(--space-2) 0;
    }

    .vt-card p {
      margin: 0;
      opacity: 0.8;
    }

    ::view-transition-old(vt-card-1),
    ::view-transition-old(vt-card-2),
    ::view-transition-old(vt-card-3),
    ::view-transition-new(vt-card-1),
    ::view-transition-new(vt-card-2),
    ::view-transition-new(vt-card-3) {
      animation-duration: 300ms;
    }

    /* ============================================
       THEME MOTION PERSONALITIES
       ============================================ */
    .personality-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: var(--space-4);
    }

    .personality-card {
      padding: var(--space-4);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-m);
      text-align: center;
    }

    .personality-card h4 {
      margin: 0 0 var(--space-2) 0;
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    .personality-box {
      width: 50px;
      height: 50px;
      background: var(--color-primary);
      margin: 0 auto var(--space-3) auto;
    }

    /* Default personality */
    .personality-default .personality-box {
      border-radius: var(--radius-m);
      transition: transform var(--duration-normal) var(--ease-3);
    }
    .personality-default:hover .personality-box {
      transform: translateY(-4px);
    }

    /* Swiss - precise, linear */
    [data-theme="swiss"] .personality-swiss .personality-box,
    .personality-swiss .personality-box {
      border-radius: 0;
      transition: transform 200ms linear;
    }
    .personality-swiss:hover .personality-box {
      transform: translateX(10px);
    }

    /* Organic - flowing, natural */
    .personality-organic .personality-box {
      border-radius: 50%;
      transition: transform 400ms cubic-bezier(0.4, 0, 0.2, 1);
    }
    .personality-organic:hover .personality-box {
      transform: scale(1.15) rotate(10deg);
    }

    /* Brutalist - instant, raw */
    .personality-brutalist .personality-box {
      border-radius: 0;
      transition: none;
    }
    .personality-brutalist:hover .personality-box {
      transform: rotate(15deg) scale(1.1);
    }

    /* Cyber - glitchy, stepped */
    .personality-cyber .personality-box {
      border-radius: var(--radius-s);
      transition: transform 300ms steps(4);
      box-shadow: 0 0 10px var(--color-primary);
    }
    .personality-cyber:hover .personality-box {
      transform: translateX(15px);
      box-shadow: 0 0 20px var(--color-primary);
    }

    .personality-card p {
      margin: 0;
      font-size: var(--text-xs);
      color: var(--color-text-muted);
    }

    /* ============================================
       REDUCED MOTION SUPPORT
       ============================================ */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }

      .reduced-motion-notice {
        display: block;
      }
    }

    .reduced-motion-notice {
      display: none;
      padding: var(--space-4);
      background: var(--color-warning-subtle);
      border: 1px solid var(--color-warning);
      border-radius: var(--radius-m);
      margin-block-end: var(--space-6);
      color: var(--color-warning-emphasis);
    }

    /* Code block */
    .code-block {
      background: var(--color-surface-sunken);
      padding: var(--space-4);
      border-radius: var(--radius-m);
      overflow-x: auto;
      font-family: var(--font-mono);
      font-size: var(--text-sm);
      margin-block: var(--space-4);
    }

    /* Token display */
    .token-list {
      display: grid;
      gap: var(--space-3);
      margin-block: var(--space-4);
    }

    .token-item {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: var(--space-4);
      padding: var(--space-3);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-s);
      align-items: center;
    }

    .token-name {
      font-family: var(--font-mono);
      font-size: var(--text-sm);
      color: var(--color-primary);
    }

    .token-value {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      color: var(--color-text-muted);
    }

    /* Footer */
    footer {
      text-align: center;
      padding: var(--space-6);
      background: var(--color-surface-alt);
      border-block-start: 1px solid var(--color-border);
    }

    footer a {
      color: var(--color-primary);
    }
  </style>
</head>

<body>
  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <select id="theme-select">
      <option value="">Default</option>
      <option value="swiss">Swiss</option>
      <option value="organic">Organic</option>
      <option value="brutalist">Brutalist</option>
      <option value="cyber">Cyber</option>
    </select>
    <button id="reduced-motion-toggle" aria-pressed="false" title="Toggle reduced motion">
      Reduce Motion
    </button>
  </div>

  <header>
    <nav>
      <a href="index.html">Theme Extensions</a>
      <a href="../theme-picker/">Picker Variants</a>
      <a href="../theme-lab/">Theme Lab</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h1>Motion Tokens</h1>
      <p>Expanding the motion system with theme-driven animation presets, hover effects, enter/exit animations, and View Transitions API integration.</p>
    </section>

    <div class="reduced-motion-notice">
      <strong>Reduced Motion Enabled:</strong> Animations are minimized based on your system preference. You can toggle this behavior using the button above.
    </div>

    <!-- Proposed Tokens -->
    <section class="demo-section">
      <h2>Proposed Motion Tokens</h2>
      <p>New tokens to add to the existing motion.css system.</p>

      <div class="token-list">
        <div class="token-item">
          <span class="token-name">--motion-hover-transform</span>
          <span class="token-value">translateY(-2px)</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-hover-shadow</span>
          <span class="token-value">var(--shadow-lg)</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-stagger-delay</span>
          <span class="token-value">50ms</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-bounce</span>
          <span class="token-value">cubic-bezier(0.34, 1.56, 0.64, 1)</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-snappy</span>
          <span class="token-value">cubic-bezier(0.4, 0, 0.2, 1)</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-smooth</span>
          <span class="token-value">cubic-bezier(0.25, 0.1, 0.25, 1)</span>
        </div>
        <div class="token-item">
          <span class="token-name">--motion-elastic</span>
          <span class="token-value">cubic-bezier(0.68, -0.55, 0.265, 1.55)</span>
        </div>
      </div>
    </section>

    <!-- Hover Effects -->
    <section class="demo-section">
      <h2>Hover Effects</h2>
      <p>Reusable hover patterns that can be applied to cards, buttons, and interactive elements.</p>

      <div class="hover-grid">
        <div class="hover-card hover-lift">
          <h3>Lift</h3>
          <p>Raises with shadow</p>
        </div>
        <div class="hover-card hover-glow">
          <h3>Glow</h3>
          <p>Subtle ring glow</p>
        </div>
        <div class="hover-card hover-scale">
          <h3>Scale</h3>
          <p>Bouncy scale up</p>
        </div>
        <div class="hover-card hover-slide">
          <h3>Slide</h3>
          <p>Color slide-in</p>
        </div>
        <div class="hover-card hover-border">
          <h3>Border</h3>
          <p>Border appears</p>
        </div>
        <div class="hover-card hover-tilt">
          <h3>Tilt</h3>
          <p>3D perspective</p>
        </div>
      </div>
    </section>

    <!-- Transition Presets -->
    <section class="demo-section">
      <h2>Transition Presets</h2>
      <p>Different easing curves create different motion personalities. Hover each box to compare.</p>

      <div class="transition-demo">
        <div class="transition-box snappy">Snappy</div>
        <div class="transition-box smooth">Smooth</div>
        <div class="transition-box bouncy">Bouncy</div>
        <div class="transition-box elastic">Elastic</div>
      </div>
      <div class="transition-labels">
        <span>150ms</span>
        <span>300ms</span>
        <span>400ms</span>
        <span>500ms</span>
      </div>
    </section>

    <!-- Enter/Exit Animations -->
    <section class="demo-section">
      <h2>Enter/Exit Animations</h2>
      <p>Reusable keyframe animations for elements appearing and disappearing.</p>

      <div class="enter-exit-demo" id="enter-demo">
        <div class="enter-card">
          <h4>Fade In</h4>
          <div class="enter-box animate-fade"></div>
          <button class="replay-btn" data-animation="animate-fade">Replay</button>
        </div>
        <div class="enter-card">
          <h4>Slide Up</h4>
          <div class="enter-box animate-slide-up"></div>
          <button class="replay-btn" data-animation="animate-slide-up">Replay</button>
        </div>
        <div class="enter-card">
          <h4>Slide Down</h4>
          <div class="enter-box animate-slide-down"></div>
          <button class="replay-btn" data-animation="animate-slide-down">Replay</button>
        </div>
        <div class="enter-card">
          <h4>Scale In</h4>
          <div class="enter-box animate-scale"></div>
          <button class="replay-btn" data-animation="animate-scale">Replay</button>
        </div>
        <div class="enter-card">
          <h4>Pop In</h4>
          <div class="enter-box animate-pop"></div>
          <button class="replay-btn" data-animation="animate-pop">Replay</button>
        </div>
      </div>

      <div class="code-block">
<pre><code>/* Keyframe definitions */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pop-in {
  0% { opacity: 0; transform: scale(0.8); }
  70% { transform: scale(1.05); }
  100% { opacity: 1; transform: scale(1); }
}

/* Usage */
.element { animation: var(--motion-enter); }
.element.exit { animation: var(--motion-exit); }</code></pre>
      </div>
    </section>

    <!-- Staggered Animations -->
    <section class="demo-section">
      <h2>Staggered Animations</h2>
      <p>Child elements animate in sequence using CSS custom properties for delay calculation.</p>

      <div class="stagger-list" id="stagger-list">
        <div class="stagger-item">Item 1</div>
        <div class="stagger-item">Item 2</div>
        <div class="stagger-item">Item 3</div>
        <div class="stagger-item">Item 4</div>
        <div class="stagger-item">Item 5</div>
        <div class="stagger-item">Item 6</div>
        <div class="stagger-item">Item 7</div>
        <div class="stagger-item">Item 8</div>
      </div>

      <div class="stagger-controls">
        <label>
          Stagger Delay:
          <input type="range" id="stagger-delay" min="0" max="200" value="50">
          <span id="stagger-value">50ms</span>
        </label>
        <button id="stagger-replay" class="replay-btn">Replay</button>
      </div>

      <div class="code-block">
<pre><code>:root {
  --motion-stagger-delay: 50ms;
}

.stagger-item {
  animation: slide-in-up 300ms ease-out backwards;
}

.stagger-item:nth-child(1) { animation-delay: calc(var(--motion-stagger-delay) * 0); }
.stagger-item:nth-child(2) { animation-delay: calc(var(--motion-stagger-delay) * 1); }
.stagger-item:nth-child(3) { animation-delay: calc(var(--motion-stagger-delay) * 2); }
/* ... */</code></pre>
      </div>
    </section>

    <!-- View Transitions -->
    <section class="demo-section">
      <h2>View Transitions API</h2>
      <p>Click a card to expand it with a smooth View Transition. The browser handles the interpolation.</p>

      <div class="vt-demo" id="vt-demo">
        <div class="vt-card" data-card="1">
          <h3>Card One</h3>
          <p>Click to expand</p>
        </div>
        <div class="vt-card" data-card="2">
          <h3>Card Two</h3>
          <p>Click to expand</p>
        </div>
        <div class="vt-card" data-card="3">
          <h3>Card Three</h3>
          <p>Click to expand</p>
        </div>
      </div>

      <div class="code-block">
<pre><code>// Trigger view transition
function toggleCard(card) {
  if (!document.startViewTransition) {
    card.classList.toggle('expanded');
    return;
  }

  document.startViewTransition(() => {
    card.classList.toggle('expanded');
  });
}

/* CSS for named transitions */
.vt-card { view-transition-name: var(--vt-name); }
.vt-card:nth-child(1) { --vt-name: vt-card-1; }

::view-transition-old(vt-card-1),
::view-transition-new(vt-card-1) {
  animation-duration: 300ms;
}</code></pre>
      </div>
    </section>

    <!-- Theme Motion Personalities -->
    <section class="demo-section">
      <h2>Theme Motion Personalities</h2>
      <p>Each theme can have its own motion character. Hover the boxes to see different personalities.</p>

      <div class="personality-grid">
        <div class="personality-card personality-default">
          <h4>Default</h4>
          <div class="personality-box"></div>
          <p>Smooth lift</p>
        </div>
        <div class="personality-card personality-swiss">
          <h4>Swiss</h4>
          <div class="personality-box"></div>
          <p>Linear, precise</p>
        </div>
        <div class="personality-card personality-organic">
          <h4>Organic</h4>
          <div class="personality-box"></div>
          <p>Flowing, natural</p>
        </div>
        <div class="personality-card personality-brutalist">
          <h4>Brutalist</h4>
          <div class="personality-box"></div>
          <p>Instant, raw</p>
        </div>
        <div class="personality-card personality-cyber">
          <h4>Cyber</h4>
          <div class="personality-box"></div>
          <p>Stepped, glitchy</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Vanilla Breeze Theme Extensions R&D | <a href="index.html">Back to Index</a></p>
  </footer>

  <script>
    // Theme switching
    document.getElementById('theme-select').addEventListener('change', (e) => {
      const theme = e.target.value;
      if (theme) {
        document.body.dataset.theme = theme;
      } else {
        delete document.body.dataset.theme;
      }
    });

    // Reduced motion toggle
    const reducedMotionBtn = document.getElementById('reduced-motion-toggle');
    reducedMotionBtn.addEventListener('click', () => {
      const isPressed = reducedMotionBtn.getAttribute('aria-pressed') === 'true';
      reducedMotionBtn.setAttribute('aria-pressed', !isPressed);
      document.documentElement.classList.toggle('reduce-motion', !isPressed);
    });

    // Add CSS for manual reduce motion class
    const style = document.createElement('style');
    style.textContent = `
      .reduce-motion *, .reduce-motion *::before, .reduce-motion *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      .reduce-motion .reduced-motion-notice { display: block; }
    `;
    document.head.appendChild(style);

    // Enter animation replay
    document.querySelectorAll('.replay-btn[data-animation]').forEach(btn => {
      btn.addEventListener('click', () => {
        const box = btn.previousElementSibling;
        const animClass = btn.dataset.animation;
        box.classList.remove(animClass);
        // Trigger reflow
        void box.offsetWidth;
        box.classList.add(animClass);
      });
    });

    // Stagger controls
    const staggerDelay = document.getElementById('stagger-delay');
    const staggerValue = document.getElementById('stagger-value');
    const staggerReplay = document.getElementById('stagger-replay');
    const staggerList = document.getElementById('stagger-list');

    staggerDelay.addEventListener('input', () => {
      const value = staggerDelay.value;
      staggerValue.textContent = `${value}ms`;
      document.documentElement.style.setProperty('--motion-stagger-delay', `${value}ms`);
    });

    staggerReplay.addEventListener('click', () => {
      staggerList.querySelectorAll('.stagger-item').forEach(item => {
        item.style.animation = 'none';
        void item.offsetWidth;
        item.style.animation = '';
      });
    });

    // View Transitions demo
    const vtDemo = document.getElementById('vt-demo');
    let expandedCard = null;

    vtDemo.addEventListener('click', (e) => {
      const card = e.target.closest('.vt-card');
      if (!card) return;

      const updateDOM = () => {
        if (expandedCard === card) {
          card.classList.remove('expanded');
          expandedCard = null;
        } else {
          if (expandedCard) {
            expandedCard.classList.remove('expanded');
          }
          card.classList.add('expanded');
          expandedCard = card;
        }
      };

      if (!document.startViewTransition) {
        updateDOM();
        return;
      }

      document.startViewTransition(updateDOM);
    });
  </script>
</body>
</html>
