<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Settings - Tab Navigation</title>
  <link rel="stylesheet" href="/src/main.css"/>
  <style>
    body {
      background: var(--color-surface-alt);
      padding: var(--size-xl);
    }
    .settings-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-l);
      overflow: hidden;
    }
    .settings-header {
      padding: var(--size-l);
      border-bottom: 1px solid var(--color-border);
    }
    .tab-list {
      display: flex;
      gap: 0;
      list-style: none;
      padding: 0;
      margin: 0;
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
    }
    .tab {
      padding: var(--size-m) var(--size-l);
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      color: var(--color-text-muted);
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-default);
      margin-bottom: -1px;
    }
    .tab:hover {
      color: var(--color-text);
      background: var(--color-surface-raised);
    }
    .tab[aria-selected="true"] {
      color: var(--color-interactive);
      border-bottom-color: var(--color-interactive);
    }
    .tab-panel {
      padding: var(--size-l);
    }
    .tab-panel[hidden] {
      display: none;
    }
    .setting-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: var(--size-l);
      padding: var(--size-m) 0;
      border-bottom: 1px solid var(--color-border);
    }
    .setting-row:last-child {
      border-bottom: none;
    }
    .setting-info {
      flex: 1;
    }
    .setting-info h3 {
      margin: 0;
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
    }
    .setting-info p {
      margin: var(--size-2xs) 0 0 0;
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
    }
    .setting-control {
      flex-shrink: 0;
    }
    /* Toggle switch */
    .toggle {
      position: relative;
      width: 44px;
      height: 24px;
    }
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-track {
      position: absolute;
      inset: 0;
      background: var(--color-surface-raised);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-full);
      transition: background var(--duration-fast) var(--ease-default);
      cursor: pointer;
    }
    .toggle-track::after {
      content: "";
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      box-shadow: var(--shadow-sm);
      transition: transform var(--duration-fast) var(--ease-default);
    }
    .toggle input:checked + .toggle-track {
      background: var(--color-interactive);
      border-color: var(--color-interactive);
    }
    .toggle input:checked + .toggle-track::after {
      transform: translateX(20px);
    }
    .toggle input:focus-visible + .toggle-track {
      outline: 2px solid var(--color-focus);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <section data-layout="center" data-layout-max="normal" data-layout-gap="l">
    <header data-layout="stack" data-layout-gap="xs">
      <h1>Settings</h1>
      <p class="text-muted">Manage your account settings and preferences.</p>
    </header>

    <div class="settings-card">
      <!-- Tab List -->
      <div role="tablist" class="tab-list" aria-label="Settings sections">
        <button role="tab" class="tab" id="tab-account" aria-selected="true" aria-controls="panel-account">
          Account
        </button>
        <button role="tab" class="tab" id="tab-security" aria-selected="false" aria-controls="panel-security" tabindex="-1">
          Security
        </button>
        <button role="tab" class="tab" id="tab-notifications" aria-selected="false" aria-controls="panel-notifications" tabindex="-1">
          Notifications
        </button>
        <button role="tab" class="tab" id="tab-billing" aria-selected="false" aria-controls="panel-billing" tabindex="-1">
          Billing
        </button>
      </div>

      <!-- Account Panel -->
      <div role="tabpanel" class="tab-panel" id="panel-account" aria-labelledby="tab-account">
        <div data-layout="stack" data-layout-gap="l">
          <form data-layout="stack" data-layout-gap="l">
            <div data-layout="grid" data-layout-min="200px" data-layout-gap="l">
              <form-field>
                <label for="display-name">Display name</label>
                <input type="text" id="display-name" name="display_name" value="John Doe"/>
              </form-field>
              <form-field>
                <label for="username">Username</label>
                <input type="text" id="username" name="username" value="johndoe"/>
              </form-field>
            </div>

            <form-field>
              <label for="email">Email address</label>
              <input type="email" id="email" name="email" value="john@example.com"/>
            </form-field>

            <form-field>
              <label for="bio">Bio</label>
              <textarea id="bio" name="bio" rows="3" placeholder="Write a short bio..."></textarea>
            </form-field>

            <footer data-layout="cluster" data-layout-justify="end" data-layout-gap="m">
              <button type="submit">Update profile</button>
            </footer>
          </form>
        </div>
      </div>

      <!-- Security Panel -->
      <div role="tabpanel" class="tab-panel" id="panel-security" aria-labelledby="tab-security" hidden>
        <div data-layout="stack" data-layout-gap="l">
          <div class="setting-row">
            <div class="setting-info">
              <h3>Change password</h3>
              <p>Update your password to keep your account secure.</p>
            </div>
            <div class="setting-control">
              <button class="secondary small">Change</button>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Two-factor authentication</h3>
              <p>Add an extra layer of security to your account.</p>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input type="checkbox" name="two_factor"/>
                <span class="toggle-track"></span>
              </label>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Active sessions</h3>
              <p>Manage devices where you're currently logged in.</p>
            </div>
            <div class="setting-control">
              <button class="secondary small">View all</button>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Delete account</h3>
              <p>Permanently delete your account and all associated data.</p>
            </div>
            <div class="setting-control">
              <button class="danger small">Delete</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications Panel -->
      <div role="tabpanel" class="tab-panel" id="panel-notifications" aria-labelledby="tab-notifications" hidden>
        <div data-layout="stack" data-layout-gap="l">
          <div class="setting-row">
            <div class="setting-info">
              <h3>Email notifications</h3>
              <p>Receive email updates about your account activity.</p>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input type="checkbox" name="email_notifications" checked/>
                <span class="toggle-track"></span>
              </label>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Push notifications</h3>
              <p>Get push notifications on your devices.</p>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input type="checkbox" name="push_notifications" checked/>
                <span class="toggle-track"></span>
              </label>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Weekly digest</h3>
              <p>Receive a weekly summary of your activity.</p>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input type="checkbox" name="weekly_digest"/>
                <span class="toggle-track"></span>
              </label>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Marketing emails</h3>
              <p>Receive updates about new features and promotions.</p>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input type="checkbox" name="marketing_emails"/>
                <span class="toggle-track"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Billing Panel -->
      <div role="tabpanel" class="tab-panel" id="panel-billing" aria-labelledby="tab-billing" hidden>
        <div data-layout="stack" data-layout-gap="l">
          <layout-card data-variant="outlined" data-padding="m">
            <div data-layout="cluster" data-layout-justify="between" data-layout-align="center">
              <div data-layout="stack" data-layout-gap="2xs">
                <span class="text-sm text-muted">Current plan</span>
                <span class="text-lg font-semibold">Pro Plan - $29/month</span>
              </div>
              <button class="secondary small">Change plan</button>
            </div>
          </layout-card>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Payment method</h3>
              <p>Visa ending in 4242 - Expires 12/2027</p>
            </div>
            <div class="setting-control">
              <button class="secondary small">Update</button>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Billing address</h3>
              <p>123 Main St, San Francisco, CA 94102</p>
            </div>
            <div class="setting-control">
              <button class="secondary small">Edit</button>
            </div>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h3>Invoices</h3>
              <p>Download past invoices and billing statements.</p>
            </div>
            <div class="setting-control">
              <button class="secondary small">View history</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script type="module" src="/src/main.js"></script>
  <script>
    // Tab functionality
    const tablist = document.querySelector('[role="tablist"]');
    const tabs = tablist.querySelectorAll('[role="tab"]');
    const panels = document.querySelectorAll('[role="tabpanel"]');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Deselect all tabs
        tabs.forEach(t => {
          t.setAttribute('aria-selected', 'false');
          t.setAttribute('tabindex', '-1');
        });

        // Hide all panels
        panels.forEach(p => p.hidden = true);

        // Select clicked tab
        tab.setAttribute('aria-selected', 'true');
        tab.removeAttribute('tabindex');

        // Show associated panel
        const panelId = tab.getAttribute('aria-controls');
        document.getElementById(panelId).hidden = false;
      });

      // Keyboard navigation
      tab.addEventListener('keydown', (e) => {
        const tabArray = Array.from(tabs);
        const index = tabArray.indexOf(tab);
        let newIndex;

        if (e.key === 'ArrowRight') {
          newIndex = (index + 1) % tabs.length;
        } else if (e.key === 'ArrowLeft') {
          newIndex = (index - 1 + tabs.length) % tabs.length;
        } else if (e.key === 'Home') {
          newIndex = 0;
        } else if (e.key === 'End') {
          newIndex = tabs.length - 1;
        } else {
          return;
        }

        e.preventDefault();
        tabArray[newIndex].click();
        tabArray[newIndex].focus();
      });
    });
  </script>
</body>
</html>
