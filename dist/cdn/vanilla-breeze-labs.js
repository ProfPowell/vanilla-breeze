var o=class{#e;#n=[];#t=0;#r=null;#i=null;constructor(t){if(!t||!(t instanceof HTMLFormElement))throw new Error("WizardController requires a form element");this.#e=t,this.#p()}#p(){if(this.#n=Array.from(this.#e.querySelectorAll("fieldset[data-wizard-step]")),this.#n.length===0){console.warn("Wizard form has no steps");return}this.#r=this.#e.querySelector("[data-wizard-progress]"),this.#f(),this.#e.setAttribute("data-wizard-enhanced",""),this.#e.setAttribute("data-wizard-total",String(this.#n.length)),this.#m(),this.#e.addEventListener("change",()=>this.#d());let t=this.#l();t!==null&&t>=0&&t<this.#n.length&&(this.#t=t),window.addEventListener("hashchange",()=>{let e=this.#l();e!==null&&e!==this.#t&&this.goTo(e)}),this.#d(),this.#a()}#f(){this.#i=document.createElement("div"),this.#i.setAttribute("role","status"),this.#i.setAttribute("aria-live","polite"),this.#i.setAttribute("aria-atomic","true"),this.#i.setAttribute("data-wizard-status",""),this.#e.prepend(this.#i)}#m(){let t=this.#e.querySelector("[data-wizard-prev]"),e=this.#e.querySelector("[data-wizard-next]");t?.addEventListener("click",i=>{i.preventDefault(),this.prev()}),e?.addEventListener("click",i=>{i.preventDefault(),this.next()})}#s(){return this.#n.filter(t=>!t.hasAttribute("data-wizard-hidden"))}#h(){return this.#s()[this.#t]}#a(){let t=this.#s();this.#n.forEach(s=>{s.removeAttribute("data-wizard-active")});let e=t[this.#t];e&&e.setAttribute("data-wizard-active","");let i=this.#t+1;this.#e.setAttribute("data-wizard-current",String(i)),this.#e.setAttribute("data-wizard-total",String(t.length)),this.#t===t.length-1?this.#e.setAttribute("data-wizard-last",""):this.#e.removeAttribute("data-wizard-last"),this.#w(),this.#g(),this.#v()}#w(){if(!this.#r)return;let t=this.#s();this.#r.max=t.length,this.#r.value=this.#t+1}#g(){let t=`#step=${this.#t+1}`;window.location.hash!==t&&history.replaceState(null,"",t)}#l(){let e=window.location.hash.match(/step=(\d+)/);return e?parseInt(e[1],10)-1:null}#v(){if(!this.#i)return;let i=this.#h()?.querySelector("legend")?.textContent||`Step ${this.#t+1}`,s=this.#s();this.#i.textContent=`Now on step ${this.#t+1} of ${s.length}: ${i}`}#u(){let t=this.#h();if(!t||t.hasAttribute("data-wizard-optional"))return!0;let e=t.querySelectorAll("input, select, textarea"),i=!0;for(let s of e)if(!s.checkValidity()){s.reportValidity(),i=!1;break}return i}#d(){this.#n.forEach(e=>{let i=e.getAttribute("data-wizard-if");if(!i)return;this.#b(i)?e.removeAttribute("data-wizard-hidden"):e.setAttribute("data-wizard-hidden","")});let t=this.#s();this.#t>=t.length&&(this.#t=Math.max(0,t.length-1)),this.#a()}#b(t){let e=t.startsWith("!"),i=e?t.slice(1):t;if(i.includes(":")){let[w,a]=i.split(":"),c=a.startsWith("!"),p=c?a.slice(1):a,f=this.#c(w);return c?f!==p:f===p}let d=!!this.#c(i);return e?!d:d}#c(t){let e=this.#e.elements.namedItem(t);return e?e instanceof RadioNodeList?e.value:e instanceof HTMLInputElement?e.type==="checkbox"?e.checked?e.value||"true":"":e.value:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value:"":""}#o(t,e={}){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))}goTo(t){let e=this.#s();if(t<0||t>=e.length||t>this.#t&&!this.#u())return!1;let i=this.#t;return this.#t=t,this.#a(),this.#o("wizard:stepchange",{from:i,to:t}),!0}next(){let t=this.#s();return this.#t>=t.length-1?(this.#u()&&this.#o("wizard:complete"),!1):this.goTo(this.#t+1)}prev(){return this.#t<=0?!1:this.goTo(this.#t-1)}reset(){this.#t=0,this.#a(),this.#o("wizard:reset")}get currentStep(){return this.#t}get totalSteps(){return this.#s().length}get form(){return this.#e}};function m(){document.querySelectorAll("form[data-wizard]").forEach(t=>{if(t.hasAttribute("data-wizard-enhanced"))return;let e=new o(t);t.wizardController=e,t.wizardGoTo=i=>e.goTo(i),t.wizardNext=()=>e.next(),t.wizardPrev=()=>e.prev(),t.wizardReset=()=>e.reset()})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m());var h=class{constructor(){this.audioContext=null,this.enabled=!1,this.volume=.5}enable(){return this.audioContext||(this.audioContext=new AudioContext),this.enabled=!0,this}disable(){return this.enabled=!1,this}setVolume(t){return this.volume=Math.max(0,Math.min(1,t)),this}playTone(t,e,i="sine"){if(!this.enabled||!this.audioContext)return;let s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.audioContext.destination),s.frequency.value=t,s.type=i,r.gain.value=this.volume*.3,s.start(),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+e),s.stop(this.audioContext.currentTime+e)}play(t){let e={click:()=>this.playTone(800,.1),success:()=>{this.playTone(523,.1),setTimeout(()=>this.playTone(659,.1),100),setTimeout(()=>this.playTone(784,.15),200)},error:()=>{this.playTone(200,.15,"sawtooth"),setTimeout(()=>this.playTone(180,.2,"sawtooth"),150)},notification:()=>{this.playTone(880,.1),setTimeout(()=>this.playTone(1100,.15),100)}};e[t]&&e[t]()}},l=class{constructor(){this.originalTheme=null,this.previewTheme=null}preview(t){return this.originalTheme===null&&(this.originalTheme=document.body.dataset.theme||""),this.previewTheme=t,t?document.body.dataset.theme=t:delete document.body.dataset.theme,this}commit(){return this.originalTheme=this.previewTheme,this.previewTheme=null,this}cancel(){return this.originalTheme!==null&&(this.originalTheme?document.body.dataset.theme=this.originalTheme:delete document.body.dataset.theme),this.originalTheme=null,this.previewTheme=null,this}},u=class{constructor(){this.delay=50}setDelay(t){return this.delay=t,document.documentElement.style.setProperty("--motion-stagger-delay",`${t}ms`),this}replay(t){if(!t)return this;let e=t.children;for(let i of e)i.style.animation="none",i.offsetWidth,i.style.animation="";return this}},g={sound:new h,themePreview:new l,stagger:new u,init(){return document.querySelectorAll("[data-labs-sound]").forEach(n=>{n.addEventListener("click",()=>{this.sound.play(n.dataset.labsSound)})}),console.log("Vanilla Breeze Labs initialized"),this}};typeof window<"u"&&(window.VBLabs=g);export{h as SoundManager,u as StaggerController,l as ThemePreviewManager,g as VBLabs,o as WizardController,m as initWizards};
