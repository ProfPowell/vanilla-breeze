var d=class{#e;#i=[];#t=0;#r=null;#n=null;#a=null;constructor(t){if(!t||!(t instanceof HTMLFormElement))throw new Error("WizardController requires a form element");this.#e=t,this.#f()}#f(){if(this.#i=Array.from(this.#e.querySelectorAll("fieldset[data-wizard-step]")),this.#i.length===0){console.warn("Wizard form has no steps");return}this.#r=this.#e.querySelector("[data-wizard-progress]"),this.#v(),this.#m(),this.#e.setAttribute("data-wizard-enhanced",""),this.#e.setAttribute("data-wizard-total",String(this.#i.length)),this.#w(),this.#e.addEventListener("change",()=>this.#c());let t=this.#u();t!==null&&t>=0&&t<this.#i.length&&(this.#t=t),window.addEventListener("hashchange",()=>{let e=this.#u();e!==null&&e!==this.#t&&this.goTo(e)}),this.#c(),this.#o()}#m(){this.#n=document.createElement("div"),this.#n.setAttribute("role","status"),this.#n.setAttribute("aria-live","polite"),this.#n.setAttribute("aria-atomic","true"),this.#n.setAttribute("data-wizard-status",""),this.#e.prepend(this.#n)}#v(){let t=this.#e.getAttribute("data-wizard-steps");if(t){this.#a=document.querySelector(t);return}this.#a=this.#e.querySelector("nav.steps")}#b(){if(!this.#a)return;let t=Array.from(this.#a.querySelectorAll("ol > li")),e=this.#s(),i=0;for(let s=0;s<this.#i.length;s++){let r=this.#i[s],n=t[i];if(!n)break;if(r.hasAttribute("data-wizard-hidden")){n.setAttribute("hidden","");continue}else n.removeAttribute("hidden");let h=e.indexOf(r);if(n.removeAttribute("data-completed"),n.removeAttribute("aria-current"),h<this.#t){n.setAttribute("data-completed","");let o=n.querySelector("a");if(o){let l=r.querySelector("legend")?.textContent||`Step ${h+1}`;o.setAttribute("aria-label",`Go to ${l} (completed)`)}}else h===this.#t&&n.setAttribute("aria-current","step");i++}}#w(){let t=this.#e.querySelector("[data-wizard-prev]"),e=this.#e.querySelector("[data-wizard-next]");t?.addEventListener("click",i=>{i.preventDefault(),this.prev()}),e?.addEventListener("click",i=>{i.preventDefault(),this.next()})}#s(){return this.#i.filter(t=>!t.hasAttribute("data-wizard-hidden"))}#l(){return this.#s()[this.#t]}#o(){let t=this.#s();this.#i.forEach(s=>{s.removeAttribute("data-wizard-active")});let e=t[this.#t];e&&e.setAttribute("data-wizard-active","");let i=this.#t+1;this.#e.setAttribute("data-wizard-current",String(i)),this.#e.setAttribute("data-wizard-total",String(t.length)),this.#t===t.length-1?this.#e.setAttribute("data-wizard-last",""):this.#e.removeAttribute("data-wizard-last"),this.#g(),this.#b(),this.#y(),this.#S()}#g(){if(!this.#r)return;let t=this.#s();this.#r.max=t.length,this.#r.value=this.#t+1}#y(){let t=`#step=${this.#t+1}`;window.location.hash!==t&&history.replaceState(null,"",t)}#u(){let e=window.location.hash.match(/step=(\d+)/);return e?parseInt(e[1],10)-1:null}#S(){if(!this.#n)return;let i=this.#l()?.querySelector("legend")?.textContent||`Step ${this.#t+1}`,s=this.#s();this.#n.textContent=`Now on step ${this.#t+1} of ${s.length}: ${i}`}#d(){let t=this.#l();if(!t||t.hasAttribute("data-wizard-optional"))return!0;let e=t.querySelectorAll("input, select, textarea"),i=!0;for(let s of e)if(!s.checkValidity()){s.reportValidity(),i=!1;break}return i}#c(){this.#i.forEach(e=>{let i=e.getAttribute("data-wizard-if");if(!i)return;this.#T(i)?e.removeAttribute("data-wizard-hidden"):e.setAttribute("data-wizard-hidden","")});let t=this.#s();this.#t>=t.length&&(this.#t=Math.max(0,t.length-1)),this.#o()}#T(t){let e=t.startsWith("!"),i=e?t.slice(1):t;if(i.includes(":")){let[h,o]=i.split(":"),u=o.startsWith("!"),l=u?o.slice(1):o,m=this.#p(h);return u?m!==l:m===l}let n=!!this.#p(i);return e?!n:n}#p(t){let e=this.#e.elements.namedItem(t);return e?e instanceof RadioNodeList?e.value:e instanceof HTMLInputElement?e.type==="checkbox"?e.checked?e.value||"true":"":e.value:e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?e.value:"":""}#h(t,e={}){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))}goTo(t){let e=this.#s();if(t<0||t>=e.length||t>this.#t&&!this.#d())return!1;let i=this.#t;return this.#t=t,this.#o(),this.#h("wizard:stepchange",{from:i,to:t}),!0}next(){let t=this.#s();return this.#t>=t.length-1?(this.#d()&&this.#h("wizard:complete"),!1):this.goTo(this.#t+1)}prev(){return this.#t<=0?!1:this.goTo(this.#t-1)}reset(){this.#t=0,this.#o(),this.#h("wizard:reset")}get currentStep(){return this.#t}get totalSteps(){return this.#s().length}get form(){return this.#e}};function v(){document.querySelectorAll("form[data-wizard]").forEach(t=>{if(t.hasAttribute("data-wizard-enhanced"))return;let e=new d(t);t.wizardController=e,t.wizardGoTo=i=>e.goTo(i),t.wizardNext=()=>e.next(),t.wizardPrev=()=>e.prev(),t.wizardReset=()=>e.reset()})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v());var c=class{constructor(){this.audioContext=null,this.enabled=!1,this.volume=.5}enable(){return this.audioContext||(this.audioContext=new AudioContext),this.enabled=!0,this}disable(){return this.enabled=!1,this}setVolume(t){return this.volume=Math.max(0,Math.min(1,t)),this}playTone(t,e,i="sine"){if(!this.enabled||!this.audioContext)return;let s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.audioContext.destination),s.frequency.value=t,s.type=i,r.gain.value=this.volume*.3,s.start(),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+e),s.stop(this.audioContext.currentTime+e)}play(t){let e={click:()=>this.playTone(800,.1),success:()=>{this.playTone(523,.1),setTimeout(()=>this.playTone(659,.1),100),setTimeout(()=>this.playTone(784,.15),200)},error:()=>{this.playTone(200,.15,"sawtooth"),setTimeout(()=>this.playTone(180,.2,"sawtooth"),150)},notification:()=>{this.playTone(880,.1),setTimeout(()=>this.playTone(1100,.15),100)}};e[t]&&e[t]()}},p=class{constructor(){this.originalTheme=null,this.previewTheme=null}preview(t){return this.originalTheme===null&&(this.originalTheme=document.body.dataset.theme||""),this.previewTheme=t,t?document.body.dataset.theme=t:delete document.body.dataset.theme,this}commit(){return this.originalTheme=this.previewTheme,this.previewTheme=null,this}cancel(){return this.originalTheme!==null&&(this.originalTheme?document.body.dataset.theme=this.originalTheme:delete document.body.dataset.theme),this.originalTheme=null,this.previewTheme=null,this}},f=class{constructor(){this.delay=50}setDelay(t){return this.delay=t,document.documentElement.style.setProperty("--motion-stagger-delay",`${t}ms`),this}replay(t){if(!t)return this;let e=t.children;for(let i of e)i.style.animation="none",i.offsetWidth,i.style.animation="";return this}},b={sound:new c,themePreview:new p,stagger:new f,init(){return document.querySelectorAll("[data-labs-sound]").forEach(a=>{a.addEventListener("click",()=>{this.sound.play(a.dataset.labsSound)})}),console.log("Vanilla Breeze Labs initialized"),this}};typeof window<"u"&&(window.VBLabs=b);export{c as SoundManager,f as StaggerController,p as ThemePreviewManager,b as VBLabs,d as WizardController,v as initWizards};
