---
/**
 * CodeBlock Component
 *
 * Syntax-highlighted code block with copy button.
 * Works with the code-block web component.
 *
 * Props:
 * - code: The code string to display
 * - lang: Language for syntax highlighting
 * - filename: Optional filename to display
 * - showLineNumbers: Whether to show line numbers
 */

interface Props {
  code: string;
  lang?: string;
  filename?: string;
  showLineNumbers?: boolean;
}

const {
  code,
  lang = 'plaintext',
  filename,
  showLineNumbers = false,
} = Astro.props;
---

<code-block
  data-language={lang}
  data-filename={filename}
  data-line-numbers={showLineNumbers || undefined}
>
  <pre><code class={`language-${lang}`} set:html={code} /></pre>
</code-block>

<style>
  code-block {
    display: block;
    margin-block: var(--size-m);
  }

  pre {
    margin: 0;
    padding: var(--size-m);
    background: var(--color-surface-sunken);
    border-radius: var(--radius-m);
    overflow-x: auto;
    font-size: var(--font-size-sm);
    line-height: var(--line-height-relaxed);
  }

  code {
    font-family: var(--font-mono);
  }
</style>
